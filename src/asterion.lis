src/asterion.asm:
     1                          INCLUDE "aquarius.inc"
src/aquarius.inc:
     1                          ; Aquarius SYSROM Routines
     2                          EXCL_MARK_GFX EQU $0056
     3                          SLEEP_ZERO EQU $1d48
     4                          SLEEP EQU $1d4b
     5                          FILL_FULL_1024 EQU $1e59
     6                          
     7                          ; CHRRAM - Character RAM
     8                          CHRRAM EQU $3000
     9                          CHRRAM_LEVEL_IND_L EQU $3001
    10                          CHRRAM_LEVEL_IND_R EQU $3004
    11                          CHRRAM_SHIFT_MODE_IDX EQU $3005
    12                          CHRRAM_LADDER_IDX EQU $3007
    13                          CHRRAM_ITEM_IDX EQU $3009
    14                          CHRRAM_MONSTER_IDX EQU $300b
    15                          CHRRAM_DOOR_IDX EQU $300d
    16                          CHRRAM_MAP_IDX EQU $3011
    17                          CHRRAM_ARMOR_IDX EQU $3013
    18                          CHRRAM_HELMET_IDX EQU $3015
    19                          CHRRAM_RING_IDX EQU $3017
    20                          IDX_VIEWPORT_CHRRAM EQU $3028
    21                          DAT_ram_3050 EQU $3050
    22                          CHRRAM_WALL_F0_IDX EQU $30cc
    23                          DAT_ram_3168 EQU $3168
    24                          CHRRAM_L1_DOOR_IDX EQU $316d
    25                          DAT_ram_3177 EQU $3177
    26                          DAT_ram_317a EQU $317a
    27                          DAT_ram_317f EQU $317f
    28                          DAT_ram_3191 EQU $3191
    29                          DAT_ram_3196 EQU $3196
    30                          DAT_ram_31a1 EQU $31a1
    31                          DAT_ram_31a6 EQU $31a6
    32                          CHRRAM_POINTER_IDX EQU $31d8
    33                          DAT_ram_3259 EQU $3259
    34                          DAT_ram_3266 EQU $3266
    35                          DAT_ram_326e EQU $326e
    36                          DAT_ram_3280 EQU $3280
    37                          DAT_ram_3297 EQU $3297
    38                          
    39                          ; CHRRAM Spare 24
    40                          WALL_F0_STATE EQU $33e8
    41                          WALL_F1_STATE EQU $33e9
    42                          WALL_F2_STATE EQU $33ea
    43                          WALL_F3_STATE EQU $33eb
    44                          DAT_ram_33ec EQU $33ec
    45                          DAT_ram_33ed EQU $33ed
    46                          DAT_ram_33ee EQU $33ee
    47                          DAT_ram_33ef EQU $33ef
    48                          DAT_ram_33f0 EQU $33f0
    49                          DAT_ram_33f1 EQU $33f1
    50                          DAT_ram_33f2 EQU $33f2
    51                          DAT_ram_33f3 EQU $33f3
    52                          DAT_ram_33f4 EQU $33f4
    53                          DAT_ram_33f5 EQU $33f5
    54                          DAT_ram_33f6 EQU $33f6
    55                          DAT_ram_33f7 EQU $33f7
    56                          DAT_ram_33f9 EQU $33f9
    57                          DAT_ram_33fa EQU $33fa
    58                          DAT_ram_33fb EQU $33fb
    59                          DAT_ram_33fd EQU $33fd
    60                          
    61                          ; COLRAM: Color RAM
    62                          COLRAM EQU $3400
    63                          COLRAM_LEVEL_IDX_L EQU $3401
    64                          COLRAM_FLOOR_IDX_10 EQU $3402
    65                          COLRAM_FLOOR_IDX_1 EQU $3403
    66                          COLRAM_LEVEL_IDX_R EQU $3404
    67                          COLRAM_ARMOR_IDX EQU $3413
    68                          COLRAM_HELMET_IDX EQU $3415
    69                          COLRAM_RING_IDX EQU $3417
    70                          COLRAM_PHYS_STATS_1000 EQU $3441
    71                          COLRAM_SPRT_STATS_10 EQU $3446
    72                          DAT_ram_3568 EQU $3568
    73                          COLRAM_F0_DOOR_IDX EQU $3570
    74                          DAT_ram_357f EQU $357f
    75                          DAT_ram_3590 EQU $3590
    76                          DAT_ram_3591 EQU $3591
    77                          DAT_ram_35a6 EQU $35a6
    78                          DAT_ram_35a7 EQU $35a7
    79                          DAT_ram_35d8 EQU $35d8
    80                          DAT_ram_35e0 EQU $35e0
    81                          DAT_ram_35e1 EQU $35e1
    82                          DAT_ram_35f6 EQU $35f6
    83                          DAT_ram_35f7 EQU $35f7
    84                          DAT_ram_3608 EQU $3608
    85                          DAT_ram_361f EQU $361f
    86                          DAT_ram_3728 EQU $3728
    87                          
    88                          ; COLRAM Spare 24
    89                          ITEM_F2 EQU $37e8
    90                          ITEM_F1 EQU $37e9
    91                          ITEM_F0 EQU $37ea
    92                          ITEM_FL1 EQU $37eb
    93                          ITEM_FR1 EQU $37ec
    94                          ITEM_R1 EQU $37ed
    95                          ITEM_L1 EQU $37ee
    96                          ITEM_B1 EQU $37ef
    97                          KEY_INPUT_COL0 EQU $37f6
    98                          KEY_INPUT_COL1 EQU $37f7
    99                          KEY_INPUT_COL2 EQU $37f8
   100                          KEY_INPUT_COL3 EQU $37f9
   101                          KEY_INPUT_COL4 EQU $37fa
   102                          KEY_INPUT_COL5 EQU $37fb
   103                          KEY_INPUT_COL6 EQU $37fc
   104                          KEY_INPUT_COL7 EQU $37fd
   105                          HC_INPUT_HOLDER EQU $37fe
   106                          
   107                          ; Aquarius Built-In 2k RAM Space
   108                          MAPSPACE_WALLS EQU $3800
   109                          MAP_LADDER_OFFSET EQU $3900
   110                          LADDER_POS EQU $3901
   111                          MAP_ITEM_SPACE EQU $3902
   112                          BYTE_ram_3903 EQU $3903
   113                          BYTE_ram_3904 EQU $3904
   114                          BYTE_ram_3905 EQU $3905
   115                          BYTE_ram_3906 EQU $3906
   116                          ITEM_MOVE_CHR_BUFFER EQU $3a00
   117                          ITEM_MOVE_COL_BUFFER EQU $3a10
   118                          BYTE_ram_3a20 EQU $3a20
   119                          BYTE_ram_3a58 EQU $3a58
   120                          DIR_FACING_FW EQU $3a60
   121                          DIR_FACING_BW EQU $3a61
   122                          DIR_FACING_SHORT EQU $3a62
   123                          MON_FS EQU $3a63
   124                          RAM_AC EQU $3a64
   125                          RAM_AD EQU $3a65
   126                          RAM_AE EQU $3a66
   127                          RAM_AF EQU $3a67
   128                          DUNGEON_LEVEL EQU $3a68
   129                          TIMER_A EQU $3a69
   130                          TIMER_B EQU $3a6a
   131                          TIMER_C EQU $3a6b
   132                          TIMER_D EQU $3a88
   133                          TIMER_E EQU $3a9c
   134                          
   135                          INPUT_HOLDER EQU $3a6c
   136                          SHIELD_PHYS EQU $3a71
   137                          SHIELD_SPRT EQU $3a73
   138                          ARMOR_INV_SLOT EQU $3a74
   139                          HELMET_INV_SLOT EQU $3a75
   140                          RING_INV_SLOT EQU $3a76
   141                          PLAYER_PREV_MAP_LOC EQU $3a77
   142                          LAST_ITEM_HELD EQU $3a78
   143                          PLAYER_MAP_POS EQU $3a79
   144                          RIGHT_HAND_ITEM EQU $3a7a
   145                          LEFT_HAND_ITEM EQU $3a7b
   146                          INV_ITEM_SLOT_1 EQU $3a7c
   147                          INV_ITEM_SLOT_2 EQU $3a7d
   148                          INV_ITEM_SLOT_3 EQU $3a7e
   149                          BYTE_ram_3a82 EQU $3a82
   150                          BYTE_ram_3a83 EQU $3a83
   151                          BYTE_ram_3a85 EQU $3a85
   152                          BYTE_ram_3a87 EQU $3a87
   153                          
   154                          BYTE_ram_3a89 EQU $3a89
   155                          BYTE_ram_3a8a EQU $3a8a
   156                          MELEE_ANIM_STATE EQU $3a8b
   157                          BYTE_ram_3a8c EQU $3a8c
   158                          MONSTER_ATT_POS_COUNT EQU $3a8d
   159                          MONSTER_ATT_POS_OFFSET EQU $3a8f
   160                          RNDHOLD_AA EQU $3a91
   161                          PLAYER_PHYS_HEALTH EQU $3a93
   162                          PLAYER_PHYS_HEALTH_MAX EQU $3a95
   163                          PLAYER_SPRT_HEALTH EQU $3a97
   164                          PLAYER_SPRT_HEALTH_MAX EQU $3a98
   165                          WEAPON_PHYS EQU $3a99
   166                          WEAPON_SPRT EQU $3a9b
   167                          BYTE_ram_3a9e EQU $3a9e
   168                          BYTE_ram_3aa0 EQU $3aa0
   169                          ITEM_HOLDER EQU $3aa1
   170                          CURR_MONSTER_SPRT EQU $3aa2
   171                          CURR_MONSTER_PHYS EQU $3aa3
   172                          BYTE_ram_3aa5 EQU $3aa5
   173                          NEW_DAMAGE EQU $3aa6
   174                          WEAPON_VALUE_HOLDER EQU $3aa8
   175                          BYTE_ram_3aa9 EQU $3aa9
   176                          FOOD_INV EQU $3aab
   177                          ARROW_INV EQU $3aac
   178                          MAP_INV_SLOT EQU $3aad
   179                          SND_CYCLE_HOLDER EQU $3ab3
   180                          PITCH_UP_BOOL EQU $3ab5
   181                          SOUND_REPEAT_COUNT EQU $3ab8
   182                          GAME_BOOLEANS EQU $3ab9
   183                          NEXT_BLINK_CHECK EQU $3aba
   184                          TEMP_MAP EQU $3b00
   185                          BYTE_ram_3ffd EQU $3ffd
   186                          
   187                          ; Missing items
   188                          BYTE_ram_2400 EQU $2400
   189                          BYTE_ram_2613 EQU $2613
   190                          DAT_ram_303f EQU $303f
   191                          DAT_ram_3051 EQU $3051
   192                          DAT_ram_30a0 EQU $30a0
   193                          DAT_ram_30c8 EQU $30c8
   194                          DAT_ram_30df EQU $30df
   195                          DAT_ram_310c EQU $310c
   196                          DAT_ram_3111 EQU $3111
   197                          DAT_ram_3150 EQU $3150
   198                          DAT_ram_316c EQU $316c
   199                          DAT_ram_3178 EQU $3178
   200                          DAT_ram_317c EQU $317c
   201                          DAT_ram_31af EQU $31af
   202                          DAT_ram_31b4 EQU $31b4
   203                          DAT_ram_3200 EQU $3200
   204                          DAT_ram_3230 EQU $3230
   205                          DAT_ram_324c EQU $324c
   206                          DAT_ram_32da EQU $32da
   207                          DAT_ram_335c EQU $335c
   208                          DAT_ram_33c0 EQU $33c0
   209                          DAT_ram_34b4 EQU $34b4
   210                          DAT_ram_34c8 EQU $34c8
   211                          DAT_ram_34dc EQU $34dc
   212                          DAT_ram_351a EQU $351a
   213                          DAT_ram_352d EQU $352d
   214                          DAT_ram_3547 EQU $3547
   215                          DAT_ram_3550 EQU $3550
   216                          DAT_ram_356c EQU $356c
   217                          DAT_ram_3577 EQU $3577
   218                          DAT_ram_3578 EQU $3578
   219                          DAT_ram_357a EQU $357a
   220                          DAT_ram_357c EQU $357c
   221                          DAT_ram_35ba EQU $35ba
   222                          DAT_ram_35c0 EQU $35c0
   223                          DAT_ram_35c6 EQU $35c6
   224                          DAT_ram_35c8 EQU $35c8
   225                          DAT_ram_35ca EQU $35ca
   226                          DAT_ram_35cc EQU $35cc
   227                          LAB_ram_1208 EQU $1208
   228                          LAB_ram_efef EQU $efef
   229                          CHHRAM_INV_4_IDX EQU $31a9
   230                          CHHRAM_INV_6_IDX EQU $3251
   231                          CHHRAM_LVL_IDX EQU $33df
   232                          CHRRAM_AUTHORS_IDX EQU $3348
   233                          CHRRAM_F1_WALL_IDX EQU $3170
   234                          CHRRAM_FL1_WALL_IDX EQU $3147
   235                          CHRRAM_FO_ITEM_IDX EQU $3352
   236                          CHRRAM_LEFT_HAND_ITEM_IDX EQU $3271
   237                          CHRRAM_LEFT_HD_GFX_IDX EQU $3339
   238                          CHRRAM_LEVEL_IDX EQU $333d
   239                          CHRRAM_MONSTER_PHYS EQU $3089
   240                          CHRRAM_MONSTER_POOF_IDX EQU $323b
   241                          CHRRAM_MONSTER_SPRT EQU $3063
   242                          CHRRAM_PHYS_HEALTH_1000 EQU $3041
   243                          CHRRAM_PHYS_SHIELD_IDX EQU $3069
   244                          CHRRAM_PHYS_WEAPON_IDX EQU $3091
   245                          CHRRAM_RH_POOF_IDX EQU $336c
   246                          CHRRAM_RIGHT_HAND_ITEM_IDX EQU $327b
   247                          CHRRAM_RIGHT_HD_GFX_IDX EQU $3343
   248                          CHRRAM_SPRT_HEALTH_10 EQU $3047
   249                          CHRRAM_SPRT_SHIELD_IDX EQU $306f
   250                          CHRRAM_SPRT_WEAPON_IDX EQU $3097
   251                          CHRRAM_STATS_TOP EQU $3019
   252                          CHRRAM_YOU_DIED_IDX EQU $31e7
   253                          COLRAM_F0_WALL_MAP_IDX EQU $34cc
   254                          COLRAM_F1_DOOR_IDX EQU $35c2
   255                          COLRAM_FL00_WALL_IDX EQU $34a3
   256                          COLRAM_FL2_PLUS_WALL_IDX EQU $35be
   257                          COLRAM_FL2_WALL_IDX EQU $35bc
   258                          COLRAM_FL22_WALL_IDX EQU $35b8
   259                          COLRAM_FO_ITEM_IDX EQU $3752
   260                          COLRAM_L1_DOOR_IDX EQU $356d
   261                          COLRAM_MAP_IDX EQU $3411
   262                          COLRAM_PHYS_STATS_10 EQU $3443
   263                          COLRAM_RH_ITEM_IDX EQU $3743
   264                          COLRAM_SHIFT_MODE_IDX EQU $3405
   265                          COLRAM_SPRT_STATS_1 EQU $3447
   266                          COLRAM_VIEWPORT_IDX EQU $3428
   267                          HC_LAST_INPUT EQU $37ff
   268                          IDX_HEALTH_SPACER EQU $3045
   269                          
   270                          ; Aquarius IO ports
   271                          MODEM_A EQU $7E
   272                          MODEM_B EQU $7F
   273                          CONTROL_PADS EQU $F6
   274                          PSG EQU $F7
   275                          SPEAKER EQU $FC
   276                          VSYNC EQU $FD
   277                          PRINTER EQU $FE
   278                          KEYBOARD EQU $FF
   279                          
src/asterion.asm:
     2                          ORG $C000
     3                          NO_GFX:
     4  0000  ff                    db          $FF
     5                          DRAGON:
     6  0001  04040404              db          $04,$04,$04,$04
     7  0005  02b0e000c0a0c2a0      db          $02,$B0,$E0,$00,$C0,$A0,$C2,$A0,$C1,$01
              c101              
     8  000f  0202a099a0c9d798      db          $02,$02,$A0,$99,$A0,$C9,$D7,$98,$A0,$95,$95,$85,$A0,$81,$01
              a0959585a08101    
     9  001e  0202a0c3a4a81285      db          $02,$02,$A0,$C3,$A4,$A8,$12,$85,$86,$85,$A0,$97,$01
              8685a09701        
    10  002b  02a0178ca52094a0      db          $02,$A0,$17,$8C,$A5," ",$94,$A0,$94,$A5,$01
              94a501            
    11  0036  0202d7f6f97f7f7f      db          $02,$02,$D7,$F6,$F9,$7F,$7F,$7F,$7F,$B4,$01
              7fb401            
    12  0041  0202a0b595862084      db          $02,$02,$A0,$B5,$95,$86," ",$84," ",$B0,$A0,$99,$01
              20b0a09901        
    13  004e  0202a0c3d7a094a0      db          $02,$02,$A0,$C3,$D7,$A0,$94,$A0,$C9,$A0,$DB,$18,$A2,$C3,$01
              c9a0db18a2c301    
    14  005d  0218008d0000e899      db          $02,$18,$00,$8D,$00,$00,$E8,$99,$01
              01                
    15  0066  009eec1fbfa1ff        db          $00,$9E,$EC,$1F,$BF,$A1,$FF
    16                          DRAGON_S:
    17  006d  040404c9c9c0c001      db          $04,$04,$04,$C9,$C9,$C0,$C0,$01
    18  0075  eda5a09595a001        db          $ED,$A5,$A0,$95,$95,$A0,$01
    19  007c  a092a0f9a0caa0a7      db          $A0,$92,$A0,$F9,$A0,$CA,$A0,$A7,$01
              01                
    20  0085  babfefe901            db          $BA,$BF,$EF,$E9,$01
    21  008a  d9d907abff            db          $D9,$D9,"\a",$AB,$FF
    22  008f  ff                    db          $FF
    23  0090  ff                    db          $FF
    24  0091  ff                    db          $FF
    25  0092  ff                    db          $FF
    26  0093  ff                    db          $FF
    27  0094  ff                    db          $FF
    28  0095  ff                    db          $FF
    29  0096  ff                    db          $FF
    30  0097  ff                    db          $FF
    31  0098  ff                    db          $FF
    32  0099  ff                    db          $FF
    33  009a  ff                    db          $FF
    34  009b  ff                    db          $FF
    35  009c  ff                    db          $FF
    36  009d  ff                    db          $FF
    37  009e  ff                    db          $FF
    38  009f  ff                    db          $FF
    39  00a0  ff                    db          $FF
    40  00a1  ff                    db          $FF
    41  00a2  ff                    db          $FF
    42  00a3  ff                    db          $FF
    43  00a4  ff                    db          $FF
    44  00a5  ff                    db          $FF
    45  00a6  ff                    db          $FF
    46  00a7  ff                    db          $FF
    47  00a8  ff                    db          $FF
    48  00a9  ff                    db          $FF
    49  00aa  ff                    db          $FF
    50  00ab  ff                    db          $FF
    51  00ac  ff                    db          $FF
    52  00ad  ff                    db          $FF
    53  00ae  ff                    db          $FF
    54  00af  ff                    db          $FF
    55  00b0  ff                    db          $FF
    56  00b1  ff                    db          $FF
    57  00b2  ff                    db          $FF
    58  00b3  ff                    db          $FF
    59  00b4  ff                    db          $FF
    60  00b5  ff                    db          $FF
    61  00b6  ff                    db          $FF
    62  00b7  ff                    db          $FF
    63  00b8  ff                    db          $FF
    64  00b9  ff                    db          $FF
    65  00ba  ff                    db          $FF
    66  00bb  ff                    db          $FF
    67  00bc  ff                    db          $FF
    68  00bd  ff                    db          $FF
    69  00be  ff                    db          $FF
    70  00bf  ff                    db          $FF
    71  00c0  ff                    db          $FF
    72  00c1  ff                    db          $FF
    73  00c2  ff                    db          $FF
    74  00c3  ff                    db          $FF
    75  00c4  ff                    db          $FF
    76  00c5  ff                    db          $FF
    77  00c6  ff                    db          $FF
    78  00c7  ff                    db          $FF
    79  00c8  ff                    db          $FF
    80  00c9  ff                    db          $FF
    81  00ca  ff                    db          $FF
    82  00cb  ff                    db          $FF
    83  00cc  ff                    db          $FF
    84  00cd  ff                    db          $FF
    85  00ce  ff                    db          $FF
    86  00cf  ff                    db          $FF
    87  00d0  ff                    db          $FF
    88  00d1  ff                    db          $FF
    89  00d2  ff                    db          $FF
    90  00d3  ff                    db          $FF
    91  00d4  ff                    db          $FF
    92  00d5  ff                    db          $FF
    93  00d6  ff                    db          $FF
    94  00d7  ff                    db          $FF
    95  00d8  ff                    db          $FF
    96  00d9  ff                    db          $FF
    97  00da  ff                    db          $FF
    98  00db  ff                    db          $FF
    99  00dc  ff                    db          $FF
   100  00dd  ff                    db          $FF
   101  00de  ff                    db          $FF
   102  00df  ff                    db          $FF
   103  00e0  ff                    db          $FF
   104  00e1  ff                    db          $FF
   105  00e2  ff                    db          $FF
   106  00e3  ff                    db          $FF
   107  00e4  ff                    db          $FF
   108  00e5  ff                    db          $FF
   109  00e6  ff                    db          $FF
   110  00e7  ff                    db          $FF
   111  00e8  ff                    db          $FF
   112  00e9  ff                    db          $FF
   113  00ea  ff                    db          $FF
   114  00eb  ff                    db          $FF
   115  00ec  ff                    db          $FF
   116  00ed  ff                    db          $FF
   117  00ee  ff                    db          $FF
   118  00ef  ff                    db          $FF
   119  00f0  ff                    db          $FF
   120  00f1  ff                    db          $FF
   121  00f2  ff                    db          $FF
   122  00f3  ff                    db          $FF
   123  00f4  ff                    db          $FF
   124  00f5  ff                    db          $FF
   125  00f6  ff                    db          $FF
   126  00f7  ff                    db          $FF
   127  00f8  ff                    db          $FF
   128  00f9  ff                    db          $FF
   129  00fa  ff                    db          $FF
   130  00fb  ff                    db          $FF
   131  00fc  ff                    db          $FF
   132  00fd  ff                    db          $FF
   133  00fe  ff                    db          $FF
   134  00ff  ff                    db          $FF
   135  0100  ff                    db          $FF
   136  0101  ff                    db          $FF
   137  0102  ff                    db          $FF
   138  0103  ff                    db          $FF
   139  0104  ff                    db          $FF
   140  0105  ff                    db          $FF
   141  0106  ff                    db          $FF
   142  0107  ff                    db          $FF
   143  0108  ff                    db          $FF
   144  0109  ff                    db          $FF
   145  010a  ff                    db          $FF
   146  010b  ff                    db          $FF
   147  010c  ff                    db          $FF
   148  010d  ff                    db          $FF
   149  010e  ff                    db          $FF
   150  010f  ff                    db          $FF
   151  0110  ff                    db          $FF
   152  0111  ff                    db          $FF
   153  0112  ff                    db          $FF
   154                          LEVEL_99_LOOP:
   155  0113  4c6f6f6b73206c69      db          "Looks like this dungeon",$01
              6b65207468697320  
              64756e67656f6e01  
   156  012b  697320746f6f2073      db          "is too small for you",$01
              6d616c6c20666f72  
              20796f7501        
   157  0140  736f207765207769      db          "so we will put you back",$01
              6c6c207075742079  
              6f75206261636b01  
   158  0158  696e746f2061206e      db          "into a new floor #90.",$FF
              657720666c6f6f72  
              202339302eff      
   159                          STATS_TXT:
   160  016e  50485953d6535052      db          "PHYS",$D6,"SPRT",$FF
              54ff              
   161  0178  d600000000486561      db          $D6,$00,$00,$00,$00,"Health",$01
              6c746801          
   162  0184  d600000000536869      db          $D6,$00,$00,$00,$00,"Shield",$01
              656c6401          
   163  0190  d600000000576561      db          $D6,$00,$00,$00,$00,"Weapon",$FF
              706f6eff          
   164  019c  ff                    db          $FF
   165  019d  ff                    db          $FF
   166  019e  ff                    db          $FF
   167  019f  ff                    db          $FF
   168  01a0  ff                    db          $FF
   169  01a1  ff                    db          $FF
   170  01a2  ff                    db          $FF
   171  01a3  ff                    db          $FF
   172  01a4  ff                    db          $FF
   173  01a5  ff                    db          $FF
   174  01a6  ff                    db          $FF
   175  01a7  ff                    db          $FF
   176  01a8  ff                    db          $FF
   177  01a9  ff                    db          $FF
   178  01aa  ff                    db          $FF
   179  01ab  ff                    db          $FF
   180  01ac  ff                    db          $FF
   181  01ad  ff                    db          $FF
   182  01ae  ff                    db          $FF
   183  01af  ff                    db          $FF
   184  01b0  ff                    db          $FF
   185  01b1  ff                    db          $FF
   186  01b2  ff                    db          $FF
   187  01b3  ff                    db          $FF
   188  01b4  ff                    db          $FF
   189  01b5  ff                    db          $FF
   190  01b6  ff                    db          $FF
   191                          POOF_1:
   192  01b7  d7c901                db          $D7,$C9,$01
   193  01ba  c7d9ff                db          $C7,$D9,$FF
   194                          POOF_2:
   195  01bd  d1d101                db          $D1,$D1,$01
   196  01c0  d1d1ff                db          $D1,$D1,$FF
   197                          POOF_3:
   198  01c3  d1d1d1d101            db          $D1,$D1,$D1,$D1,$01
   199  01c8  d1d0d0d101            db          $D1,$D0,$D0,$D1,$01
   200  01cd  d1d0d0d101            db          $D1,$D0,$D0,$D1,$01
   201  01d2  d1d1d1d1ff            db          $D1,$D1,$D1,$D1,$FF
   202                          POOF_4:
   203  01d7  0100d0d001            db          $01,$00,$D0,$D0,$01
   204  01dc  00d0d0ff              db          $00,$D0,$D0,$FF
   205                          POOF_5:
   206  01e0  d0d0d0d001            db          $D0,$D0,$D0,$D0,$01
   207  01e5  d00000d001            db          $D0,$00,$00,$D0,$01
   208  01ea  d00000d001            db          $D0,$00,$00,$D0,$01
   209  01ef  d0d0d0d0ff            db          $D0,$D0,$D0,$D0,$FF
   210                          POOF_6:
   211  01f4  2020202001            db          "    ",$01
   212  01f9  2020202001            db          "    ",$01
   213  01fe  2020202001            db          "    ",$01
   214  0203  20202020ff            db          "    ",$FF
   215                          RING:
   216  0208  01010101010101        db          $01,$01,$01,$01,$01,$01,$01
   217  020f  006fff                db          $00,"o",$FF
   218                          RING_S:
   219  0212  010101                db          $01,$01,$01
   220  0215  00c6ff                db          $00,$C6,$FF
   221                          RING_T:
   222  0218  002eff                db          $00,".",$FF
   223                          ARROW_FLYING_LEFT:
   224  021b  010101010101          db          $01,$01,$01,$01,$01,$01
   225  0221  9bacff                db          $9B,$AC,$FF
   226                          ARROW_FLYING_RIGHT:
   227  0224  010101010101          db          $01,$01,$01,$01,$01,$01
   228  022a  ac9aff                db          $AC,$9A,$FF
   229                          QUIVER:
   230  022d  010101010101          db          $01,$01,$01,$01,$01,$01
   231  0233  7f7fa0d7a00601        db          $7F,$7F,$A0,$D7,$A0,$06,$01
   232  023a  a2acb2e901            db          $A2,$AC,$B2,$E9,$01
   233  023f  0000a2a1ff            db          $00,$00,$A2,$A1,$FF
   234                          QUIVER_S:
   235  0244  0101                  db          $01,$01
   236  0246  00afbdb001            db          $00,$AF,$BD,$B0,$01
   237  024b  0000a2ff              db          $00,$00,$A2,$FF
   238                          QUIVER_T:
   239  024f  00f0ff                db          $00,$F0,$FF
   240                          BUCKLER:
   241  0252  0101010101            db          $01,$01,$01,$01,$01
   242  0257  d7fcc901              db          $D7,$FC,$C9,$01
   243  025b  a098a07f9901          db          $A0,$98,$A0,$7F,$99,$01
   244  0261  c7afd9ff              db          $C7,$AF,$D9,$FF
   245                          BUCKLER_S:
   246  0265  0101                  db          $01,$01
   247  0267  0096ff                db          $00,$96,$FF
   248                          BUCKLER_T:
   249  026a  0087ff                db          $00,$87,$FF
   250                          CHALICE:
   251  026d  010101010101          db          $01,$01,$01,$01,$01,$01
   252  0273  a0c3a0899701          db          $A0,$C3,$A0,$89,$97,$01
   253  0279  009f01                db          $00,$9F,$01
   254  027c  e00eb0ff              db          $E0,$0E,$B0,$FF
   255                          CHALICE_S:
   256  0280  0101                  db          $01,$01
   257  0282  009f01                db          $00,$9F,$01
   258  0285  00ccff                db          $00,$CC,$FF
   259                          CHALICE_T:
   260  0288  0059ff                db          $00,"Y",$FF
   261                          HELMET:
   262  028b  010101010101          db          $01,$01,$01,$01,$01,$01
   263  0291  00c0c101              db          $00,$C0,$C1,$01
   264  0295  00bfefff              db          $00,$BF,$EF,$FF
   265                          HELMET_S:
   266  0299  010101                db          $01,$01,$01
   267  029c  0400d201              db          $04,$00,$D2,$01
   268  02a0  00a3ff                db          $00,$A3,$FF
   269                          HELMET_T:
   270  02a3  005eff                db          $00,"^",$FF
   271                          KEY:
   272  02a6  010101010101          db          $01,$01,$01,$01,$01,$01
   273  02ac  9090b8c901            db          $90,$90,$B8,$C9,$01
   274  02b1  10a080a0a9d9ff        db          $10,$A0,$80,$A0,$A9,$D9,$FF
   275                          KEY_S:
   276  02b8  010101                db          $01,$01,$01
   277  02bb  bcc5ff                db          $BC,$C5,$FF
   278                          KEY_T:
   279  02be  ff2dff                db          $FF,"-",$FF
   280                          BOW:
   281  02c1  0101010101            db          $01,$01,$01,$01,$01
   282  02c6  d7aca38e01            db          $D7,$AC,$A3,$8E,$01
   283  02cb  d600ca01              db          $D6,$00,$CA,$01
   284  02cf  b5ca01                db          $B5,$CA,$01
   285  02d2  9f00ff                db          $9F,$00,$FF
   286                          BOW_S:
   287  02d5  0101                  db          $01,$01
   288  02d7  d7acc901              db          $D7,$AC,$C9,$01
   289  02db  d6ca01                db          $D6,$CA,$01
   290  02de  c7ff                  db          $C7,$FF
   291                          BOW_T:
   292  02e0  007bff                db          $00,"{",$FF
   293                          AXE:
   294  02e3  0101010101            db          $01,$01,$01,$01,$01
   295  02e8  007fb701              db          $00,$7F,$B7,$01
   296  02ec  00d99801              db          $00,$D9,$98,$01
   297  02f0  0000b501              db          $00,$00,$B5,$01
   298  02f4  000099ff              db          $00,$00,$99,$FF
   299                          AXE_S:
   300  02f8  0101                  db          $01,$01
   301  02fa  00a0d7a0b701          db          $00,$A0,$D7,$A0,$B7,$01
   302  0300  00009801              db          $00,$00,$98,$01
   303  0304  0000b5ff              db          $00,$00,$B5,$FF
   304                          AXE_T:
   305  0308  0011ff                db          $00,$11,$FF
   306                          FOOD:
   307  030b  0101010101            db          $01,$01,$01,$01,$01
   308  0310  e41ff601              db          $E4,$1F,$F6,$01
   309  0314  a0c3cbdba09701        db          $A0,$C3,$CB,$DB,$A0,$97,$01
   310  031b  00bba01fa0a9ff        db          $00,$BB,$A0,$1F,$A0,$A9,$FF
   311                          FOOD_S:
   312  0322  0101                  db          $01,$01
   313  0324  e0beb001              db          $E0,$BE,$B0,$01
   314  0328  00e9a7ff              db          $00,$E9,$A7,$FF
   315                          FOOD_T:
   316  032c  0023ff                db          $00,"#",$FF
   317                          MAP:
   318  032f  0101010101            db          $01,$01,$01,$01,$01
   319  0334  f01fc89801            db          $F0,$1F,$C8,$98,$01
   320  0339  12c8ccb501            db          $12,$C8,$CC,$B5,$01
   321  033e  a0b5a0cdcc1201        db          $A0,$B5,$A0,$CD,$CC,$12,$01
   322  0345  a099a0cca01ffca0      db          $A0,$99,$A0,$CC,$A0,$1F,$FC,$A0,$FF
              ff                
   323                          MAP_S:
   324  034e  0101                  db          $01,$01
   325  0350  00d701                db          $00,$D7,$01
   326  0353  c7a0d5a0c901          db          $C7,$A0,$D5,$A0,$C9,$01
   327  0359  00d9ff                db          $00,$D9,$FF
   328                          MAP_T:
   329  035c  00d5ff                db          $00,$D5,$FF
   330                          CHEST:
   331  035f  0101010101            db          $01,$01,$01,$01,$01
   332  0364  9088889001            db          $90,$88,$88,$90,$01
   333  0369  a090888890a001        db          $A0,$90,$88,$88,$90,$A0,$01
   334  0370  a0819090a09101        db          $A0,$81,$90,$90,$A0,$91,$01
   335  0377  a0d7fcfcc9a0ff        db          $A0,$D7,$FC,$FC,$C9,$A0,$FF
   336                          LOCKED_CHEST:
   337  037e  0101010101            db          $01,$01,$01,$01,$01
   338  0383  9088889001            db          $90,$88,$88,$90,$01
   339  0388  a090888890a001        db          $A0,$90,$88,$88,$90,$A0,$01
   340  038f  a081cbdba09101        db          $A0,$81,$CB,$DB,$A0,$91,$01
   341  0396  a0d7fcfcc9a0ff        db          $A0,$D7,$FC,$FC,$C9,$A0,$FF
   342                          CHEST_S:
   343  039d  01e01f1fb001          db          $01,$E0,$1F,$1F,$B0,$01
   344  03a3  a099a080809801        db          $A0,$99,$A0,$80,$80,$98,$01
   345  03aa  a20000a1ff            db          $A2,$00,$00,$A1,$FF
   346                          CHEST_T:
   347  03af  00fcff                db          $00,$FC,$FF
   348                          ARMOR:
   349  03b2  0101010101            db          $01,$01,$01,$01,$01
   350  03b7  a0c9c7d9d7a001        db          $A0,$C9,$C7,$D9,$D7,$A0,$01
   351  03be  ea7f7fb501            db          $EA,$7F,$7F,$B5,$01
   352  03c3  a0c38888a097ff        db          $A0,$C3,$88,$88,$A0,$97,$FF
   353                          ARMOR_S:
   354  03ca  0101                  db          $01,$01
   355  03cc  c7a0c7d9a0d901        db          $C7,$A0,$C7,$D9,$A0,$D9,$01
   356  03d3  007f7f01              db          $00,$7F,$7F,$01
   357  03d7  00d9c7ff              db          $00,$D9,$C7,$FF
   358                          ARMOR_T:
   359  03db  00a0c7d901            db          $00,$A0,$C7,$D9,$01
   360  03e0  0097a0c3ff            db          $00,$97,$A0,$C3,$FF
   361                          PAVICE:
   362  03e5  0101010101            db          $01,$01,$01,$01,$01
   363  03ea  e8f0f0b401            db          $E8,$F0,$F0,$B4,$01
   364  03ef  ea7f7fb501            db          $EA,$7F,$7F,$B5,$01
   365  03f4  ea7f7fb501            db          $EA,$7F,$7F,$B5,$01
   366  03f9  00efbfff              db          $00,$EF,$BF,$FF
   367                          PAVICE_S:
   368  03fd  0101                  db          $01,$01
   369  03ff  00f4f801              db          $00,$F4,$F8,$01
   370  0403  007f7f01              db          $00,$7F,$7F,$01
   371  0407  00aba7ff              db          $00,$AB,$A7,$FF
   372                          PAVICE_T:
   373  040b  007f01                db          $00,$7F,$01
   374  040e  00c2ff                db          $00,$C2,$FF
   375                          AUTHORS:
   376  0411  2020204f72696769      db          "   Originally programmed by Tom Loughry ",$01
              6e616c6c79207072  
              6f6772616d6d6564  
              20627920546f6d20  
              4c6f756768727920  
              01                
   377  043a  20204e6577204746      db          "  New GFX & routines by Sean Harrington ",$FF
              58202620726f7574  
              696e657320627920  
              5365616e20486172  
              72696e67746f6e20  
              ff                
   378                          
   379                          AMULET:
   380  0463  0101010101            db          $01,$01,$01,$01,$01
   381  0468  d7acc901              db          $D7,$AC,$C9,$01
   382  046c  c7acc8c901            db          $C7,$AC,$C8,$C9,$01
   383  0471  d7acd9d601            db          $D7,$AC,$D9,$D6,$01
   384  0476  c7ac05d9ff            db          $C7,$AC,$05,$D9,$FF
   385                          AMULET_S:
   386  047b  0101                  db          $01,$01
   387  047d  00d7c901              db          $00,$D7,$C9,$01
   388  0481  00c7c8c901            db          $00,$C7,$C8,$C9,$01
   389  0486  00cbf1a5ff            db          $00,$CB,$F1,$A5,$FF
   390                          AMULET_T:
   391  048b  0026ff                db          $00,"&",$FF
   392                          LADDER:
   393  048e  0101010101            db          $01,$01,$01,$01,$01
   394  0493  ea0000b501            db          $EA,$00,$00,$B5,$01
   395  0498  eaafafb501            db          $EA,$AF,$AF,$B5,$01
   396  049d  fafcfcf501            db          $FA,$FC,$FC,$F5,$01
   397  04a2  abf0f0a7ff            db          $AB,$F0,$F0,$A7,$FF
   398                          LADDER_S:
   399  04a7  0101                  db          $01,$01
   400  04a9  00b4e801              db          $00,$B4,$E8,$01
   401  04ad  d7b7ebc901            db          $D7,$B7,$EB,$C9,$01
   402  04b2  c7afafd9ff            db          $C7,$AF,$AF,$D9,$FF
   403                          LADDER_T:
   404  04b7  00cd97ff              db          $00,$CD,$97,$FF
   405                          MACE:
   406  04bb  0101010101            db          $01,$01,$01,$01,$01
   407  04c0  009e8e01              db          $00,$9E,$8E,$01
   408  04c4  00a0c3a09701          db          $00,$A0,$C3,$A0,$97,$01
   409  04ca  00a0c3a09701          db          $00,$A0,$C3,$A0,$97,$01
   410  04d0  00a099a098ff          db          $00,$A0,$99,$A0,$98,$FF
   411                          MACE_S:
   412  04d6  0101                  db          $01,$01
   413  04d8  00e0b001              db          $00,$E0,$B0,$01
   414  04dc  00a091a08101          db          $00,$A0,$91,$A0,$81,$01
   415  04e2  00a0c3a097ff          db          $00,$A0,$C3,$A0,$97,$FF
   416                          MACE_T:
   417  04e8  0054ff                db          $00,"T",$FF
   418                          FIREBALL:
   419  04eb  0101010101            db          $01,$01,$01,$01,$01
   420  04f0  bab9e101              db          $BA,$B9,$E1,$01
   421  04f4  b8beb901              db          $B8,$BE,$B9,$01
   422  04f8  a8e1b6ff              db          $A8,$E1,$B6,$FF
   423                          FIREBALL_S:
   424  04fc  0101                  db          $01,$01
   425  04fe  00d1ff                db          $00,$D1,$FF
   426                          FIREBALL_T:
   427  0501  00d3ff                db          $00,$D3,$FF
   428                          GFX_BUFFER:
   429  0504  ff                    db          $FF
   430  0505  ff                    db          $FF
   431  0506  ff                    db          $FF
   432  0507  ff                    db          $FF
   433  0508  ff                    db          $FF
   434  0509  ff                    db          $FF
   435  050a  ff                    db          $FF
   436  050b  ff                    db          $FF
   437  050c  ff                    db          $FF
   438  050d  ff                    db          $FF
   439  050e  ff                    db          $FF
   440  050f  ff                    db          $FF
   441  0510  ff                    db          $FF
   442  0511  ff                    db          $FF
   443  0512  ff                    db          $FF
   444  0513  ff                    db          $FF
   445  0514  ff                    db          $FF
   446  0515  ff                    db          $FF
   447  0516  ff                    db          $FF
   448  0517  ff                    db          $FF
   449  0518  ff                    db          $FF
   450  0519  ff                    db          $FF
   451  051a  ff                    db          $FF
   452  051b  ff                    db          $FF
   453  051c  ff                    db          $FF
   454  051d  ff                    db          $FF
   455  051e  ff                    db          $FF
   456  051f  ff                    db          $FF
   457                          SPIDER:
   458  0520  0404                  db          $04,$04
   459  0522  00befd01              db          $00,$BE,$FD,$01
   460  0526  a099a0f7ee9801        db          $A0,$99,$A0,$F7,$EE,$98,$01
   461  052d  02b6b9fbf7e6e901      db          $02,$B6,$B9,$FB,$F7,$E6,$E9,$01
   462  0535  02f7e6eebdb9fb01      db          $02,$F7,$E6,$EE,$BD,$B9,$FB,$01
   463  053d  0212d6a0178ca0d6      db          $02,$12,$D6,$A0,$17,$8C,$A0,$D6,$12,$01
              1201              
   464  0547  02a099a0c76027d9      db          $02,$A0,$99,$A0,$C7,"`'",$D9,$98,$FF
              98ff              
   465                          SPIDER_S:
   466  0551  04040404              db          $04,$04,$04,$04
   467  0555  00d7c901              db          $00,$D7,$C9,$01
   468  0559  d79585c901            db          $D7,$95,$85,$C9,$01
   469  055e  4da0178ca04d01        db          "M",$A0,$17,$8C,$A0,"M",$01
   470  0565  58602758ff            db          "X`'X",$FF
   471                          MIMIC:
   472  056a  0402d796000096c9      db          $04,$02,$D7,$96,$00,$00,$96,$C9,$01
              01                
   473  0573  0212f01f1ff01201      db          $02,$12,$F0,$1F,$1F,$F0,$12,$01
   474  057b  02d611a0178ca00f      db          $02,$D6,$11,$A0,$17,$8C,$A0,$0F,$D6,$01
              d601              
   475  0585  02c7a0188d188da0      db          $02,$C7,$A0,$18,$8D,$18,$8D,$A0,$D9,$01
              d901              
   476  058f  a0819090a09101        db          $A0,$81,$90,$90,$A0,$91,$01
   477  0596  a0d7fcfcc9a0ff        db          $A0,$D7,$FC,$FC,$C9,$A0,$FF
   478                          MIMIC_S:
   479  059d  01e01f1fb001          db          $01,$E0,$1F,$1F,$B0,$01
   480  05a3  a099a080809801        db          $A0,$99,$A0,$80,$80,$98,$01
   481  05aa  a20000a1ff            db          $A2,$00,$00,$A1,$FF
   482                          MALOCCHIO:
   483  05af  04040404              db          $04,$04,$04,$04
   484  05b3  02a8b0b600b6b001      db          $02,$A8,$B0,$B6,$00,$B6,$B0,$01
   485  05bb  02b4e5beeeb8e101      db          $02,$B4,$E5,$BE,$EE,$B8,$E1,$01
   486  05c3  02e27ff6f87fb101      db          $02,$E2,$7F,$F6,$F8,$7F,$B1,$01
   487  05cb  02a5a014141414a0      db          $02,$A5,$A0,$14,$14,$14,$14,$A0,$EA,$01
              ea01              
   488  05d5  02e8ab7f7fa7b401      db          $02,$E8,$AB,$7F,$7F,$A7,$B4,$01
   489  05dd  02c7a40000a8d9ff      db          $02,$C7,$A4,$00,$00,$A8,$D9,$FF
   490                          MALOCCHIO_S:
   491  05e5  04040404              db          $04,$04,$04,$04
   492  05e9  00b6b8e001            db          $00,$B6,$B8,$E0,$01
   493  05ee  e3bee9f101            db          $E3,$BE,$E9,$F1,$01
   494  05f3  b9a08484a0e401        db          $B9,$A0,$84,$84,$A0,$E4,$01
   495  05fa  a2a6a1a5ff            db          $A2,$A6,$A1,$A5,$FF
   496                          MINOTAUR:
   497  05ff  04040404              db          $04,$04,$04,$04
   498  0603  e8a1e901              db          $E8,$A1,$E9,$01
   499  0607  ebefefa101            db          $EB,$EF,$EF,$A1,$01
   500  060c  0202e0b8b4fbb1e4      db          $02,$02,$E0,$B8,$B4,$FB,$B1,$E4,$F0,$01
              f001              
   501  0616  0202f6e6fef4e8ed      db          $02,$02,$F6,$E6,$FE,$F4,$E8,$ED,$FD,$ED,$01
              fded01            
   502  0621  0202e9b5bfe1eafb      db          $02,$02,$E9,$B5,$BF,$E1,$EA,$FB,$FE,$FB,$01
              fefb01            
   503  062c  0202a1e0fe7ffdb9      db          $02,$02,$A1,$E0,$FE,$7F,$FD,$B9,$AD,$A1,$01
              ada101            
   504  0637  02a27fb4feb70102      db          $02,$A2,$7F,$B4,$FE,$B7,$01,$02,$BE,$B6,$00,$A2,$BE,$B4,$FF
              beb600a2beb4ff    
   505                          MINOTAUR_S:
   506  0646  04040404              db          $04,$04,$04,$04
   507  064a  00edbe01              db          $00,$ED,$BE,$01
   508  064e  d7e6b9d201            db          $D7,$E6,$B9,$D2,$01
   509  0653  0a8eedc201            db          "\n",$8E,$ED,$C2,$01
   510  0658  001683ff              db          $00,$16,$83,$FF
   511                          SNAKE:
   512  065c  040404                db          $04,$04,$04
   513  065f  02b8bef7bdb001        db          $02,$B8,$BE,$F7,$BD,$B0,$01
   514  0666  021111e2e9ea01        db          $02,$11,$11,$E2,$E9,$EA,$01
   515  066d  02d7ade1b7b601        db          $02,$D7,$AD,$E1,$B7,$B6,$01
   516  0674  028d00b6fae0f001      db          $02,$8D,$00,$B6,$FA,$E0,$F0,$01
   517  067c  0202b8a6fbb2faf1      db          $02,$02,$B8,$A6,$FB,$B2,$FA,$F1,$A4,$E9,$01
              a4e901            
   518  0687  0202b5a2eab2b2b4      db          $02,$02,$B5,$A2,$EA,$B2,$B2,$B4,$E0,$E6,$01
              e0e601            
   519  0692  0202a2aca3e6f2ae      db          $02,$02,$A2,$AC,$A3,$E6,$F2,$AE,$E1,$BB,$FF
              e1bbff            
   520                          SNAKE_S:
   521  069d  040404                db          $04,$04,$04
   522  06a0  00fef901              db          $00,$FE,$F9,$01
   523  06a4  0022a085a09701        db          $00,"\"",$A0,$85,$A0,$97,$01
   524  06ab  b8b6f6e401            db          $B8,$B6,$F6,$E4,$01
   525  06b0  e5e7f9e6ff            db          $E5,$E7,$F9,$E6,$FF
   526                          SKELETON:
   527  06b5  04040404              db          $04,$04,$04,$04
   528  06b9  028a00eeed01          db          $02,$8A,$00,$EE,$ED,$01
   529  06bf  02d600a017a0a701      db          $02,$D6,$00,$A0,$17,$A0,$A7,$01
   530  06c7  02d6e0acb9e401        db          $02,$D6,$E0,$AC,$B9,$E4,$01
   531  06ce  0223a6e2e6a2b401      db          $02,"#",$A6,$E2,$E6,$A2,$B4,$01
   532  06d6  02d600f8edb02301      db          $02,$D6,$00,$F8,$ED,$B0,"#",$01
   533  06de  02d6e8a100e501        db          $02,$D6,$E8,$A1,$00,$E5,$01
   534  06e5  02d6a2e400ba01        db          $02,$D6,$A2,$E4,$00,$BA,$01
   535  06ec  02d600a6a8f1ff        db          $02,$D6,$00,$A6,$A8,$F1,$FF
   536                          SKELETON_S:
   537  06f3  040404                db          $04,$04,$04
   538  06f6  08e2a501              db          "\b",$E2,$A5,$01
   539  06fa  cdb8b7b401            db          $CD,$B8,$B7,$B4,$01
   540  06ff  d6b8a9b001            db          $D6,$B8,$A9,$B0,$01
   541  0704  d6a2e8b1ff            db          $D6,$A2,$E8,$B1,$FF
   542                          MUMMY:
   543  0709  04040404              db          $04,$04,$04,$04
   544  070d  d7fcc901              db          $D7,$FC,$C9,$01
   545  0711  0202d7c995a093a0      db          $02,$02,$D7,$C9,$95,$A0,$93,$A0,$B4,$00,$D7,$C9,$01
              b400d7c901        
   546  071e  0202a097a084a094      db          $02,$02,$A0,$97,$A0,$84,$A0,$94,$84,$94,$A0,$84,$A0,$D9,$A0,$97,$01
              8494a084a0d9a097  
              01                
   547  072f  0202a0b5f8c98494      db          $02,$02,$A0,$B5,$F8,$C9,$84,$94,$D2,$D6,$A0,$01
              d2d6a001          
   548  073b  0202a0c3a00095a0      db          $02,$02,$A0,$C3,$A0,$00,$95,$A0,$84,$94,$7F,$12,$A0,$01
              84947f12a001      
   549  0749  0202a091bf94e094      db          $02,$02,$A0,$91,$BF,$94,$E0,$94,$AA,$91,$A0,$01
              aa91a001          
   550  0755  0295a095a00011a0      db          $02,$95,$A0,$95,$A0,$00,$11,$A0,$95,$A0,$01
              95a001            
   551  0760  02a0d9a0850027a0      db          $02,$A0,$D9,$A0,$85,$00,"'",$A0,$85,$A0,$C9,$FF
              85a0c9ff          
   552                          MUMMY_S:
   553  076c  040404                db          $04,$04,$04
   554  076f  1ceab11a01            db          $1C,$EA,$B1,$1A,$01
   555  0774  11efbf0f01            db          $11,$EF,$BF,$0F,$01
   556  0779  d6a0d9c7a06001        db          $D6,$A0,$D9,$C7,$A0,"`",$01
   557  0780  e0b5eab0ff            db          $E0,$B5,$EA,$B0,$FF
   558                          NECROMANCER:
   559  0785  04040404              db          $04,$04,$04,$04
   560  0789  02d7d0a0110fa0d0      db          $02,$D7,$D0,$A0,$11,$0F,$A0,$D0,$C9,$01
              c901              
   561  0793  0202d78dd1a4a4d1      db          $02,$02,$D7,$8D,$D1,$A4,$A4,$D1,$18,$C9,$01
              18c901            
   562  079e  0202d6e9a0d9a09c      db          $02,$02,$D6,$E9,$A0,$D9,$A0,$9C,$D7,$A0,$C7,$A0,$B6,$D6,$01
              d7a0c7a0b6d601    
   563  07ad  020212faefa0c2a0      db          $02,$02,$12,$FA,$EF,$A0,$C2,$A0,$7F,$BF,$F5,$12,$01
              7fbff51201        
   564  07ba  0202c7a7e2afedb1      db          $02,$02,$C7,$A7,$E2,$AF,$ED,$B1,$AB,$D9,$01
              abd901            
   565  07c5  7fa0d6a07ffd01        db          $7F,$A0,$D6,$A0,$7F,$FD,$01
   566  07cc  02a09920192020a0      db          $02,$A0,$99," ",$19,"  ",$A0,$98,$01,$02,$C7,$A0,$88," ",$90,$F0,$A0,$D9,$FF
              980102c7a0882090  
              f0a0d9ff          
   567                          NECROMANCER_S:
   568  07e0  040404                db          $04,$04,$04
   569  07e3  0be2db0c01            db          "\v",$E2,$DB,"\f",$01
   570  07e8  9fa0c9d7a09f01        db          $9F,$A0,$C9,$D7,$A0,$9F,$01
   571  07ef  00129901              db          $00,$12,$99,$01
   572  07f3  00fd91ff              db          $00,$FD,$91,$FF
   573  07f7  ff                    db          $FF
   574  07f8  ff                    db          $FF
   575  07f9  ff                    db          $FF
   576  07fa  ff                    db          $FF
   577  07fb  ff                    db          $FF
   578  07fc  ff                    db          $FF
   579  07fd  ff                    db          $FF
   580  07fe  ff                    db          $FF
   581  07ff  ff                    db          $FF
   582  0800  ff                    db          $FF
   583  0801  ff                    db          $FF
   584  0802  ff                    db          $FF
   585  0803  ff                    db          $FF
   586  0804  ff                    db          $FF
   587  0805  ff                    db          $FF
   588  0806  ff                    db          $FF
   589  0807  ff                    db          $FF
   590  0808  ff                    db          $FF
   591  0809  ff                    db          $FF
   592  080a  ff                    db          $FF
   593  080b  ff                    db          $FF
   594  080c  ff                    db          $FF
   595  080d  ff                    db          $FF
   596  080e  ff                    db          $FF
   597  080f  ff                    db          $FF
   598  0810  ff                    db          $FF
   599  0811  ff                    db          $FF
   600  0812  ff                    db          $FF
   601  0813  ff                    db          $FF
   602  0814  ff                    db          $FF
   603  0815  ff                    db          $FF
   604  0816  ff                    db          $FF
   605  0817  ff                    db          $FF
   606  0818  ff                    db          $FF
   607  0819  ff                    db          $FF
   608  081a  ff                    db          $FF
   609  081b  ff                    db          $FF
   610  081c  ff                    db          $FF
   611  081d  ff                    db          $FF
   612  081e  ff                    db          $FF
   613  081f  ff                    db          $FF
   614  0820  ff                    db          $FF
   615  0821  ff                    db          $FF
   616  0822  ff                    db          $FF
   617  0823  ff                    db          $FF
   618  0824  ff                    db          $FF
   619  0825  ff                    db          $FF
   620  0826  ff                    db          $FF
   621  0827  ff                    db          $FF
   622  0828  ff                    db          $FF
   623  0829  ff                    db          $FF
   624  082a  ff                    db          $FF
   625  082b  ff                    db          $FF
   626  082c  ff                    db          $FF
   627  082d  ff                    db          $FF
   628  082e  ff                    db          $FF
   629  082f  ff                    db          $FF
   630  0830  ff                    db          $FF
   631  0831  ff                    db          $FF
   632  0832  ff                    db          $FF
   633  0833  ff                    db          $FF
   634  0834  ff                    db          $FF
   635  0835  ff                    db          $FF
   636  0836  ff                    db          $FF
   637  0837  ff                    db          $FF
   638  0838  ff                    db          $FF
   639  0839  ff                    db          $FF
   640  083a  ff                    db          $FF
   641  083b  ff                    db          $FF
   642  083c  ff                    db          $FF
   643  083d  ff                    db          $FF
   644  083e  ff                    db          $FF
   645  083f  ff                    db          $FF
   646  0840  ff                    db          $FF
   647  0841  ff                    db          $FF
   648  0842  ff                    db          $FF
   649  0843  ff                    db          $FF
   650  0844  ff                    db          $FF
   651  0845  ff                    db          $FF
   652  0846  ff                    db          $FF
   653  0847  ff                    db          $FF
   654  0848  ff                    db          $FF
   655  0849  ff                    db          $FF
   656  084a  ff                    db          $FF
   657  084b  ff                    db          $FF
   658  084c  ff                    db          $FF
   659  084d  ff                    db          $FF
   660  084e  ff                    db          $FF
   661  084f  ff                    db          $FF
   662  0850  ff                    db          $FF
   663  0851  ff                    db          $FF
   664  0852  ff                    db          $FF
   665  0853  ff                    db          $FF
   666  0854  ff                    db          $FF
   667  0855  ff                    db          $FF
   668  0856  ff                    db          $FF
   669  0857  ff                    db          $FF
   670  0858  ff                    db          $FF
   671  0859  ff                    db          $FF
   672  085a  ff                    db          $FF
   673  085b  ff                    db          $FF
   674  085c  ff                    db          $FF
   675  085d  ff                    db          $FF
   676  085e  ff                    db          $FF
   677  085f  ff                    db          $FF
   678  0860  ff                    db          $FF
   679  0861  ff                    db          $FF
   680  0862  ff                    db          $FF
   681  0863  ff                    db          $FF
   682  0864  ff                    db          $FF
   683  0865  ff                    db          $FF
   684  0866  ff                    db          $FF
   685  0867  ff                    db          $FF
   686  0868  ff                    db          $FF
   687                          SUB_ram_c869:
   688  0869  112900                LD          DE,$29                                 ;GRN on DKCYN
   689                                                                                  ;(bottom of closed door)
   690                          SUB_ram_c86c:
   691  086c  77                    LD          (HL),A
   692  086d  37                    SCF
   693  086e  3f                    CCF
   694  086f  ed52                  SBC         HL,DE
   695                          SUB_ram_c871:
   696  0871  77                    LD          (HL),A
   697  0872  37                    SCF
   698  0873  3f                    CCF
   699  0874  ed52                  SBC         HL,DE
   700  0876  77                    LD          (HL),A
   701  0877  ed52                  SBC         HL,DE
   702  0879  77                    LD          (HL),A
   703  087a  c9                    RET
   704  087b  112900                LD          DE,$29                                 ;GRN on DKCYN
   705                                                                                  ;(bottom of closed door)
   706                          SUB_ram_c87e:
   707  087e  77                    LD          (HL),A
   708  087f  19                    ADD         HL,DE
   709                          LAB_ram_c880:
   710  0880  77                    LD          (HL),A
   711  0881  19                    ADD         HL,DE
   712  0882  77                    LD          (HL),A
   713  0883  19                    ADD         HL,DE
   714  0884  77                    LD          (HL),A
   715  0885  c9                    RET
   716                          SUB_ram_c886:
   717  0886  77                    LD          (HL),A
   718  0887  19                    ADD         HL,DE
   719  0888  77                    LD          (HL),A
   720  0889  23                    INC         HL
   721  088a  77                    LD          (HL),A
   722  088b  19                    ADD         HL,DE
   723  088c  23                    INC         HL
   724  088d  77                    LD          (HL),A
   725  088e  2b                    DEC         HL
   726  088f  77                    LD          (HL),A
   727  0890  2b                    DEC         HL
   728  0891  77                    LD          (HL),A
   729  0892  c9                    RET
   730                          SUB_ram_c893:
   731  0893  77                    LD          (HL),A
   732  0894  19                    ADD         HL,DE
   733  0895  77                    LD          (HL),A
   734  0896  2b                    DEC         HL
   735  0897  77                    LD          (HL),A
   736  0898  19                    ADD         HL,DE
   737  0899  23                    INC         HL
   738  089a  77                    LD          (HL),A
   739  089b  2b                    DEC         HL
   740  089c  77                    LD          (HL),A
   741  089d  2b                    DEC         HL
   742  089e  77                    LD          (HL),A
   743  089f  c9                    RET
   744                          SUB_ram_c8a0:
   745  08a0  77                    LD          (HL),A
   746  08a1  23                    INC         HL
   747  08a2  77                    LD          (HL),A
   748  08a3  23                    INC         HL
   749  08a4  77                    LD          (HL),A
   750  08a5  19                    ADD         HL,DE
   751  08a6  2b                    DEC         HL
   752  08a7  77                    LD          (HL),A
   753  08a8  2b                    DEC         HL
   754  08a9  77                    LD          (HL),A
   755  08aa  19                    ADD         HL,DE
   756  08ab  77                    LD          (HL),A
   757  08ac  c9                    RET
   758                          SUB_ram_c8ad:
   759  08ad  77                    LD          (HL),A
   760  08ae  23                    INC         HL
   761  08af  77                    LD          (HL),A
   762  08b0  23                    INC         HL
   763  08b1  77                    LD          (HL),A
   764  08b2  19                    ADD         HL,DE
   765  08b3  2b                    DEC         HL
   766  08b4  77                    LD          (HL),A
   767  08b5  23                    INC         HL
   768  08b6  77                    LD          (HL),A
   769  08b7  19                    ADD         HL,DE
   770  08b8  77                    LD          (HL),A
   771  08b9  c9                    RET
   772                          DRAW_ROW:
   773  08ba  77                    LD          (HL),A
   774  08bb  05                    DEC         B
   775  08bc  c8                    RET         Z
   776  08bd  23                    INC         HL
   777  08be  c3ba08                JP          DRAW_ROW
   778  08c1  112800                LD          DE,$28                                 ;DE = 40 (next line) / $28
   779                          DRAW_CELL:
   780  08c4  77                    LD          (HL),A
   781  08c5  0d                    DEC         C
   782  08c6  c8                    RET         Z
   783  08c7  19                    ADD         HL,DE                                   ;Goto next row
   784  08c8  c3c408                JP          DRAW_CELL
   785                          FILL_CHRCOL_RECT:
   786  08cb  112800                LD          DE,$28                                 ;DE = 40 / $28 (next row)
   787                          DRAW_CHRCOLS:
   788  08ce  e5                    PUSH        HL
   789  08cf  c5                    PUSH        BC
   790  08d0  cdba08                CALL        DRAW_ROW
   791  08d3  c1                    POP         BC
   792  08d4  e1                    POP         HL
   793  08d5  0d                    DEC         C
   794  08d6  c8                    RET         Z
   795  08d7  19                    ADD         HL,DE
   796  08d8  c3ce08                JP          DRAW_CHRCOLS
   797  08db  00                    db          $00
   798  08dc  00                    db          $00
   799  08dd  00                    db          $00
   800  08de  00                    db          $00
   801  08df  00                    db          $00
   802  08e0  00                    db          $00
   803  08e1  00                    db          $00
   804  08e2  00                    db          $00
   805  08e3  00                    db          $00
   806  08e4  00                    db          $00
   807  08e5  00                    db          $00
   808  08e6  00                    db          $00
   809  08e7  00                    db          $00
   810  08e8  00                    db          $00
   811  08e9  00                    db          $00
   812  08ea  00                    db          $00
   813  08eb  00                    db          $00
   814  08ec  00                    db          $00
   815  08ed  00                    db          $00
   816  08ee  00                    db          $00
   817  08ef  00                    db          $00
   818  08f0  00                    db          $00
   819  08f1  00                    db          $00
   820  08f2  00                    db          $00
   821  08f3  00                    db          $00
   822  08f4  00                    db          $00
   823  08f5  00                    db          $00
   824  08f6  00                    db          $00
   825  08f7  00                    db          $00
   826                          DRAW_F0_WALL:
   827  08f8  21cc34                LD          HL,COLRAM_F0_WALL_MAP_IDX               ;= $60    `
   828  08fb  011010                LD          BC,$1010                               ;16 x 16 rectangle
   829  08fe  3e44                  LD          A,$44                                  ;BLU on BLU
   830  0900  c3cb08                JP          FILL_CHRCOL_RECT
   831                          DRAW_F0_WALL_AND_CLOSED_DOOR:
   832  0903  cdf808                CALL        DRAW_F0_WALL
   833  0906  3e22                  LD          A,$22                                  ;GRN on GRN
   834                          DRAW_DOOR_F0:
   835  0908  217035                LD          HL,COLRAM_F0_DOOR_IDX                   ;= $60
   836  090b  010c08                LD          BC,$80c                                ;8 x 12 rectangle
   837  090e  c3cb08                JP          FILL_CHRCOL_RECT
   838                          DRAW_WALL_F0_AND_OPEN_DOOR:
   839  0911  cdf808                CALL        DRAW_F0_WALL
   840  0914  3ef0                  LD          A,$f0                                  ;DKGRY on BLK
   841                                                                                  ;WAS BLK on DKBLU
   842                                                                                  ;WAS LD A,0xb
   843  0916  18f0                  JR          DRAW_DOOR_F0
   844                          DRAW_WALL_F1:
   845  0918  217031                LD          HL,CHRRAM_F1_WALL_IDX                   ;= $20
   846  091b  010808                LD          BC,$808                                ;8 x 8 rectangle
   847  091e  3e20                  LD          A,$20                                  ;Change to SPACE 32 / $20
   848                                                                                  ;WAS d134 / $86 crosshatch char
   849                                                                                  ;WAS LD A, $86
   850  0920  cdcb08                CALL        FILL_CHRCOL_RECT
   851  0923  0e08                  LD          C,0x8
   852  0925  217035                LD          HL,COLRAM_F0_DOOR_IDX                   ;= $60
   853  0928  3e4b                  LD          A,$4b                                  ;BLU on DKBLU
   854  092a  c3ce08                JP          DRAW_CHRCOLS
   855                          DRAW_WALL_F1_AND_CLOSED_DOOR:
   856  092d  cd1809                CALL        DRAW_WALL_F1
   857  0930  3e2d                  LD          A,$2d                                  ;GRN on DKGRN
   858                          DRAW_DOOR_F1_OPEN:
   859  0932  21c235                LD          HL,COLRAM_F1_DOOR_IDX                   ;= $60    `
   860  0935  010604                LD          BC,$406                                ;4 x 6 rectangle
   861  0938  c3cb08                JP          FILL_CHRCOL_RECT
   862                          DRAW_WALL_F1_AND_OPEN_DOOR:
   863  093b  cd1809                CALL        DRAW_WALL_F1
   864  093e  3e00                  LD          A,0x0                                   ;BLK on BLK
   865  0940  18f0                  JR          DRAW_DOOR_F1_OPEN
   866                          DRAW_WALL_F2:
   867  0942  010404                LD          BC,$404                                ;4 x 4 rectangle
   868  0945  21c235                LD          HL,COLRAM_F1_DOOR_IDX                   ;= $60    `
   869  0948  3eff                  LD          A,$ff                                  ;DKGRY on DKGRY
   870                                                                                  ;WAS BLK on DKBLU
   871                                                                                  ;WAS LD A,0xb
   872  094a  c3cb08                JP          FILL_CHRCOL_RECT
   873                          DRAW_DOOR_F2_OPEN:
   874  094d  21c235                LD          HL,COLRAM_F1_DOOR_IDX                   ;= $60    `
   875  0950  3e00                  LD          A,0x0                                   ;BLK on BLK
   876                          UPDATE_FO_ITEM:
   877  0952  010404                LD          BC,$404                                ;4 x 4 rectangle
   878  0955  c3cb08                JP          FILL_CHRCOL_RECT
   879                          DRAW_WALL_FL0:
   880  0958  21a334                LD          HL,COLRAM_FL00_WALL_IDX                 ;= $60    `
   881  095b  3e40                  LD          A,$40                                  ;BLU on BLK
   882                                                                                  ;WAS BLU on CYN
   883                                                                                  ;WAS LD A,$46
   884  095d  cd6908                CALL        SUB_ram_c869
   885  0960  1b                    DEC         DE
   886  0961  19                    ADD         HL,DE
   887  0962  3e04                  LD          A,0x4                                   ;BLK on BLU
   888  0964  cd8608                CALL        SUB_ram_c886
   889  0967  19                    ADD         HL,DE
   890  0968  011004                LD          BC,$410                                ;Jump into COLRAM and down one row
   891  096b  cdce08                CALL        DRAW_CHRCOLS
   892  096e  19                    ADD         HL,DE
   893  096f  cda008                CALL        SUB_ram_c8a0
   894  0972  19                    ADD         HL,DE
   895  0973  3ef4                  LD          A,$f4                                  ;DKGRY on BLU
   896                                                                                  ;WAS DKCYN on BLU
   897                                                                                  ;WAS LD A,$94
   898  0975  1b                    DEC         DE
   899  0976  cd6c08                CALL        SUB_ram_c86c
   900  0979  3ec0                  LD          A,$c0
   901  097b  21c033                LD          HL,DAT_ram_33c0                         ;= $20
   902  097e  cd6c08                CALL        SUB_ram_c86c
   903  0981  212830                LD          HL,IDX_VIEWPORT_CHRRAM                  ;= $20
   904  0984  3ec1                  LD          A,$c1
   905  0986  13                    INC         DE
   906  0987  13                    INC         DE
   907  0988  c37e08                JP          SUB_ram_c87e
   908  098b  c9                    RET
   909                          DRAW_DOOR_FLO:
   910  098c  cd5809                CALL        DRAW_WALL_FL0
   911  098f  3ef0                  LD          A,$f0                                  ;DKGRY on BLK
   912                                                                                  ;WAS DKCYN on DKBLU
   913                                                                                  ;WAS LD A,$9b
   914  0991  08                    EX          AF,AF'
   915  0992  3e04                  LD          A,0x4                                   ;BLK on BLU
   916                                                                                  ;WAS DKBLU on BLU
   917                                                                                  ;LD A,$b4
   918  0994  1808                  JR          LAB_ram_c99e
   919                          SUB_ram_c996:
   920  0996  cd5809                CALL        DRAW_WALL_FL0
   921  0999  3ef2                  LD          A,$f2                                  ;DKGRY on GRN
   922                                                                                  ;WAS DKCYN on GRN
   923                                                                                  ;WAS LD A,$92
   924  099b  08                    EX          AF,AF'
   925  099c  3e24                  LD          A,$24                                  ;GRN on BLU
   926                          LAB_ram_c99e:
   927  099e  211a35                LD          HL,DAT_ram_351a                         ;= $60    `
   928  09a1  cd7108                CALL        SUB_ram_c871
   929  09a4  1b                    DEC         DE
   930  09a5  19                    ADD         HL,DE
   931  09a6  08                    EX          AF,AF'
   932  09a7  cd8608                CALL        SUB_ram_c886
   933  09aa  19                    ADD         HL,DE
   934  09ab  010c03                LD          BC,$30c
   935  09ae  cdce08                CALL        DRAW_CHRCOLS
   936  09b1  19                    ADD         HL,DE
   937  09b2  cda008                CALL        SUB_ram_c8a0
   938  09b5  19                    ADD         HL,DE
   939  09b6  1b                    DEC         DE
   940  09b7  cd7108                CALL        SUB_ram_c871
   941  09ba  21c830                LD          HL,DAT_ram_30c8                         ;= $20
   942  09bd  3ec1                  LD          A,$c1
   943  09bf  13                    INC         DE
   944  09c0  13                    INC         DE
   945  09c1  c38008                JP          LAB_ram_c880
   946  09c4  c9                    RET
   947                          SUB_ram_c9c5:
   948  09c5  21c834                LD          HL,DAT_ram_34c8                         ;= $60    `
   949  09c8  3e04                  LD          A,0x4                                   ;BLK on BLU
   950  09ca  011004                LD          BC,$410                                ;4 x 10 rectangle
   951  09cd  c3cb08                JP          FILL_CHRCOL_RECT
   952                          SUB_ram_c9d0:
   953  09d0  216831                LD          HL,DAT_ram_3168                         ;= $20
   954  09d3  010804                LD          BC,$408                                ;4 x 8 rectangle
   955  09d6  3e20                  LD          A,$20                                  ;Change to SPACE 32 / $20
   956                                                                                  ;WAS d134 / $86 crosshatch char
   957                                                                                  ;WAS LD A, $86
   958  09d8  cdcb08                CALL        FILL_CHRCOL_RECT
   959  09db  216835                LD          HL,DAT_ram_3568                         ;= $60
   960  09de  0e08                  LD          C,0x8
   961  09e0  3e4b                  LD          A,$4b                                  ;BLU on DKBLU
   962  09e2  c3ce08                JP          DRAW_CHRCOLS
   963                          SUB_ram_c9e5:
   964  09e5  cdd009                CALL        SUB_ram_c9d0
   965  09e8  3edd                  LD          A,$dd                                  ;DKGRN on DKGRN
   966                          LAB_ram_c9ea:
   967  09ea  21ba35                LD          HL,DAT_ram_35ba                         ;= $60    `
   968  09ed  010602                LD          BC,$206                                ;2 x 6 rectangle
   969  09f0  c3ce08                JP          DRAW_CHRCOLS
   970                          SUB_ram_c9f3:
   971  09f3  cdd009                CALL        SUB_ram_c9d0
   972  09f6  af                    XOR         A
   973  09f7  18f1                  JR          LAB_ram_c9ea
   974                          SUB_ram_c9f9:
   975  09f9  216831                LD          HL,DAT_ram_3168                         ;= $20
   976  09fc  3ec1                  LD          A,$c1
   977  09fe  77                    LD          (HL),A                    ;= $20
   978  09ff  112800                LD          DE,$28
   979  0a02  19                    ADD         HL,DE
   980  0a03  23                    INC         HL
   981  0a04  77                    LD          (HL),A                    ;= $20
   982  0a05  215932                LD          HL,DAT_ram_3259                         ;= $20
   983  0a08  3ec0                  LD          A,$c0
   984  0a0a  77                    LD          (HL),A                    ;= $20
   985  0a0b  19                    ADD         HL,DE
   986  0a0c  2b                    DEC         HL
   987  0a0d  77                    LD          (HL),A                    ;= $20
   988  0a0e  216835                LD          HL,DAT_ram_3568                         ;= $60
   989  0a11  3ebf                  LD          A,$bf                                  ;DKBLU on DKGRY
   990                                                                                  ;WAS DKBLU on DKCYN
   991                                                                                  ;WAS LD A,$b9
   992  0a13  77                    LD          (HL),A                    ;= $60
   993  0a14  19                    ADD         HL,DE
   994  0a15  23                    INC         HL
   995  0a16  77                    LD          (HL),A                    ;= $60
   996  0a17  2b                    DEC         HL
   997  0a18  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
   998                                                                                  ;WAS BLK on DKBLU
   999                                                                                  ;WAS LD A,0xb
  1000  0a1a  77                    LD          (HL),A                    ;= $60
  1001  0a1b  010402                LD          BC,$204                                ;2 x 4 rectangle
  1002  0a1e  19                    ADD         HL,DE             ;= $60    `
  1003  0a1f  cdce08                CALL        DRAW_CHRCOLS
  1004  0a22  19                    ADD         HL,DE
  1005  0a23  77                    LD          (HL),A                    ;= $60
  1006  0a24  23                    INC         HL
  1007  0a25  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
  1008                                                                                  ;WAS DKCYN on DKBLU
  1009                                                                                  ;WAS LD A,$9b
  1010  0a27  77                    LD          (HL),A                    ;= $60
  1011  0a28  19                    ADD         HL,DE
  1012  0a29  2b                    DEC         HL
  1013  0a2a  77                    LD          (HL),A                    ;= $60
  1014  0a2b  21ba35                LD          HL,DAT_ram_35ba                         ;= $60    `
  1015  0a2e  0e04                  LD          C,0x4
  1016  0a30  3e00                  LD          A,0x0
  1017  0a32  c3ce08                JP          DRAW_CHRCOLS
  1018                          DRAW_WALL_FL22:
  1019  0a35  21b835                LD          HL,COLRAM_FL22_WALL_IDX                 ;= $60    `
  1020  0a38  010404                LD          BC,$404                                ;4 x 4 rectangle
  1021  0a3b  3eff                  LD          A,$ff                                  ;DKGRY on DKGRY
  1022  0a3d  c3cb08                JP          FILL_CHRCOL_RECT
  1023                          DRAW_L1_WALL:
  1024  0a40  214731                LD          HL,CHRRAM_FL1_WALL_IDX                  ;= $20
  1025  0a43  3ec1                  LD          A,$c1                                  ;LEFT angle CHR
  1026  0a45  cd6908                CALL        SUB_ram_c869
  1027  0a48  1b                    DEC         DE
  1028  0a49  19                    ADD         HL,DE
  1029  0a4a  3e20                  LD          A,$20                                  ;Change to SPACE 32 / $20
  1030                                                                                  ;WAS d134 / $86 crosshatch char
  1031                                                                                  ;WAS LD A, $86
  1032  0a4c  cd8608                CALL        SUB_ram_c886
  1033  0a4f  19                    ADD         HL,DE
  1034  0a50  010804                LD          BC,$408                                ;4 x 8 rectangle
  1035  0a53  cdce08                CALL        DRAW_CHRCOLS
  1036  0a56  19                    ADD         HL,DE
  1037  0a57  cda008                CALL        SUB_ram_c8a0
  1038  0a5a  19                    ADD         HL,DE
  1039  0a5b  3ec0                  LD          A,$c0                                  ;RIGHT angle CHR
  1040  0a5d  1b                    DEC         DE
  1041  0a5e  cd6c08                CALL        SUB_ram_c86c
  1042  0a61  214735                LD          HL,DAT_ram_3547                         ;= $60    `
  1043  0a64  3eb0                  LD          A,$b0                                  ;DKBLU on BLK
  1044                                                                                  ;WAS DKBLU on CYN
  1045                                                                                  ;WAS LD A,$b6
  1046  0a66  cd6908                CALL        SUB_ram_c869
  1047  0a69  1b                    DEC         DE
  1048  0a6a  19                    ADD         HL,DE
  1049  0a6b  3e4b                  LD          A,$4b                                  ;BLU on DKBLU
  1050  0a6d  cd8608                CALL        SUB_ram_c886
  1051  0a70  19                    ADD         HL,DE
  1052  0a71  010804                LD          BC,$408                                ;Jump to COLRAM + 32 cells
  1053  0a74  cdce08                CALL        DRAW_CHRCOLS
  1054  0a77  19                    ADD         HL,DE
  1055  0a78  cda008                CALL        SUB_ram_c8a0
  1056  0a7b  19                    ADD         HL,DE
  1057  0a7c  3efb                  LD          A,$fb                                  ;DKGRY on DKBLU
  1058                                                                                  ;WAS DKCYN on DKBLU
  1059                                                                                  ;WAS LD A,$9b
  1060  0a7e  1b                    DEC         DE
  1061  0a7f  c36c08                JP          SUB_ram_c86c
  1062  0a82  c9                    RET
  1063                          DRAW_FL1_DOOR:
  1064  0a83  cd400a                CALL        DRAW_L1_WALL
  1065  0a86  3ef0                  LD          A,$f0                                  ;DKGRY on BLK
  1066                                                                                  ;WAS DKCYN on BLK
  1067                                                                                  ;WAS LD A,$90
  1068  0a88  f5                    PUSH        AF
  1069  0a89  3eb0                  LD          A,$b0                                  ;DKBLU on BLK
  1070  0a8b  f5                    PUSH        AF
  1071  0a8c  3e0b                  LD          A,0xb                                   ;BLK on DKGRY
  1072                                                                                  ;WAS BLK on DKBLU
  1073                                                                                  ;WAS LD A,0xb
  1074  0a8e  180b                  JR          DRAW_L1_DOOR
  1075                          DRAW_L1:
  1076  0a90  cd400a                CALL        DRAW_L1_WALL
  1077  0a93  3efd                  LD          A,$fd                                  ;DKGRY on DKGRN
  1078                                                                                  ;WAS DKCYN on DKGRN
  1079                                                                                  ;WAS LD A,$9d
  1080  0a95  f5                    PUSH        AF
  1081  0a96  3e2d                  LD          A,$2d                                  ;GRN on DKGRN
  1082  0a98  f5                    PUSH        AF
  1083  0a99  3edb                  LD          A,$db                                  ;DKGRN on DKBLU
  1084                          DRAW_L1_DOOR:
  1085  0a9b  216d35                LD          HL,COLRAM_L1_DOOR_IDX                   ;= $60    `
  1086  0a9e  010702                LD          BC,$207                                ;2 x 7 rectangle
  1087  0aa1  cd1c0b                CALL        SUB_ram_cb1c
  1088  0aa4  216d31                LD          HL,CHRRAM_L1_DOOR_IDX                   ;= $20
  1089  0aa7  3ec1                  LD          A,$c1                                  ;LEFT ANGLE CHR
  1090  0aa9  77                    LD          (HL),A              ;= $20
  1091  0aaa  112900                LD          DE,$29
  1092  0aad  19                    ADD         HL,DE
  1093  0aae  77                    LD          (HL),A                    ;= $20
  1094  0aaf  c9                    RET
  1095                          SUB_ram_cab0:
  1096  0ab0  216c35                LD          HL,DAT_ram_356c                         ;= $60    `
  1097  0ab3  010804                LD          BC,$408                                ;4 x 8 rectangle
  1098  0ab6  3e4b                  LD          A,$4b                                  ;BLU on DKBLU
  1099  0ab8  cdcb08                CALL        FILL_CHRCOL_RECT
  1100  0abb  216c31                LD          HL,DAT_ram_316c                         ;= $20
  1101  0abe  0e08                  LD          C,0x8
  1102  0ac0  3e20                  LD          A,$20                                  ;Change to SPACE 32 / $20
  1103                                                                                  ;WAS d134 / $86 crosshatch char
  1104                                                                                  ;WAS LD A, $86
  1105  0ac2  c3ce08                JP          DRAW_CHRCOLS
  1106                          SUB_ram_cac5:
  1107  0ac5  cdb00a                CALL        SUB_ram_cab0
  1108  0ac8  af                    XOR         A
  1109  0ac9  1805                  JR          DRAW_L1_DOOR_2
  1110                          DRAW_L1_DOOR_CLOSED:
  1111  0acb  cdb00a                CALL        SUB_ram_cab0
  1112  0ace  3edd                  LD          A,$dd                                  ;DKGRN on DKGRN
  1113                          DRAW_L1_DOOR_2:
  1114  0ad0  21bc35                LD          HL,COLRAM_FL2_WALL_IDX                  ;= $60    `
  1115  0ad3  010602                LD          BC,$206                                ;2 x 6 rectangle
  1116  0ad6  c3ce08                JP          DRAW_CHRCOLS
  1117                          DRAW_WALL_FL2:
  1118  0ad9  21bc35                LD          HL,COLRAM_FL2_WALL_IDX                  ;= $60    `
  1119  0adc  010402                LD          BC,$204                                ;2 x 4 rectangle
  1120  0adf  3e11                  LD          A,$11                                  ;BLK on DKGRY
  1121  0ae1  cdcb08                CALL        FILL_CHRCOL_RECT
  1122  0ae4  0e04                  LD          C,0x4
  1123  0ae6  21be35                LD          HL,COLRAM_FL2_PLUS_WALL_IDX             ;= $60    `
  1124  0ae9  3e22                  LD          A,$22                                  ;BLK on DKGRY
  1125                                                                                  ;WAS BLK on DKBLU
  1126                                                                                  ;WAS LD A,0xb
  1127  0aeb  c3ce08                JP          DRAW_CHRCOLS
  1128                          DRAW_WALL_FL2_EMPTY:
  1129  0aee  21bc35                LD          HL,COLRAM_FL2_WALL_IDX                  ;= $60    `
  1130  0af1  010404                LD          BC,$404                                ;4 x 4 rectangle
  1131  0af4  3e00                  LD          A,0x0                                   ;BLK on BLK
  1132  0af6  c3cb08                JP          FILL_CHRCOL_RECT
  1133                          DRAW_WALL_L2:
  1134  0af9  3eca                  LD          A,$ca                                  ;Right slash char
  1135  0afb  f5                    PUSH        AF
  1136  0afc  3e20                  LD          A,$20                                  ;GRN on BLK
  1137  0afe  f5                    PUSH        AF
  1138  0aff  217031                LD          HL,CHRRAM_F1_WALL_IDX                   ;= $20
  1139  0b02  3ec1                  LD          A,$c1                                  ;Left angle char
  1140  0b04  010402                LD          BC,$204                                ;2 x 4 rectangle
  1141  0b07  cd1c0b                CALL        SUB_ram_cb1c
  1142  0b0a  3e0f                  LD          A,0xf                                   ;FL2 Bottom Color
  1143                                                                                  ;BLK on DKGRY
  1144                                                                                  ;WAS DKCYN on DKBLU
  1145                                                                                  ;WAS LD A,$9b
  1146  0b0c  f5                    PUSH        AF
  1147  0b0d  3e0f                  LD          A,0xf                                   ;FL2 Wall Color
  1148                                                                                  ;BLK on DKGRY
  1149                                                                                  ;WAS BLK on DKBLU
  1150                                                                                  ;WAS LD A,0xb
  1151  0b0f  f5                    PUSH        AF
  1152  0b10  217035                LD          HL,COLRAM_F0_DOOR_IDX                   ;= $60
  1153  0b13  3ef0                  LD          A,$f0                                  ;FL2 Top Color
  1154                                                                                  ;DKGRY on BLK
  1155                                                                                  ;WAS DKBLU on CYN
  1156                                                                                  ;WAS LD A,$b6
  1157  0b15  010402                LD          BC,$204                                ;2 x 4 rectangle
  1158  0b18  cd1c0b                CALL        SUB_ram_cb1c
  1159  0b1b  c9                    RET
  1160                          SUB_ram_cb1c:
  1161  0b1c  dde1                  POP         IX
  1162  0b1e  77                    LD          (HL),A
  1163  0b1f  112900                LD          DE,$29                                 ;EDIT MEdb?
  1164  0b22  19                    ADD         HL,DE
  1165  0b23  77                    LD          (HL),A
  1166  0b24  2b                    DEC         HL
  1167  0b25  1b                    DEC         DE
  1168  0b26  f1                    POP         AF
  1169  0b27  77                    LD          (HL),A
  1170  0b28  19                    ADD         HL,DE
  1171  0b29  cdce08                CALL        DRAW_CHRCOLS
  1172  0b2c  19                    ADD         HL,DE
  1173  0b2d  77                    LD          (HL),A
  1174  0b2e  19                    ADD         HL,DE
  1175  0b2f  f1                    POP         AF
  1176  0b30  77                    LD          (HL),A
  1177  0b31  37                    SCF
  1178  0b32  3f                    CCF
  1179  0b33  ed52                  SBC         HL,DE
  1180  0b35  23                    INC         HL
  1181  0b36  77                    LD          (HL),A
  1182  0b37  dde9                  JP          (IX)
  1183                          DRAW_WALL_L2_C:
  1184  0b39  21c035                LD          HL,DAT_ram_35c0                         ;= $60    `
  1185  0b3c  010402                LD          BC,$204                                ;2 x 4 rectangle
  1186  0b3f  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
  1187                                                                                  ;WAS BLK on DKBLU
  1188                                                                                  ;WAS LD A,0xb
  1189  0b41  c3cb08                JP          FILL_CHRCOL_RECT
  1190                          DRAW_WALL_L2_C_EMPTY:
  1191  0b44  21c035                LD          HL,DAT_ram_35c0                         ;= $60    `
  1192  0b47  010402                LD          BC,$204                                ;2 x 4 rectangle
  1193  0b4a  3e00                  LD          A,0x0                                   ;BLK on BLK
  1194  0b4c  c3cb08                JP          FILL_CHRCOL_RECT
  1195                          SUB_ram_cb4f:
  1196  0b4f  3ef4                  LD          A,$f4                                  ;DKGRY on BLU
  1197                                                                                  ;WAS DKCYN on BLU
  1198                                                                                  ;WAS LD A,$94
  1199  0b51  f5                    PUSH        AF
  1200  0b52  011004                LD          BC,$410
  1201  0b55  3e04                  LD          A,0x4                                   ;BLK on BLU
  1202  0b57  f5                    PUSH        AF
  1203  0b58  3e40                  LD          A,$40                                  ;BLU on BLK
  1204                                                                                  ;WAS BLU on CYN
  1205                                                                                  ;WAS LD A, $46
  1206  0b5a  21b434                LD          HL,DAT_ram_34b4                         ;= $60    `
  1207  0b5d  cd4d0c                CALL        SUB_ram_cc4d
  1208  0b60  213f30                LD          HL,DAT_ram_303f                         ;= $20
  1209  0b63  3ec0                  LD          A,$c0                                  ;Right angle char
  1210  0b65  112700                LD          DE,$27
  1211  0b68  cd7e08                CALL        SUB_ram_c87e
  1212  0b6b  215c33                LD          HL,DAT_ram_335c                         ;= $20
  1213  0b6e  3c                    INC         A
  1214  0b6f  13                    INC         DE
  1215  0b70  13                    INC         DE
  1216  0b71  c37e08                JP          SUB_ram_c87e
  1217                          DRAW_FRO_DOOR:
  1218  0b74  cd4f0b                CALL        SUB_ram_cb4f
  1219  0b77  3ef0                  LD          A,$f0                                  ;DKGRY on BLK
  1220                                                                                  ;WAS DKCYN on DKBLU
  1221                                                                                  ;WAS LD A,$9b
  1222  0b79  08                    EX          AF,AF'
  1223  0b7a  3e04                  LD          A,0x4                                   ;BLK on BLU
  1224                                                                                  ;WAS DKBLU on BLU
  1225                                                                                  ;WAS LDA A,$b4
  1226  0b7c  1808                  JR          LAB_ram_cb86
  1227                          SUB_ram_cb7e:
  1228  0b7e  cd4f0b                CALL        SUB_ram_cb4f
  1229  0b81  3ef2                  LD          A,$f2                                  ;DKGRY on GRN
  1230                                                                                  ;WAS DKCYN on GRN
  1231                                                                                  ;WAS LD A,$92
  1232  0b83  08                    EX          AF,AF'
  1233  0b84  3e24                  LD          A,$24                                  ;GRN on BLU
  1234                          LAB_ram_cb86:
  1235  0b86  212d35                LD          HL,DAT_ram_352d                         ;= $60    `
  1236  0b89  1b                    DEC         DE
  1237  0b8a  1b                    DEC         DE
  1238  0b8b  cd7108                CALL        SUB_ram_c871
  1239  0b8e  13                    INC         DE
  1240  0b8f  19                    ADD         HL,DE
  1241  0b90  08                    EX          AF,AF'
  1242  0b91  cd9308                CALL        SUB_ram_c893
  1243  0b94  19                    ADD         HL,DE
  1244  0b95  010c03                LD          BC,$30c
  1245  0b98  cdce08                CALL        DRAW_CHRCOLS
  1246  0b9b  19                    ADD         HL,DE
  1247  0b9c  cdad08                CALL        SUB_ram_c8ad
  1248  0b9f  19                    ADD         HL,DE
  1249  0ba0  13                    INC         DE
  1250  0ba1  cd7108                CALL        SUB_ram_c871
  1251  0ba4  21df30                LD          HL,DAT_ram_30df                         ;= $20
  1252  0ba7  3ec0                  LD          A,$c0                                  ;Right angle char
  1253  0ba9  1b                    DEC         DE
  1254  0baa  1b                    DEC         DE
  1255  0bab  c38008                JP          LAB_ram_c880
  1256                          SUB_ram_cbae:
  1257  0bae  21dc34                LD          HL,DAT_ram_34dc                         ;= $60    `
  1258  0bb1  3e04                  LD          A,0x4                                   ;BLK on BLU
  1259  0bb3  011004                LD          BC,$410                                ;4 x 10 rectangle
  1260  0bb6  c3cb08                JP          FILL_CHRCOL_RECT
  1261                          SUB_ram_cbb9:
  1262  0bb9  217c31                LD          HL,DAT_ram_317c                         ;= $20
  1263  0bbc  010804                LD          BC,$408
  1264  0bbf  3e20                  LD          A,$20                                  ;Change to SPACE 32 / $20
  1265                                                                                  ;WAS d134 / $86 crosshatch char
  1266                                                                                  ;WAS LD A, $86
  1267  0bc1  cdcb08                CALL        FILL_CHRCOL_RECT
  1268  0bc4  217c35                LD          HL,DAT_ram_357c                         ;= $60    `
  1269  0bc7  0e08                  LD          C,0x8
  1270  0bc9  3e4b                  LD          A,$4b                                  ;BLU on DKBLU
  1271  0bcb  c3ce08                JP          DRAW_CHRCOLS
  1272                          SUB_ram_cbce:
  1273  0bce  cdb90b                CALL        SUB_ram_cbb9
  1274  0bd1  af                    XOR         A
  1275  0bd2  1805                  JR          LAB_ram_cbd9
  1276                          SUB_ram_cbd4:
  1277  0bd4  cdb90b                CALL        SUB_ram_cbb9
  1278  0bd7  3edd                  LD          A,$dd                                  ;DKGRN on DKGRNdb?
  1279                          LAB_ram_cbd9:
  1280  0bd9  21cc35                LD          HL,DAT_ram_35cc                         ;= $60    `
  1281  0bdc  010602                LD          BC,$206                                ;2 x 6 rectangledb?
  1282  0bdf  c3ce08                JP          DRAW_CHRCOLS
  1283                          SUB_ram_cbe2:
  1284  0be2  217f31                LD          HL,DAT_ram_317f                         ;= $20
  1285  0be5  3ec0                  LD          A,$c0                                  ;Right angle char
  1286  0be7  77                    LD          (HL),A                    ;= $20
  1287  0be8  112800                LD          DE,$28
  1288  0beb  19                    ADD         HL,DE
  1289  0bec  2b                    DEC         HL
  1290  0bed  77                    LD          (HL),A                    ;= $20
  1291  0bee  216e32                LD          HL,DAT_ram_326e                         ;= $20
  1292  0bf1  3ec1                  LD          A,$c1                                  ;Left angle char
  1293  0bf3  77                    LD          (HL),A                    ;= $20
  1294  0bf4  19                    ADD         HL,DE
  1295  0bf5  23                    INC         HL
  1296  0bf6  77                    LD          (HL),A                    ;= $20
  1297  0bf7  217f35                LD          HL,DAT_ram_357f                         ;= $60
  1298  0bfa  3ebf                  LD          A,$bf                                  ;DKBLU on DKGRY
  1299                                                                                  ;WAS DKBLU on DKCYN
  1300                                                                                  ;WAS LD A,$b9
  1301  0bfc  77                    LD          (HL),A                    ;= $60
  1302  0bfd  19                    ADD         HL,DE
  1303  0bfe  2b                    DEC         HL
  1304  0bff  77                    LD          (HL),A                    ;= $60
  1305  0c00  23                    INC         HL
  1306  0c01  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
  1307                                                                                  ;WAS BLK on DKBLU
  1308                                                                                  ;WAS LD A,0xb
  1309  0c03  77                    LD          (HL),A                    ;= $60
  1310  0c04  010402                LD          BC,$204                                ;2 x 4 rectangle
  1311  0c07  19                    ADD         HL,DE
  1312  0c08  2b                    DEC         HL                        ;= $60    `
  1313  0c09  cdce08                CALL        DRAW_CHRCOLS
  1314  0c0c  19                    ADD         HL,DE
  1315  0c0d  23                    INC         HL
  1316  0c0e  77                    LD          (HL),A                    ;= $60
  1317  0c0f  2b                    DEC         HL
  1318  0c10  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
  1319                                                                                  ;WAS DKCYN on DKBLU
  1320                                                                                  ;WAS LD A,$9b
  1321  0c12  77                    LD          (HL),A                    ;= $60
  1322  0c13  19                    ADD         HL,DE
  1323  0c14  23                    INC         HL
  1324  0c15  77                    LD          (HL),A                    ;= $60
  1325  0c16  21cc35                LD          HL,DAT_ram_35cc                         ;= $60    `
  1326  0c19  0e04                  LD          C,0x4
  1327  0c1b  3e00                  LD          A,0x0
  1328  0c1d  c3ce08                JP          DRAW_CHRCOLS
  1329                          DRAW_WALL_FR222_EMPTY:
  1330  0c20  21cc35                LD          HL,DAT_ram_35cc                         ;= $60    `
  1331  0c23  010404                LD          BC,$404                                ;4 x 4 rectangle
  1332  0c26  3e00                  LD          A,0x0                                   ;BLK on BLK
  1333  0c28  c3cb08                JP          FILL_CHRCOL_RECT
  1334                          DRAW_WALL_FR1:
  1335  0c2b  3ec1                  LD          A,$c1
  1336  0c2d  f5                    PUSH        AF
  1337  0c2e  010804                LD          BC,$408                                ;4 x 8 rectangle
  1338  0c31  3e20                  LD          A,$20                                  ;Change to SPACE 32 / $20
  1339                                                                                  ;WAS d134 / $86 crosshatch char
  1340                                                                                  ;WAS LD A, $86
  1341  0c33  f5                    PUSH        AF
  1342  0c34  3ec0                  LD          A,$c0                                  ;Right angle char
  1343  0c36  215031                LD          HL,DAT_ram_3150                         ;= $20
  1344  0c39  cd4d0c                CALL        SUB_ram_cc4d
  1345  0c3c  3efb                  LD          A,$fb                                  ;DKGRY on DKBLU
  1346                                                                                  ;WAS DKCYN on DKBLU
  1347                                                                                  ;WAS LD $9b
  1348  0c3e  f5                    PUSH        AF
  1349  0c3f  0e08                  LD          C,0x8
  1350  0c41  3e4b                  LD          A,$4b                                  ;BLU on DKBLU
  1351  0c43  f5                    PUSH        AF
  1352  0c44  3eb0                  LD          A,$b0                                  ;DKBLU on BLK
  1353                                                                                  ;WAS DKBLU on CYN
  1354                                                                                  ;WAS LD A,$b6
  1355  0c46  215035                LD          HL,DAT_ram_3550                         ;= $60    `
  1356  0c49  cd4d0c                CALL        SUB_ram_cc4d
  1357  0c4c  c9                    RET
  1358                          SUB_ram_cc4d:
  1359  0c4d  dde1                  POP         IX
  1360  0c4f  112700                LD          DE,$27
  1361  0c52  cd6c08                CALL        SUB_ram_c86c
  1362  0c55  13                    INC         DE
  1363  0c56  19                    ADD         HL,DE
  1364  0c57  f1                    POP         AF
  1365  0c58  cd9308                CALL        SUB_ram_c893
  1366  0c5b  19                    ADD         HL,DE
  1367  0c5c  2b                    DEC         HL
  1368  0c5d  cdce08                CALL        DRAW_CHRCOLS
  1369  0c60  19                    ADD         HL,DE
  1370  0c61  23                    INC         HL
  1371  0c62  cdad08                CALL        SUB_ram_c8ad
  1372  0c65  19                    ADD         HL,DE
  1373  0c66  f1                    POP         AF
  1374  0c67  13                    INC         DE
  1375  0c68  cd6c08                CALL        SUB_ram_c86c
  1376  0c6b  dde9                  JP          (IX)
  1377                          SUB_ram_cc6d:
  1378  0c6d  cd2b0c                CALL        DRAW_WALL_FR1
  1379  0c70  3ef0                  LD          A,$f0                                  ;DKGRY on BLK
  1380                                                                                  ;WAS DKCYN on BLK
  1381                                                                                  ;WAS LD A,$90
  1382  0c72  f5                    PUSH        AF
  1383  0c73  3eb0                  LD          A,$b0                                  ;DKBLU on BLK
  1384  0c75  f5                    PUSH        AF
  1385  0c76  3e0b                  LD          A,0xb                                   ;BLK on DKBLU
  1386  0c78  180b                  JR          LAB_ram_cc85
  1387                          SUB_ram_cc7a:
  1388  0c7a  cd2b0c                CALL        DRAW_WALL_FR1
  1389  0c7d  3efd                  LD          A,$fd                                  ;DKGRY on DKGRN
  1390                                                                                  ;WAS DKCYN on DKGRN
  1391                                                                                  ;WAS LD A,$9d
  1392  0c7f  f5                    PUSH        AF
  1393  0c80  3e2d                  LD          A,$2d                                  ;GRN on DKGRN
  1394  0c82  f5                    PUSH        AF
  1395  0c83  3edb                  LD          A,$db                                  ;DKGRN on DKBLU
  1396                          LAB_ram_cc85:
  1397  0c85  217a35                LD          HL,DAT_ram_357a                         ;= $60    `
  1398  0c88  010702                LD          BC,$207                                ;2 x 7 rectangle
  1399  0c8b  cd070d                CALL        SUB_ram_cd07
  1400  0c8e  217a31                LD          HL,DAT_ram_317a                         ;= $20
  1401  0c91  3ec0                  LD          A,$c0                                  ;Right angle char
  1402  0c93  77                    LD          (HL),A                    ;= $20
  1403  0c94  112700                LD          DE,$27
  1404  0c97  19                    ADD         HL,DE
  1405  0c98  77                    LD          (HL),A                    ;= $20
  1406  0c99  c9                    RET
  1407                          SUB_ram_cc9a:
  1408  0c9a  217835                LD          HL,DAT_ram_3578                         ;= $60    `
  1409  0c9d  010804                LD          BC,$408                                ;4 x 8 rectangle
  1410  0ca0  3e4b                  LD          A,$4b                                  ;BLU on DKBLU
  1411  0ca2  cdcb08                CALL        FILL_CHRCOL_RECT
  1412  0ca5  217831                LD          HL,DAT_ram_3178                         ;= $20
  1413  0ca8  0e08                  LD          C,0x8
  1414  0caa  3e20                  LD          A,$20                                  ;Change to SPACE 32 / $20
  1415                                                                                  ;WAS d134 / $86 crosshatch char
  1416                                                                                  ;WAS LD A, $86
  1417  0cac  c3ce08                JP          DRAW_CHRCOLS
  1418                          SUB_ram_ccaf:
  1419  0caf  cd9a0c                CALL        SUB_ram_cc9a
  1420  0cb2  af                    XOR         A
  1421  0cb3  1805                  JR          LAB_ram_ccba
  1422                          SUB_ram_ccb5:
  1423  0cb5  cd9a0c                CALL        SUB_ram_cc9a
  1424  0cb8  3edd                  LD          A,$dd                                  ;DKGRN on DKGRN
  1425                          LAB_ram_ccba:
  1426  0cba  21ca35                LD          HL,DAT_ram_35ca                         ;= $60    `
  1427  0cbd  010602                LD          BC,$206                                ;2 x 6 rectangle
  1428  0cc0  c3ce08                JP          DRAW_CHRCOLS
  1429                          SUB_ram_ccc3:
  1430  0cc3  21ca35                LD          HL,DAT_ram_35ca                         ;= $60    `
  1431  0cc6  010402                LD          BC,$204                                ;2 x 4 rectangle
  1432  0cc9  3e00                  LD          A,0x0                                   ;BLK on BLK
  1433  0ccb  cdcb08                CALL        FILL_CHRCOL_RECT
  1434  0cce  0e04                  LD          C,0x4
  1435  0cd0  21c835                LD          HL,DAT_ram_35c8                         ;= $60    `
  1436  0cd3  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
  1437                                                                                  ;WAS BLK on DKBLU
  1438                                                                                  ;WAS LD A, 0xb
  1439  0cd5  c3ce08                JP          DRAW_CHRCOLS
  1440                          DRAW_WALL_FR2_EMPTY:
  1441  0cd8  21c835                LD          HL,DAT_ram_35c8                         ;= $60    `
  1442  0cdb  010404                LD          BC,$404                                ;4 x 4 rectangle
  1443  0cde  3e00                  LD          A,0x0                                   ;BLK on BLK
  1444  0ce0  c3cb08                JP          FILL_CHRCOL_RECT
  1445                          DRAW_WALL_FR2:
  1446  0ce3  3e0f                  LD          A,0xf                                   ;FR2 Bottom
  1447                                                                                  ;BLK on DKGRY
  1448                                                                                  ;WAS DKCYN on DKBLU
  1449                                                                                  ;WAS LD A,$9b
  1450  0ce5  f5                    PUSH        AF
  1451  0ce6  3e0f                  LD          A,0xf                                   ;FR2 Wall
  1452                                                                                  ;BLK on DKGRY
  1453                                                                                  ;WAS BLK on DKBLU
  1454                                                                                  ;WAS LD A,0xb
  1455  0ce8  f5                    PUSH        AF
  1456  0ce9  3ef0                  LD          A,$f0                                  ;FR2 Top
  1457                                                                                  ;DKGRY on BLK
  1458                                                                                  ;WAS DKBLU on CYN
  1459                                                                                  ;WAS LD A,$b6
  1460  0ceb  217735                LD          HL,DAT_ram_3577                         ;= $60    `
  1461  0cee  010402                LD          BC,$204                                ;2 x 4 rectangle
  1462  0cf1  cd070d                CALL        SUB_ram_cd07
  1463  0cf4  216632                LD          HL,DAT_ram_3266                         ;= $20
  1464  0cf7  3eda                  LD          A,$da                                  ;Left slash char
  1465  0cf9  77                    LD          (HL),A                    ;= $20
  1466  0cfa  19                    ADD         HL,DE
  1467  0cfb  77                    LD          (HL),A                    ;= $20
  1468  0cfc  217731                LD          HL,DAT_ram_3177                         ;= $20
  1469  0cff  3ec0                  LD          A,$c0                                  ;Right angle char
  1470  0d01  77                    LD          (HL),A                    ;= $20
  1471  0d02  1b                    DEC         DE
  1472  0d03  1b                    DEC         DE
  1473  0d04  19                    ADD         HL,DE
  1474  0d05  77                    LD          (HL),A                    ;= $20
  1475  0d06  c9                    RET
  1476                          SUB_ram_cd07:
  1477  0d07  dde1                  POP         IX
  1478  0d09  77                    LD          (HL),A
  1479  0d0a  112700                LD          DE,$27
  1480  0d0d  19                    ADD         HL,DE
  1481  0d0e  77                    LD          (HL),A
  1482  0d0f  23                    INC         HL
  1483  0d10  f1                    POP         AF
  1484  0d11  77                    LD          (HL),A
  1485  0d12  19                    ADD         HL,DE
  1486  0d13  13                    INC         DE
  1487  0d14  cdce08                CALL        DRAW_CHRCOLS
  1488  0d17  13                    INC         DE
  1489  0d18  19                    ADD         HL,DE
  1490  0d19  77                    LD          (HL),A
  1491  0d1a  2b                    DEC         HL
  1492  0d1b  f1                    POP         AF
  1493  0d1c  77                    LD          (HL),A
  1494  0d1d  19                    ADD         HL,DE
  1495  0d1e  77                    LD          (HL),A
  1496  0d1f  dde9                  JP          (IX)
  1497                          SUB_ram_cd21:
  1498  0d21  21c635                LD          HL,DAT_ram_35c6                         ;= $60    `
  1499  0d24  010402                LD          BC,$204                                ;2 x 4 rectangle
  1500  0d27  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
  1501                                                                                  ;WAS BLK on DKBLU
  1502                                                                                  ;WAS LD A,0xb
  1503  0d29  c3cb08                JP          FILL_CHRCOL_RECT
  1504                          SUB_ram_cd2c:
  1505  0d2c  21c635                LD          HL,DAT_ram_35c6                         ;= $60    `
  1506  0d2f  010402                LD          BC,$204                                ;2 x 4 rectangle
  1507  0d32  3e00                  LD          A,0x0                                   ;BLK on BLK
  1508  0d34  c3cb08                JP          FILL_CHRCOL_RECT
  1509  0d37  3e08                  LD          A,0x8
  1510  0d39  32b83a                LD          (SOUND_REPEAT_COUNT),A
  1511  0d3c  47                    LD          B,A
  1512                          LAB_ram_cd3d:
  1513  0d3d  c5                    PUSH        BC
  1514  0d3e  cd5c0e                CALL        SOUND_04
  1515  0d41  cde70d                CALL        SUB_ram_cde7
  1516  0d44  cd340e                CALL        SOUND_02
  1517  0d47  cd200e                CALL        SOUND_01
  1518  0d4a  c1                    POP         BC
  1519  0d4b  10f0                  DJNZ        LAB_ram_cd3d
  1520  0d4d  c9                    RET
  1521  0d4e  3e07                  LD          A,0x7
  1522  0d50  32b83a                LD          (SOUND_REPEAT_COUNT),A
  1523  0d53  47                    LD          B,A
  1524                          LAB_ram_cd54:
  1525  0d54  c5                    PUSH        BC
  1526  0d55  cd340e                CALL        SOUND_02
  1527  0d58  cd480e                CALL        SOUND_03
  1528  0d5b  c1                    POP         BC
  1529  0d5c  10f6                  DJNZ        LAB_ram_cd54
  1530  0d5e  c9                    RET
  1531                          SUB_ram_cd5f:
  1532  0d5f  3e0a                  LD          A,0xa
  1533  0d61  32b83a                LD          (SOUND_REPEAT_COUNT),A
  1534  0d64  47                    LD          B,A
  1535                          LAB_ram_cd65:
  1536  0d65  c5                    PUSH        BC
  1537  0d66  cd5c0e                CALL        SOUND_04
  1538  0d69  cd700e                CALL        SOUND_05
  1539  0d6c  c1                    POP         BC
  1540  0d6d  10f6                  DJNZ        LAB_ram_cd65
  1541  0d6f  c3bf0d                JP          SUB_ram_cdbf
  1542                          POOF_SOUND:
  1543  0d72  3e07                  LD          A,0x7
  1544  0d74  32b83a                LD          (SOUND_REPEAT_COUNT),A
  1545  0d77  0601                  LD          B,0x1
  1546  0d79  1806                  JR          DOINK_SOUND
  1547                          END_OF_GAME_SOUND:
  1548  0d7b  3e04                  LD          A,0x4                                   ;Was LD A,0x7
  1549  0d7d  32b83a                LD          (SOUND_REPEAT_COUNT),A
  1550  0d80  47                    LD          B,A
  1551                          DOINK_SOUND:
  1552  0d81  c5                    PUSH        BC
  1553  0d82  cd340e                CALL        SOUND_02
  1554  0d85  cde70d                CALL        SUB_ram_cde7
  1555  0d88  cd480e                CALL        SOUND_03
  1556  0d8b  c1                    POP         BC
  1557  0d8c  10f3                  DJNZ        DOINK_SOUND
  1558  0d8e  c9                    RET
  1559  0d8f  cde70d                CALL        SUB_ram_cde7
  1560  0d92  cde70d                CALL        SUB_ram_cde7
  1561  0d95  cde70d                CALL        SUB_ram_cde7
  1562  0d98  cde70d                CALL        SUB_ram_cde7
  1563  0d9b  cde70d                CALL        SUB_ram_cde7
  1564  0d9e  cde70d                CALL        SUB_ram_cde7
  1565  0da1  cde70d                CALL        SUB_ram_cde7
  1566  0da4  cde70d                CALL        SUB_ram_cde7
  1567  0da7  cde70d                CALL        SUB_ram_cde7
  1568  0daa  cde70d                CALL        SUB_ram_cde7
  1569  0dad  cde70d                CALL        SUB_ram_cde7
  1570  0db0  cd700e                CALL        SOUND_05
  1571  0db3  cd700e                CALL        SOUND_05
  1572  0db6  cd700e                CALL        SOUND_05
  1573  0db9  cd700e                CALL        SOUND_05
  1574  0dbc  c3700e                JP          SOUND_05
  1575                          SUB_ram_cdbf:
  1576  0dbf  3e00                  LD          A,0x0
  1577  0dc1  f5                    PUSH        AF
  1578  0dc2  014000                LD          BC,$40
  1579  0dc5  111500                LD          DE,$15
  1580  0dc8  210004                LD          HL,$400
  1581  0dcb  3e00                  LD          A,0x0
  1582  0dcd  32b53a                LD          (PITCH_UP_BOOL),A
  1583  0dd0  c3840e                JP          PLAY_PITCH_CHANGE
  1584                          SUB_ram_cdd3:
  1585  0dd3  3e00                  LD          A,0x0
  1586  0dd5  f5                    PUSH        AF
  1587  0dd6  01a000                LD          BC,$a0
  1588  0dd9  110800                LD          DE,0x8
  1589  0ddc  210008                LD          HL,$800
  1590  0ddf  3e00                  LD          A,0x0
  1591  0de1  32b53a                LD          (PITCH_UP_BOOL),A
  1592  0de4  c3840e                JP          PLAY_PITCH_CHANGE
  1593                          SUB_ram_cde7:
  1594  0de7  3e00                  LD          A,0x0
  1595  0de9  f5                    PUSH        AF
  1596  0dea  01a000                LD          BC,$a0
  1597  0ded  110100                LD          DE,0x1
  1598  0df0  210200                LD          HL,0x2
  1599  0df3  3e00                  LD          A,0x0
  1600  0df5  32b53a                LD          (PITCH_UP_BOOL),A
  1601  0df8  c3840e                JP          PLAY_PITCH_CHANGE
  1602                          SETUP_OPEN_DOOR_SOUND:
  1603  0dfb  110f00                LD          DE,0xf
  1604  0dfe  218005                LD          HL,$580
  1605                          LO_HI_PITCH_SOUND:
  1606  0e01  010800                LD          BC,0x8
  1607  0e04  3e00                  LD          A,0x0
  1608  0e06  f5                    PUSH        AF
  1609  0e07  3e01                  LD          A,0x1
  1610  0e09  32b53a                LD          (PITCH_UP_BOOL),A
  1611  0e0c  c3840e                JP          PLAY_PITCH_CHANGE
  1612                          SETUP_CLOSE_DOOR_SOUND:
  1613  0e0f  210500                LD          HL,0x5
  1614  0e12  110c00                LD          DE,0xc
  1615                          HI_LO_PITCH_SOUND:
  1616  0e15  010e00                LD          BC,0xe                                  ;H
  1617  0e18  af                    XOR         A
  1618  0e19  f5                    PUSH        AF
  1619  0e1a  32b53a                LD          (PITCH_UP_BOOL),A
  1620  0e1d  c3840e                JP          PLAY_PITCH_CHANGE
  1621                          SOUND_01:
  1622  0e20  3e00                  LD          A,0x0
  1623  0e22  f5                    PUSH        AF
  1624  0e23  013000                LD          BC,$30
  1625  0e26  110200                LD          DE,0x2
  1626  0e29  210001                LD          HL,$100
  1627  0e2c  3e01                  LD          A,0x1
  1628  0e2e  32b53a                LD          (PITCH_UP_BOOL),A
  1629  0e31  c3840e                JP          PLAY_PITCH_CHANGE
  1630                          SOUND_02:
  1631  0e34  3e00                  LD          A,0x0
  1632  0e36  f5                    PUSH        AF
  1633  0e37  011a00                LD          BC,$1a
  1634  0e3a  111000                LD          DE,$10
  1635  0e3d  210003                LD          HL,$300
  1636  0e40  3e01                  LD          A,0x1
  1637  0e42  32b53a                LD          (PITCH_UP_BOOL),A
  1638  0e45  c3840e                JP          PLAY_PITCH_CHANGE
  1639                          SOUND_03:
  1640  0e48  3e00                  LD          A,0x0
  1641  0e4a  f5                    PUSH        AF
  1642  0e4b  012a00                LD          BC,$2a
  1643  0e4e  110a00                LD          DE,0xa
  1644  0e51  210400                LD          HL,0x4
  1645  0e54  3e00                  LD          A,0x0
  1646  0e56  32b53a                LD          (PITCH_UP_BOOL),A
  1647  0e59  c3840e                JP          PLAY_PITCH_CHANGE
  1648                          SOUND_04:
  1649  0e5c  3e00                  LD          A,0x0
  1650  0e5e  f5                    PUSH        AF
  1651  0e5f  012000                LD          BC,$20
  1652  0e62  110200                LD          DE,0x2
  1653  0e65  215500                LD          HL,$55
  1654  0e68  3e01                  LD          A,0x1
  1655  0e6a  32b53a                LD          (PITCH_UP_BOOL),A
  1656  0e6d  c3840e                JP          PLAY_PITCH_CHANGE
  1657                          SOUND_05:
  1658  0e70  3e00                  LD          A,0x0
  1659  0e72  f5                    PUSH        AF
  1660  0e73  013000                LD          BC,$30
  1661  0e76  110100                LD          DE,0x1
  1662  0e79  210100                LD          HL,0x1
  1663  0e7c  3e00                  LD          A,0x0
  1664  0e7e  32b53a                LD          (PITCH_UP_BOOL),A
  1665  0e81  c3840e                JP          PLAY_PITCH_CHANGE
  1666                          PLAY_PITCH_CHANGE:
  1667  0e84  22b33a                LD          (SND_CYCLE_HOLDER),HL
  1668                          PLAY_PITCH_CHANGE_LOOP:
  1669  0e87  2b                    DEC         HL
  1670  0e88  7c                    LD          A,H
  1671  0e89  b5                    OR          L                                       ;Clear flags
  1672  0e8a  20fb                  JR          NZ,PLAY_PITCH_CHANGE_LOOP
  1673  0e8c  f1                    POP         AF
  1674  0e8d  d3fc                  OUT         (SPEAKER),A                             ;= db
  1675  0e8f  ee01                  XOR         0x1
  1676  0e91  f5                    PUSH        AF
  1677  0e92  0b                    DEC         BC
  1678  0e93  78                    LD          A,B
  1679  0e94  b1                    OR          C
  1680  0e95  2005                  JR          NZ,INCREASE_PITCH
  1681  0e97  f1                    POP         AF
  1682  0e98  2ab33a                LD          HL,(SND_CYCLE_HOLDER)
  1683  0e9b  c9                    RET
  1684                          INCREASE_PITCH:
  1685  0e9c  21b53a                LD          HL,PITCH_UP_BOOL
  1686  0e9f  cb46                  BIT         0x0,(HL)
  1687  0ea1  2807                  JR          Z,DECREASE_PITCH
  1688  0ea3  2ab33a                LD          HL,(SND_CYCLE_HOLDER)
  1689  0ea6  ed52                  SBC         HL,DE
  1690  0ea8  18da                  JR          PLAY_PITCH_CHANGE
  1691                          DECREASE_PITCH:
  1692  0eaa  2ab33a                LD          HL,(SND_CYCLE_HOLDER)
  1693  0ead  19                    ADD         HL,DE
  1694  0eae  18d4                  JR          PLAY_PITCH_CHANGE
  1695                          HC_JOY_INPUT_COMPARE:
  1696  0eb0  3a663a                LD          A,(RAM_AE)
  1697  0eb3  fe31                  CP          $31                                    ;Compare to "1" db?
  1698  0eb5  c29f2a                JP          NZ,WAIT_FOR_INPUT
  1699  0eb8  2afe37                LD          HL,(HC_INPUT_HOLDER)                    ;= $6060
  1700  0ebb  3ef3                  LD          A,$f3                                  ;Compare to JOY disc UUL
  1701  0ebd  bd                    CP          L
  1702  0ebe  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  1703  0ec1  bc                    CP          H
  1704  0ec2  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  1705  0ec5  3efb                  LD          A,$fb                                  ;Compare to JOY disc UP
  1706  0ec7  bd                    CP          L
  1707  0ec8  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  1708  0ecb  bc                    CP          H
  1709  0ecc  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  1710  0ecf  3eeb                  LD          A,$eb                                  ;Compare to JOY disc UUR
  1711  0ed1  bc                    CP          H
  1712  0ed2  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  1713  0ed5  bd                    CP          L
  1714  0ed6  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  1715  0ed9  3ee9                  LD          A,$e9                                  ;Compare to JOY disc UR
  1716  0edb  bd                    CP          L
  1717  0edc  ca182e                JP          Z,DO_TURN_RIGHT
  1718  0edf  bc                    CP          H
  1719  0ee0  ca182e                JP          Z,DO_TURN_RIGHT
  1720  0ee3  3ef9                  LD          A,$f9                                  ;Compare to JOY disc RUR
  1721  0ee5  bd                    CP          L
  1722  0ee6  ca182e                JP          Z,DO_TURN_RIGHT
  1723  0ee9  bc                    CP          H
  1724  0eea  ca182e                JP          Z,DO_TURN_RIGHT
  1725  0eed  3efd                  LD          A,$fd                                  ;Compare to JOY disc RIGHT
  1726  0eef  bd                    CP          L
  1727  0ef0  ca182e                JP          Z,DO_TURN_RIGHT
  1728  0ef3  bc                    CP          H
  1729  0ef4  ca182e                JP          Z,DO_TURN_RIGHT
  1730  0ef7  3ee7                  LD          A,$e7                                  ;Compare to JOY disc LUL
  1731  0ef9  bd                    CP          L
  1732  0efa  ca002e                JP          Z,DO_TURN_LEFT
  1733  0efd  bc                    CP          H
  1734  0efe  ca002e                JP          Z,DO_TURN_LEFT
  1735  0f01  3ee3                  LD          A,$e3                                  ;Compare to JOY disc UL
  1736  0f03  bd                    CP          L
  1737  0f04  ca002e                JP          Z,DO_TURN_LEFT
  1738  0f07  bc                    CP          H
  1739  0f08  ca002e                JP          Z,DO_TURN_LEFT
  1740  0f0b  3ef7                  LD          A,$f7                                  ;Compare to JOY disc LEFT
  1741  0f0d  bd                    CP          L
  1742  0f0e  ca002e                JP          Z,DO_TURN_LEFT
  1743  0f11  bc                    CP          H
  1744  0f12  ca002e                JP          Z,DO_TURN_LEFT
  1745  0f15  3ef6                  LD          A,$f6                                  ;Compare to JOY disc LDL
  1746  0f17  bd                    CP          L
  1747  0f18  ca482e                JP          Z,DO_GLANCE_LEFT
  1748  0f1b  bc                    CP          H
  1749  0f1c  ca482e                JP          Z,DO_GLANCE_LEFT
  1750  0f1f  3ee6                  LD          A,$e6                                  ;Compare to JOY disc DL
  1751  0f21  bd                    CP          L
  1752  0f22  ca482e                JP          Z,DO_GLANCE_LEFT
  1753  0f25  bc                    CP          H
  1754  0f26  ca482e                JP          Z,DO_GLANCE_LEFT
  1755  0f29  3eed                  LD          A,$ed                                  ;Compare to JOY disc RDR
  1756  0f2b  bd                    CP          L
  1757  0f2c  ca322e                JP          Z,DO_GLANCE_RIGHT
  1758  0f2f  bc                    CP          H
  1759  0f30  ca322e                JP          Z,DO_GLANCE_RIGHT
  1760  0f33  3eec                  LD          A,$ec                                  ;Compare to JOY disc DR
  1761  0f35  bd                    CP          L
  1762  0f36  ca322e                JP          Z,DO_GLANCE_RIGHT
  1763  0f39  bc                    CP          H
  1764  0f3a  ca322e                JP          Z,DO_GLANCE_RIGHT
  1765  0f3d  3efc                  LD          A,$fc                                  ;Compare to JOY disc DDR
  1766  0f3f  bd                    CP          L
  1767  0f40  cad021                JP          Z,DO_JUMP_BACK
  1768  0f43  bc                    CP          H
  1769  0f44  cad021                JP          Z,DO_JUMP_BACK
  1770  0f47  3efe                  LD          A,$fe                                  ;Compare to JOY disc DOWN
  1771  0f49  bd                    CP          L
  1772  0f4a  cad021                JP          Z,DO_JUMP_BACK
  1773  0f4d  bc                    CP          H
  1774  0f4e  cad021                JP          Z,DO_JUMP_BACK
  1775  0f51  3eee                  LD          A,$ee                                  ;Compare to JOY disc DDL
  1776  0f53  bd                    CP          L
  1777  0f54  cad021                JP          Z,DO_JUMP_BACK
  1778  0f57  bc                    CP          H
  1779  0f58  cad021                JP          Z,DO_JUMP_BACK
  1780  0f5b  3edf                  LD          A,$df                                  ;Compare to JOY K4
  1781  0f5d  bd                    CP          L
  1782  0f5e  ca4616                JP          Z,TOGGLE_SHIFT_MODE
  1783  0f61  bc                    CP          H
  1784  0f62  ca4616                JP          Z,TOGGLE_SHIFT_MODE
  1785  0f65  3ab93a                LD          A,(GAME_BOOLEANS)
  1786  0f68  cb4f                  BIT         0x1,A
  1787  0f6a  c2a20f                JP          NZ,DO_HC_SHIFT_ACTIONS
  1788                          DO_HC_BUTTON_ACTIONS:
  1789  0f6d  3ebf                  LD          A,$bf                                  ;Compare to JOY K1
  1790  0f6f  bd                    CP          L
  1791  0f70  ca5e2e                JP          Z,DO_USE_ATTACK
  1792  0f73  bc                    CP          H
  1793  0f74  ca5e2e                JP          Z,DO_USE_ATTACK
  1794  0f77  3e7b                  LD          A,$7b                                  ;Compare to JOY K2
  1795  0f79  bd                    CP          L
  1796  0f7a  cadb2c                JP          Z,DO_OPEN_CLOSE
  1797  0f7d  bc                    CP          H
  1798  0f7e  cadb2c                JP          Z,DO_OPEN_CLOSE
  1799  0f81  3e5f                  LD          A,$5f                                  ;Compare to JOY K3
  1800  0f83  bd                    CP          L
  1801  0f84  cacc27                JP          Z,DO_PICK_UP
  1802  0f87  bc                    CP          H
  1803  0f88  cacc27                JP          Z,DO_PICK_UP
  1804  0f8b  3e7d                  LD          A,$7d                                  ;Compare to JOY K5
  1805  0f8d  bd                    CP          L
  1806  0f8e  ca682a                JP          Z,DO_SWAP_PACK
  1807  0f91  bc                    CP          H
  1808  0f92  ca682a                JP          Z,DO_SWAP_PACK
  1809  0f95  3e7e                  LD          A,$7e                                  ;Compare to JOY K6
  1810  0f97  bd                    CP          L
  1811  0f98  caf829                JP          Z,DO_ROTATE_PACK
  1812  0f9b  bc                    CP          H
  1813  0f9c  caf829                JP          Z,DO_ROTATE_PACK
  1814  0f9f  c33022                JP          NO_ACTION_TAKEN
  1815                          DO_HC_SHIFT_ACTIONS:
  1816  0fa2  3ebf                  LD          A,$bf                                  ;Compare to JOY K1
  1817  0fa4  bd                    CP          L
  1818  0fa5  caa332                JP          Z,DO_USE_LADDER
  1819  0fa8  bc                    CP          H
  1820  0fa9  caa332                JP          Z,DO_USE_LADDER
  1821  0fac  3e7b                  LD          A,$7b                                  ;Compare to JOY K2
  1822  0fae  bd                    CP          L
  1823  0faf  ca1422                JP          Z,DO_COUNT_FOOD
  1824  0fb2  bc                    CP          H
  1825  0fb3  ca1422                JP          Z,DO_COUNT_FOOD
  1826  0fb6  3e5f                  LD          A,$5f                                  ;Compare to JOY K3
  1827  0fb8  bd                    CP          L
  1828  0fb9  ca2b22                JP          Z,DO_COUNT_ARROWS
  1829  0fbc  bc                    CP          H
  1830  0fbd  ca2b22                JP          Z,DO_COUNT_ARROWS
  1831  0fc0  3e7d                  LD          A,$7d                                  ;Compare to JOY K5
  1832  0fc2  bd                    CP          L
  1833  0fc3  cacc26                JP          Z,DO_SWAP_HANDS
  1834  0fc6  bc                    CP          H
  1835  0fc7  cacc26                JP          Z,DO_SWAP_HANDS
  1836  0fca  3e7e                  LD          A,$7e                                  ;Compare to JOY K6
  1837  0fcc  bd                    CP          L
  1838  0fcd  ca6b3b                JP          Z,DO_REST
  1839  0fd0  bc                    CP          H
  1840  0fd1  ca6b3b                JP          Z,DO_REST
  1841  0fd4  3ecc                  LD          A,$cc                                  ;Compare to K4 + DR chord
  1842  0fd6  bd                    CP          L
  1843  0fd7  caee3c                JP          Z,MAX_HEALTH_ARROWS_FOOD
  1844  0fda  bc                    CP          H
  1845  0fdb  caee3c                JP          Z,MAX_HEALTH_ARROWS_FOOD
  1846  0fde  3ec6                  LD          A,$c6                                  ;Compare to K4 + DL chord
  1847  0fe0  bd                    CP          L
  1848  0fe1  ca303d                JP          Z,DO_TELEPORT
  1849  0fe4  bc                    CP          H
  1850  0fe5  ca303d                JP          Z,DO_TELEPORT
  1851  0fe8  00                    NOP
  1852  0fe9  00                    NOP
  1853  0fea  00                    NOP
  1854  0feb  00                    NOP
  1855  0fec  00                    NOP
  1856  0fed  00                    NOP
  1857  0fee  00                    NOP
  1858  0fef  00                    NOP
  1859  0ff0  00                    NOP
  1860  0ff1  00                    NOP
  1861  0ff2  00                    NOP
  1862  0ff3  00                    NOP
  1863  0ff4  00                    NOP
  1864  0ff5  00                    NOP
  1865  0ff6  00                    NOP
  1866  0ff7  00                    NOP
  1867  0ff8  00                    NOP
  1868  0ff9  00                    NOP
  1869  0ffa  00                    NOP
  1870  0ffb  00                    NOP
  1871  0ffc  c33022                JP          NO_ACTION_TAKEN
  1872  0fff  00                    NOP
  1873  1000  ff                    db          $FF
  1874                          GRYPHON:
  1875  1001  04040404              db          $04,$04,$04,$04
  1876  1005  02889088f001          db          $02,$88,$90,$88,$F0,$01
  1877  100b  0202bea0aca0ed95      db          $02,$02,$BE,$A0,$AC,$A0,$ED,$95,$A0,$85,$A0,$F5,$01
              a085a0f501        
  1878  1018  0202a0959595a0b5      db          $02,$02,$A0,$95,$95,$95,$A0,$B5,$86,$91,$01
              869101            
  1879  1023  0202a0959595a0c3      db          $02,$02,$A0,$95,$95,$95,$A0,$C3,$95,$E5,$A0,$C7,$A0,$B0,$01
              95e5a0c7a0b001    
  1880  1032  0202a09595a0a1ef      db          $02,$02,$A0,$95,$95,$A0,$A1,$EF,$F4,$EF,$F5,$A0,",",$A0,$01
              f4eff5a02ca001    
  1881  1041  020212b97ff57ff5      db          $02,$02,$12,$B9,$7F,$F5,$7F,$F5,"\r",$C7,$01
              0dc701            
  1882  104c  0202b6eaf7e77feb      db          $02,$02,$B6,$EA,$F7,$E7,$7F,$EB,$F5,$01
              f501              
  1883  1056  02028bc7bfb6efed      db          $02,$02,$8B,$C7,$BF,$B6,$EF,$ED,$EB,$E5,$FF
              ebe5ff            
  1884                          GRYPHON_S:
  1885  1061  040404b8b8b001        db          $04,$04,$04,$B8,$B8,$B0,$01
  1886  1068  a09595a012c901        db          $A0,$95,$95,$A0,$12,$C9,$01
  1887  106f  e1a0d9d9a08d01        db          $E1,$A0,$D9,$D9,$A0,$8D,$01
  1888  1076  28e7e7e5ff            db          "(",$E7,$E7,$E5,$FF
  1889                          STAFF:
  1890  107b  0101010101            db          $01,$01,$01,$01,$01
  1891  1080  d501                  db          $D5,$01
  1892  1082  00da01                db          $00,$DA,$01
  1893  1085  0000da01              db          $00,$00,$DA,$01
  1894  1089  000000daff            db          $00,$00,$00,$DA,$FF
  1895                          STAFF_S:
  1896  108e  0101                  db          $01,$01
  1897  1090  00d301                db          $00,$D3,$01
  1898  1093  0000daff              db          $00,$00,$DA,$FF
  1899                          STAFF_T:
  1900  1097  005cff                db          $00,"\\",$FF
  1901                          SCROLL:
  1902  109a  0101010101            db          $01,$01,$01,$01,$01
  1903  109f  0990900901            db          "\t",$90,$90,"\t",$01
  1904  10a4  128f8e1201            db          $12,$8F,$8E,$12,$01
  1905  10a9  129e9f1201            db          $12,$9E,$9F,$12,$01
  1906  10ae  08a08080a008ff        db          "\b",$A0,$80,$80,$A0,"\b",$FF
  1907                          SCROLL_S:
  1908  10b5  0101                  db          $01,$01
  1909  10b7  00cddd01              db          $00,$CD,$DD,$01
  1910  10bb  00cdddff              db          $00,$CD,$DD,$FF
  1911                          SCROLL_T:
  1912  10bf  0048ff                db          $00,"H",$FF
  1913                          CROSSBOW:
  1914  10c2  0101010101            db          $01,$01,$01,$01,$01
  1915  10c7  000090f001            db          $00,$00,$90,$F0,$01
  1916  10cc  000cb7a091a001        db          $00,"\f",$B7,$A0,$91,$A0,$01
  1917  10d3  a091a0b7eda091a0      db          $A0,$91,$A0,$B7,$ED,$A0,$91,$A0,$01
              01                
  1918  10dc  a099a09090a0d7a0      db          $A0,$99,$A0,$90,$90,$A0,$D7,$A0,$FF
              ff                
  1919                          CROSSBOW_S:
  1920  10e5  0101                  db          $01,$01
  1921  10e7  d7dc01                db          $D7,$DC,$01
  1922  10ea  cd0dff                db          $CD,"\r",$FF
  1923                          CROSSBOW_T:
  1924  10ed  a091a0d8020490ff      db          $A0,$91,$A0,$D8,$02,$04,$90,$FF
  1925                          WARRIOR_POTION:
  1926  10f5  0101010101            db          $01,$01,$01,$01,$01
  1927  10fa  002bd401              db          $00,"+",$D4,$01
  1928  10fe  00110f01              db          $00,$11,$0F,$01
  1929  1102  00cddd01              db          $00,$CD,$DD,$01
  1930  1106  00c7d9ff              db          $00,$C7,$D9,$FF
  1931                          MAGE_POTION:
  1932  110a  0101010101            db          $01,$01,$01,$01,$01
  1933  110f  002bd501              db          $00,"+",$D5,$01
  1934  1113  00110f01              db          $00,$11,$0F,$01
  1935  1117  00cddd01              db          $00,$CD,$DD,$01
  1936  111b  00c7d9ff              db          $00,$C7,$D9,$FF
  1937                          CHAOS_POTION:
  1938  111f  0101010101            db          $01,$01,$01,$01,$01
  1939  1124  003f3f01              db          $00,"??",$01
  1940  1128  00110f01              db          $00,$11,$0F,$01
  1941  112c  00cddd01              db          $00,$CD,$DD,$01
  1942  1130  00c7d9ff              db          $00,$C7,$D9,$FF
  1943                          WARRIOR_POTION_S:
  1944  1134  0101                  db          $01,$01
  1945  1136  00d401                db          $00,$D4,$01
  1946  1139  001401                db          $00,$14,$01
  1947  113c  00c2ff                db          $00,$C2,$FF
  1948                          MAGE_POTION_S:
  1949  113f  0101                  db          $01,$01
  1950  1141  00d501                db          $00,$D5,$01
  1951  1144  001401                db          $00,$14,$01
  1952  1147  00c2ff                db          $00,$C2,$FF
  1953                          CHAOS_POTION_S:
  1954  114a  0101                  db          $01,$01
  1955  114c  003f01                db          $00,"?",$01
  1956  114f  001401                db          $00,$14,$01
  1957  1152  00c2ff                db          $00,$C2,$FF
  1958                          POTION_T:
  1959  1155  005502045fff          db          $00,"U",$02,$04,"_",$FF
  1960                          THE_END_PART_A:
  1961  115b  204173746572696f      db          " Asterion, the minotaur ",$FF
              6e2c20746865206d  
              696e6f7461757220  
              ff                
  1962                          THE_END_PART_B:
  1963  1174  2069732064656164      db          " is dead. ",$FF
              2e20ff            
  1964                          COMPASS:
  1965  117f  d76ec901              db          $D7,"n",$C9,$01
  1966  1183  77086501              db          "w\be",$01
  1967  1187  c773d9ff              db          $C7,"s",$D9,$FF
  1968  118b  ff                    db          $FF
  1969  118c  ff                    db          $FF
  1970  118d  ff                    db          $FF
  1971  118e  ff                    db          $FF
  1972  118f  ff                    db          $FF
  1973  1190  ff                    db          $FF
  1974  1191  ff                    db          $FF
  1975  1192  ff                    db          $FF
  1976  1193  ff                    db          $FF
  1977  1194  ff                    db          $FF
  1978  1195  ff                    db          $FF
  1979  1196  ff                    db          $FF
  1980  1197  ff                    db          $FF
  1981  1198  ff                    db          $FF
  1982  1199  ff                    db          $FF
  1983  119a  ff                    db          $FF
  1984  119b  ff                    db          $FF
  1985  119c  ff                    db          $FF
  1986  119d  ff                    db          $FF
  1987  119e  ff                    db          $FF
  1988  119f  ff                    db          $FF
  1989                          DRAW_BKGD:
  1990  11a0  3e20                  LD          A,$20                                  ;Set VIEWPORT fill chars to SPACE
  1991  11a2  212830                LD          HL,$3028
  1992  11a5  011818                LD          BC,$1818                               ;24 x 24 cells
  1993  11a8  cdcb08                CALL        FILL_CHRCOL_RECT
  1994  11ab  0e08                  LD          C,0x8                                   ;8 rows of ceiling
  1995  11ad  212834                LD          HL,$3428
  1996  11b0  3ef0                  LD          A,$f0                                  ;DKGRY on BLK
  1997  11b2  cdce08                CALL        DRAW_CHRCOLS
  1998  11b5  0e06                  LD          C,0x6                                   ;6 more rows of ceiling
  1999  11b7  19                    ADD         HL,DE
  2000  11b8  3e00                  LD          A,0x0                                   ;BLK on BLK
  2001  11ba  cdce08                CALL        DRAW_CHRCOLS
  2002  11bd  0e0a                  LD          C,0xa                                   ;10 rows of floor
  2003  11bf  19                    ADD         HL,DE
  2004  11c0  3edf                  LD          A,$df                                  ;DKGRN on DKGRY
  2005  11c2  cdce08                CALL        DRAW_CHRCOLS
  2006  11c5  3aa33a                LD          A,(CURR_MONSTER_PHYS)
  2007  11c8  fe00                  CP          0x0
  2008  11ca  2816                  JR          Z,NOT_IN_BATTLE
  2009  11cc  3aa23a                LD          A,(CURR_MONSTER_SPRT)
  2010  11cf  fe00                  CP          0x0
  2011  11d1  280f                  JR          Z,NOT_IN_BATTLE
  2012  11d3  cd6932                CALL        REDRAW_MONSTER_HEALTH
  2013  11d6  00                    NOP
  2014  11d7  00                    NOP
  2015  11d8  00                    NOP
  2016  11d9  00                    NOP
  2017  11da  00                    NOP
  2018  11db  00                    NOP
  2019  11dc  00                    NOP
  2020  11dd  00                    NOP
  2021  11de  00                    NOP
  2022  11df  00                    NOP
  2023  11e0  00                    NOP
  2024  11e1  c9                    RET
  2025                          NOT_IN_BATTLE:
  2026  11e2  00                    NOP
  2027  11e3  00                    NOP
  2028  11e4  00                    NOP
  2029  11e5  00                    NOP
  2030  11e6  00                    NOP
  2031  11e7  00                    NOP
  2032  11e8  00                    NOP
  2033  11e9  00                    NOP
  2034  11ea  00                    NOP
  2035  11eb  00                    NOP
  2036  11ec  c9                    RET
  2037  11ed  ff                    db          $FF
  2038  11ee  ff                    db          $FF
  2039  11ef  ff                    db          $FF
  2040  11f0  ff                    db          $FF
  2041  11f1  ff                    db          $FF
  2042  11f2  ff                    db          $FF
  2043  11f3  ff                    db          $FF
  2044  11f4  ff                    db          $FF
  2045  11f5  ff                    db          $FF
  2046  11f6  ff                    db          $FF
  2047  11f7  ff                    db          $FF
  2048  11f8  ff                    db          $FF
  2049  11f9  ff                    db          $FF
  2050  11fa  ff                    db          $FF
  2051  11fb  ff                    db          $FF
  2052  11fc  ff                    db          $FF
  2053  11fd  ff                    db          $FF
  2054                          WIPE_VARIABLE_SPACE:
  2055  11fe  3e00                  LD          A,0x0
  2056  1200  210039                LD          HL,$3900
  2057  1203  06ff                  LD          B,$ff
  2058                          CLEAR_MAP_SPACE:
  2059  1205  77                    LD          (HL),A
  2060  1206  23                    INC         HL
  2061  1207  77                    LD          (HL),A
  2062  1208  23                    INC         HL
  2063  1209  77                    LD          (HL),A
  2064  120a  23                    INC         HL
  2065  120b  10f8                  DJNZ        CLEAR_MAP_SPACE
  2066  120d  21623a                LD          HL,$3a62
  2067  1210  22ba3a                LD          (NEXT_BLINK_CHECK),HL
  2068  1213  c9                    RET
  2069  1214  ff                    db          $FF
  2070  1215  ff                    db          $FF
  2071  1216  ff                    db          $FF
  2072                          DRAW_WHITE_MAP:
  2073  1217  217400                LD          HL,$74
  2074  121a  cd1523                CALL        MAP_ITEM_MONSTER
  2075                          UPDATE_ITEM_CELLS:
  2076  121d  ca9422                JP          Z,DRAW_PURPLE_MAP
  2077  1220  0a                    LD          A,(BC)
  2078  1221  0c                    INC         C
  2079  1222  0c                    INC         C
  2080  1223  d9                    EXX
  2081  1224  16b6                  LD          D,$b6
  2082  1226  cd2723                CALL        UPDATE_COLRAM_FROM_OFFSET
  2083  1229  d9                    EXX
  2084  122a  cd1823                CALL        FIND_NEXT_ITEM_MONSTER_LOOP
  2085  122d  18ee                  JR          UPDATE_ITEM_CELLS
  2086  122f  c39422                JP          DRAW_PURPLE_MAP
  2087  1232  00                    db          $00
  2088                          SHOW_MAP:
  2089  1233  ff                    db          $FF
  2090  1234  ff                    db          $FF
  2091  1235  ff                    db          $FF
  2092  1236  ff                    db          $FF
  2093  1237  ff                    db          $FF
  2094  1238  ff                    db          $FF
  2095  1239  ff                    db          $FF
  2096  123a  ff                    db          $FF
  2097  123b  ff                    db          $FF
  2098  123c  ff                    db          $FF
  2099  123d  ff                    db          $FF
  2100  123e  ff                    db          $FF
  2101  123f  ff                    db          $FF
  2102  1240  ff                    db          $FF
  2103  1241  ff                    db          $FF
  2104  1242  ff                    db          $FF
  2105  1243  ff                    db          $FF
  2106  1244  ff                    db          $FF
  2107  1245  ff                    db          $FF
  2108  1246  ff                    db          $FF
  2109  1247  ff                    db          $FF
  2110  1248  ff                    db          $FF
  2111  1249  ff                    db          $FF
  2112  124a  ff                    db          $FF
  2113  124b  ff                    db          $FF
  2114  124c  ff                    db          $FF
  2115  124d  ff                    db          $FF
  2116  124e  ff                    db          $FF
  2117  124f  ff                    db          $FF
  2118  1250  ff                    db          $FF
  2119  1251  ff                    db          $FF
  2120  1252  ff                    db          $FF
  2121  1253  ff                    db          $FF
  2122  1254  ff                    db          $FF
  2123  1255  ff                    db          $FF
  2124  1256  ff                    db          $FF
  2125  1257  ff                    db          $FF
  2126  1258  ff                    db          $FF
  2127  1259  ff                    db          $FF
  2128  125a  ff                    db          $FF
  2129  125b  ff                    db          $FF
  2130  125c  ff                    db          $FF
  2131  125d  ff                    db          $FF
  2132  125e  ff                    db          $FF
  2133  125f  ff                    db          $FF
  2134  1260  ff                    db          $FF
  2135  1261  ff                    db          $FF
  2136  1262  ff                    db          $FF
  2137  1263  ff                    db          $FF
  2138  1264  ff                    db          $FF
  2139  1265  ff                    db          $FF
  2140  1266  ff                    db          $FF
  2141  1267  ff                    db          $FF
  2142  1268  ff                    db          $FF
  2143  1269  ff                    db          $FF
  2144  126a  ff                    db          $FF
  2145  126b  ff                    db          $FF
  2146  126c  ff                    db          $FF
  2147  126d  ff                    db          $FF
  2148  126e  ff                    db          $FF
  2149  126f  ff                    db          $FF
  2150  1270  ff                    db          $FF
  2151  1271  ff                    db          $FF
  2152  1272  ff                    db          $FF
  2153  1273  ff                    db          $FF
  2154  1274  ff                    db          $FF
  2155  1275  ff                    db          $FF
  2156  1276  ff                    db          $FF
  2157  1277  ff                    db          $FF
  2158  1278  ff                    db          $FF
  2159  1279  ff                    db          $FF
  2160  127a  ff                    db          $FF
  2161  127b  ff                    db          $FF
  2162  127c  ff                    db          $FF
  2163  127d  ff                    db          $FF
  2164  127e  ff                    db          $FF
  2165  127f  ff                    db          $FF
  2166  1280  ff                    db          $FF
  2167  1281  ff                    db          $FF
  2168  1282  ff                    db          $FF
  2169  1283  ff                    db          $FF
  2170  1284  ff                    db          $FF
  2171  1285  ff                    db          $FF
  2172  1286  ff                    db          $FF
  2173  1287  ff                    db          $FF
  2174  1288  ff                    db          $FF
  2175  1289  ff                    db          $FF
  2176  128a  ff                    db          $FF
  2177  128b  ff                    db          $FF
  2178  128c  ff                    db          $FF
  2179  128d  ff                    db          $FF
  2180  128e  ff                    db          $FF
  2181  128f  ff                    db          $FF
  2182  1290  ff                    db          $FF
  2183  1291  ff                    db          $FF
  2184  1292  ff                    db          $FF
  2185  1293  ff                    db          $FF
  2186  1294  ff                    db          $FF
  2187  1295  ff                    db          $FF
  2188  1296  ff                    db          $FF
  2189  1297  ff                    db          $FF
  2190  1298  ff                    db          $FF
  2191  1299  ff                    db          $FF
  2192  129a  ff                    db          $FF
  2193  129b  ff                    db          $FF
  2194  129c  ff                    db          $FF
  2195  129d  ff                    db          $FF
  2196  129e  ff                    db          $FF
  2197  129f  ff                    db          $FF
  2198  12a0  ff                    db          $FF
  2199  12a1  ff                    db          $FF
  2200  12a2  ff                    db          $FF
  2201  12a3  ff                    db          $FF
  2202  12a4  ff                    db          $FF
  2203  12a5  ff                    db          $FF
  2204  12a6  ff                    db          $FF
  2205  12a7  ff                    db          $FF
  2206  12a8  ff                    db          $FF
  2207  12a9  ff                    db          $FF
  2208  12aa  ff                    db          $FF
  2209  12ab  ff                    db          $FF
  2210  12ac  ff                    db          $FF
  2211  12ad  ff                    db          $FF
  2212  12ae  ff                    db          $FF
  2213  12af  ff                    db          $FF
  2214  12b0  ff                    db          $FF
  2215  12b1  ff                    db          $FF
  2216  12b2  ff                    db          $FF
  2217  12b3  ff                    db          $FF
  2218  12b4  ff                    db          $FF
  2219  12b5  ff                    db          $FF
  2220  12b6  ff                    db          $FF
  2221  12b7  ff                    db          $FF
  2222  12b8  ff                    db          $FF
  2223  12b9  ff                    db          $FF
  2224  12ba  ff                    db          $FF
  2225  12bb  ff                    db          $FF
  2226  12bc  ff                    db          $FF
  2227  12bd  ff                    db          $FF
  2228  12be  ff                    db          $FF
  2229  12bf  ff                    db          $FF
  2230  12c0  ff                    db          $FF
  2231  12c1  ff                    db          $FF
  2232  12c2  ff                    db          $FF
  2233  12c3  ff                    db          $FF
  2234  12c4  ff                    db          $FF
  2235  12c5  ff                    db          $FF
  2236  12c6  ff                    db          $FF
  2237  12c7  ff                    db          $FF
  2238  12c8  ff                    db          $FF
  2239  12c9  ff                    db          $FF
  2240  12ca  ff                    db          $FF
  2241  12cb  ff                    db          $FF
  2242  12cc  ff                    db          $FF
  2243  12cd  ff                    db          $FF
  2244  12ce  ff                    db          $FF
  2245  12cf  ff                    db          $FF
  2246  12d0  ff                    db          $FF
  2247  12d1  ff                    db          $FF
  2248  12d2  ff                    db          $FF
  2249  12d3  ff                    db          $FF
  2250  12d4  ff                    db          $FF
  2251  12d5  ff                    db          $FF
  2252  12d6  ff                    db          $FF
  2253  12d7  ff                    db          $FF
  2254  12d8  ff                    db          $FF
  2255  12d9  ff                    db          $FF
  2256  12da  f4                    db          $F4
  2257  12db  ff                    db          $FF
  2258  12dc  ff                    db          $FF
  2259  12dd  ff                    db          $FF
  2260  12de  ff                    db          $FF
  2261  12df  ff                    db          $FF
  2262  12e0  ff                    db          $FF
  2263  12e1  ff                    db          $FF
  2264  12e2  ff                    db          $FF
  2265  12e3  ff                    db          $FF
  2266  12e4  ff                    db          $FF
  2267  12e5  ff                    db          $FF
  2268  12e6  ff                    db          $FF
  2269  12e7  ff                    db          $FF
  2270  12e8  ff                    db          $FF
  2271  12e9  ff                    db          $FF
  2272  12ea  ff                    db          $FF
  2273  12eb  ff                    db          $FF
  2274  12ec  ff                    db          $FF
  2275  12ed  ff                    db          $FF
  2276  12ee  ff                    db          $FF
  2277  12ef  ff                    db          $FF
  2278  12f0  ff                    db          $FF
  2279  12f1  ff                    db          $FF
  2280  12f2  ff                    db          $FF
  2281  12f3  ff                    db          $FF
  2282  12f4  ff                    db          $FF
  2283  12f5  ff                    db          $FF
  2284  12f6  ff                    db          $FF
  2285  12f7  ff                    db          $FF
  2286  12f8  ff                    db          $FF
  2287  12f9  ff                    db          $FF
  2288  12fa  ff                    db          $FF
  2289  12fb  ff                    db          $FF
  2290  12fc  ff                    db          $FF
  2291  12fd  ff                    db          $FF
  2292  12fe  ff                    db          $FF
  2293  12ff  ff                    db          $FF
  2294  1300  ff                    db          $FF
  2295  1301  ff                    db          $FF
  2296  1302  ff                    db          $FF
  2297  1303  ff                    db          $FF
  2298  1304  ff                    db          $FF
  2299  1305  ff                    db          $FF
  2300  1306  ff                    db          $FF
  2301  1307  ff                    db          $FF
  2302  1308  ff                    db          $FF
  2303  1309  ff                    db          $FF
  2304  130a  ff                    db          $FF
  2305  130b  ff                    db          $FF
  2306  130c  ff                    db          $FF
  2307  130d  ff                    db          $FF
  2308  130e  ff                    db          $FF
  2309  130f  ff                    db          $FF
  2310  1310  ff                    db          $FF
  2311  1311  ff                    db          $FF
  2312  1312  ff                    db          $FF
  2313  1313  ff                    db          $FF
  2314  1314  ff                    db          $FF
  2315  1315  ff                    db          $FF
  2316  1316  ff                    db          $FF
  2317  1317  ff                    db          $FF
  2318  1318  ff                    db          $FF
  2319  1319  ff                    db          $FF
  2320  131a  ff                    db          $FF
  2321  131b  ff                    db          $FF
  2322  131c  ff                    db          $FF
  2323  131d  ff                    db          $FF
  2324  131e  ff                    db          $FF
  2325  131f  ff                    db          $FF
  2326  1320  ff                    db          $FF
  2327  1321  ff                    db          $FF
  2328  1322  ff                    db          $FF
  2329  1323  ff                    db          $FF
  2330  1324  ff                    db          $FF
  2331  1325  ff                    db          $FF
  2332  1326  ff                    db          $FF
  2333  1327  ff                    db          $FF
  2334  1328  ff                    db          $FF
  2335  1329  ff                    db          $FF
  2336  132a  ff                    db          $FF
  2337  132b  ff                    db          $FF
  2338  132c  ff                    db          $FF
  2339  132d  ff                    db          $FF
  2340  132e  ff                    db          $FF
  2341  132f  ff                    db          $FF
  2342  1330  ff                    db          $FF
  2343  1331  ff                    db          $FF
  2344  1332  ff                    db          $FF
  2345  1333  ff                    db          $FF
  2346  1334  ff                    db          $FF
  2347  1335  ff                    db          $FF
  2348  1336  ff                    db          $FF
  2349  1337  ff                    db          $FF
  2350  1338  ff                    db          $FF
  2351  1339  ff                    db          $FF
  2352  133a  ff                    db          $FF
  2353  133b  ff                    db          $FF
  2354  133c  ff                    db          $FF
  2355  133d  ff                    db          $FF
  2356  133e  ff                    db          $FF
  2357  133f  ff                    db          $FF
  2358  1340  ff                    db          $FF
  2359  1341  ff                    db          $FF
  2360  1342  ff                    db          $FF
  2361  1343  ff                    db          $FF
  2362  1344  ff                    db          $FF
  2363  1345  ff                    db          $FF
  2364  1346  ff                    db          $FF
  2365  1347  ff                    db          $FF
  2366  1348  ff                    db          $FF
  2367  1349  ff                    db          $FF
  2368  134a  ff                    db          $FF
  2369  134b  ff                    db          $FF
  2370  134c  ff                    db          $FF
  2371  134d  ff                    db          $FF
  2372  134e  ff                    db          $FF
  2373  134f  ff                    db          $FF
  2374  1350  ff                    db          $FF
  2375  1351  ff                    db          $FF
  2376  1352  ff                    db          $FF
  2377  1353  ff                    db          $FF
  2378  1354  ff                    db          $FF
  2379  1355  ff                    db          $FF
  2380  1356  ff                    db          $FF
  2381  1357  ff                    db          $FF
  2382  1358  ff                    db          $FF
  2383  1359  ff                    db          $FF
  2384  135a  ff                    db          $FF
  2385  135b  ff                    db          $FF
  2386  135c  ff                    db          $FF
  2387  135d  ff                    db          $FF
  2388  135e  ff                    db          $FF
  2389  135f  ff                    db          $FF
  2390  1360  ff                    db          $FF
  2391  1361  ff                    db          $FF
  2392  1362  ff                    db          $FF
  2393  1363  ff                    db          $FF
  2394  1364  ff                    db          $FF
  2395  1365  ff                    db          $FF
  2396  1366  ff                    db          $FF
  2397  1367  ff                    db          $FF
  2398  1368  ff                    db          $FF
  2399  1369  ff                    db          $FF
  2400  136a  ff                    db          $FF
  2401  136b  ff                    db          $FF
  2402  136c  ff                    db          $FF
  2403  136d  ff                    db          $FF
  2404  136e  ff                    db          $FF
  2405  136f  ff                    db          $FF
  2406  1370  ff                    db          $FF
  2407  1371  ff                    db          $FF
  2408  1372  ff                    db          $FF
  2409  1373  ff                    db          $FF
  2410  1374  ff                    db          $FF
  2411  1375  ff                    db          $FF
  2412  1376  ff                    db          $FF
  2413  1377  ff                    db          $FF
  2414  1378  ff                    db          $FF
  2415  1379  ff                    db          $FF
  2416  137a  ff                    db          $FF
  2417  137b  ff                    db          $FF
  2418  137c  ff                    db          $FF
  2419  137d  ff                    db          $FF
  2420  137e  ff                    db          $FF
  2421  137f  ff                    db          $FF
  2422  1380  ff                    db          $FF
  2423  1381  ff                    db          $FF
  2424  1382  ff                    db          $FF
  2425  1383  ff                    db          $FF
  2426  1384  ff                    db          $FF
  2427  1385  ff                    db          $FF
  2428  1386  ff                    db          $FF
  2429  1387  ff                    db          $FF
  2430  1388  ff                    db          $FF
  2431  1389  ff                    db          $FF
  2432  138a  ff                    db          $FF
  2433  138b  ff                    db          $FF
  2434  138c  ff                    db          $FF
  2435  138d  ff                    db          $FF
  2436  138e  ff                    db          $FF
  2437  138f  ff                    db          $FF
  2438  1390  ff                    db          $FF
  2439  1391  ff                    db          $FF
  2440  1392  ff                    db          $FF
  2441  1393  ff                    db          $FF
  2442  1394  ff                    db          $FF
  2443  1395  ff                    db          $FF
  2444  1396  ff                    db          $FF
  2445  1397  ff                    db          $FF
  2446  1398  ff                    db          $FF
  2447  1399  ff                    db          $FF
  2448  139a  ff                    db          $FF
  2449  139b  ff                    db          $FF
  2450  139c  ff                    db          $FF
  2451  139d  ff                    db          $FF
  2452  139e  ff                    db          $FF
  2453  139f  ff                    db          $FF
  2454  13a0  ff                    db          $FF
  2455  13a1  ff                    db          $FF
  2456  13a2  ff                    db          $FF
  2457  13a3  ff                    db          $FF
  2458  13a4  ff                    db          $FF
  2459  13a5  ff                    db          $FF
  2460  13a6  ff                    db          $FF
  2461  13a7  ff                    db          $FF
  2462  13a8  ff                    db          $FF
  2463  13a9  ff                    db          $FF
  2464  13aa  ff                    db          $FF
  2465  13ab  ff                    db          $FF
  2466  13ac  ff                    db          $FF
  2467  13ad  ff                    db          $FF
  2468  13ae  ff                    db          $FF
  2469  13af  ff                    db          $FF
  2470  13b0  ff                    db          $FF
  2471  13b1  ff                    db          $FF
  2472  13b2  ff                    db          $FF
  2473  13b3  ff                    db          $FF
  2474  13b4  ff                    db          $FF
  2475  13b5  ff                    db          $FF
  2476  13b6  ff                    db          $FF
  2477  13b7  ff                    db          $FF
  2478  13b8  ff                    db          $FF
  2479  13b9  ff                    db          $FF
  2480  13ba  ff                    db          $FF
  2481  13bb  ff                    db          $FF
  2482  13bc  ff                    db          $FF
  2483  13bd  ff                    db          $FF
  2484  13be  ff                    db          $FF
  2485  13bf  ff                    db          $FF
  2486  13c0  ff                    db          $FF
  2487  13c1  ff                    db          $FF
  2488  13c2  ff                    db          $FF
  2489  13c3  ff                    db          $FF
  2490  13c4  ff                    db          $FF
  2491  13c5  ff                    db          $FF
  2492  13c6  ff                    db          $FF
  2493  13c7  ff                    db          $FF
  2494  13c8  ff                    db          $FF
  2495  13c9  ff                    db          $FF
  2496  13ca  ff                    db          $FF
  2497  13cb  ff                    db          $FF
  2498  13cc  ff                    db          $FF
  2499  13cd  ff                    db          $FF
  2500  13ce  ff                    db          $FF
  2501  13cf  ff                    db          $FF
  2502  13d0  ff                    db          $FF
  2503  13d1  ff                    db          $FF
  2504  13d2  ff                    db          $FF
  2505  13d3  ff                    db          $FF
  2506  13d4  ff                    db          $FF
  2507  13d5  ff                    db          $FF
  2508  13d6  ff                    db          $FF
  2509  13d7  ff                    db          $FF
  2510  13d8  ff                    db          $FF
  2511  13d9  ff                    db          $FF
  2512  13da  ff                    db          $FF
  2513  13db  ff                    db          $FF
  2514  13dc  ff                    db          $FF
  2515  13dd  ff                    db          $FF
  2516  13de  ff                    db          $FF
  2517  13df  ff                    db          $FF
  2518  13e0  ff                    db          $FF
  2519  13e1  ff                    db          $FF
  2520  13e2  ff                    db          $FF
  2521  13e3  ff                    db          $FF
  2522  13e4  ff                    db          $FF
  2523  13e5  ff                    db          $FF
  2524  13e6  ff                    db          $FF
  2525  13e7  ff                    db          $FF
  2526  13e8  ff                    db          $FF
  2527  13e9  ff                    db          $FF
  2528  13ea  ff                    db          $FF
  2529  13eb  ff                    db          $FF
  2530  13ec  ff                    db          $FF
  2531  13ed  ff                    db          $FF
  2532  13ee  ff                    db          $FF
  2533  13ef  ff                    db          $FF
  2534  13f0  ff                    db          $FF
  2535  13f1  ff                    db          $FF
  2536  13f2  ff                    db          $FF
  2537  13f3  ff                    db          $FF
  2538  13f4  ff                    db          $FF
  2539  13f5  ff                    db          $FF
  2540  13f6  ff                    db          $FF
  2541  13f7  ff                    db          $FF
  2542  13f8  ff                    db          $FF
  2543  13f9  ff                    db          $FF
  2544  13fa  ff                    db          $FF
  2545  13fb  ff                    db          $FF
  2546  13fc  ff                    db          $FF
  2547  13fd  ff                    db          $FF
  2548  13fe  ff                    db          $FF
  2549  13ff  ff                    db          $FF
  2550  1400  ff                    db          $FF
  2551  1401  ff                    db          $FF
  2552  1402  ff                    db          $FF
  2553  1403  ff                    db          $FF
  2554  1404  ff                    db          $FF
  2555  1405  ff                    db          $FF
  2556  1406  ff                    db          $FF
  2557  1407  ff                    db          $FF
  2558  1408  ff                    db          $FF
  2559  1409  ff                    db          $FF
  2560  140a  ff                    db          $FF
  2561  140b  ff                    db          $FF
  2562  140c  ff                    db          $FF
  2563  140d  ff                    db          $FF
  2564  140e  ff                    db          $FF
  2565  140f  ff                    db          $FF
  2566  1410  ff                    db          $FF
  2567  1411  ff                    db          $FF
  2568  1412  ff                    db          $FF
  2569  1413  ff                    db          $FF
  2570  1414  ff                    db          $FF
  2571  1415  ff                    db          $FF
  2572  1416  ff                    db          $FF
  2573  1417  ff                    db          $FF
  2574  1418  ff                    db          $FF
  2575  1419  ff                    db          $FF
  2576  141a  ff                    db          $FF
  2577  141b  ff                    db          $FF
  2578  141c  ff                    db          $FF
  2579  141d  ff                    db          $FF
  2580  141e  ff                    db          $FF
  2581  141f  ff                    db          $FF
  2582  1420  ff                    db          $FF
  2583  1421  ff                    db          $FF
  2584  1422  ff                    db          $FF
  2585  1423  ff                    db          $FF
  2586  1424  ff                    db          $FF
  2587  1425  ff                    db          $FF
  2588  1426  ff                    db          $FF
  2589  1427  ff                    db          $FF
  2590  1428  ff                    db          $FF
  2591  1429  ff                    db          $FF
  2592  142a  ff                    db          $FF
  2593  142b  ff                    db          $FF
  2594  142c  ff                    db          $FF
  2595  142d  ff                    db          $FF
  2596  142e  ff                    db          $FF
  2597  142f  ff                    db          $FF
  2598  1430  ff                    db          $FF
  2599  1431  ff                    db          $FF
  2600  1432  ff                    db          $FF
  2601  1433  ff                    db          $FF
  2602  1434  ff                    db          $FF
  2603  1435  ff                    db          $FF
  2604  1436  ff                    db          $FF
  2605  1437  ff                    db          $FF
  2606  1438  ff                    db          $FF
  2607  1439  ff                    db          $FF
  2608  143a  ff                    db          $FF
  2609  143b  ff                    db          $FF
  2610  143c  ff                    db          $FF
  2611  143d  ff                    db          $FF
  2612  143e  ff                    db          $FF
  2613  143f  ff                    db          $FF
  2614  1440  ff                    db          $FF
  2615  1441  ff                    db          $FF
  2616  1442  ff                    db          $FF
  2617  1443  ff                    db          $FF
  2618  1444  ff                    db          $FF
  2619  1445  ff                    db          $FF
  2620  1446  ff                    db          $FF
  2621  1447  ff                    db          $FF
  2622  1448  ff                    db          $FF
  2623  1449  ff                    db          $FF
  2624  144a  ff                    db          $FF
  2625  144b  ff                    db          $FF
  2626  144c  ff                    db          $FF
  2627  144d  ff                    db          $FF
  2628  144e  ff                    db          $FF
  2629  144f  ff                    db          $FF
  2630  1450  ff                    db          $FF
  2631  1451  ff                    db          $FF
  2632  1452  ff                    db          $FF
  2633  1453  ff                    db          $FF
  2634  1454  ff                    db          $FF
  2635  1455  ff                    db          $FF
  2636  1456  ff                    db          $FF
  2637  1457  ff                    db          $FF
  2638  1458  ff                    db          $FF
  2639  1459  ff                    db          $FF
  2640  145a  ff                    db          $FF
  2641  145b  ff                    db          $FF
  2642  145c  ff                    db          $FF
  2643  145d  ff                    db          $FF
  2644  145e  ff                    db          $FF
  2645  145f  ff                    db          $FF
  2646  1460  ff                    db          $FF
  2647  1461  ff                    db          $FF
  2648  1462  ff                    db          $FF
  2649  1463  ff                    db          $FF
  2650  1464  ff                    db          $FF
  2651  1465  ff                    db          $FF
  2652  1466  ff                    db          $FF
  2653  1467  ff                    db          $FF
  2654  1468  ff                    db          $FF
  2655  1469  ff                    db          $FF
  2656  146a  ff                    db          $FF
  2657  146b  ff                    db          $FF
  2658  146c  ff                    db          $FF
  2659  146d  ff                    db          $FF
  2660  146e  ff                    db          $FF
  2661  146f  ff                    db          $FF
  2662  1470  ff                    db          $FF
  2663  1471  ff                    db          $FF
  2664  1472  ff                    db          $FF
  2665  1473  ff                    db          $FF
  2666  1474  ff                    db          $FF
  2667  1475  ff                    db          $FF
  2668  1476  ff                    db          $FF
  2669  1477  ff                    db          $FF
  2670  1478  ff                    db          $FF
  2671  1479  ff                    db          $FF
  2672  147a  ff                    db          $FF
  2673  147b  ff                    db          $FF
  2674  147c  fa                    db          $FA
  2675  147d  ff                    db          $FF
  2676  147e  ff                    db          $FF
  2677  147f  ff                    db          $FF
  2678  1480  ff                    db          $FF
  2679  1481  ff                    db          $FF
  2680  1482  ff                    db          $FF
  2681  1483  ff                    db          $FF
  2682  1484  ff                    db          $FF
  2683  1485  ff                    db          $FF
  2684  1486  ff                    db          $FF
  2685  1487  ff                    db          $FF
  2686  1488  ff                    db          $FF
  2687  1489  ff                    db          $FF
  2688  148a  ff                    db          $FF
  2689  148b  ff                    db          $FF
  2690  148c  ff                    db          $FF
  2691  148d  ff                    db          $FF
  2692  148e  ff                    db          $FF
  2693  148f  ff                    db          $FF
  2694  1490  ff                    db          $FF
  2695  1491  ff                    db          $FF
  2696  1492  ff                    db          $FF
  2697  1493  ff                    db          $FF
  2698  1494  ff                    db          $FF
  2699  1495  ff                    db          $FF
  2700  1496  ff                    db          $FF
  2701  1497  ff                    db          $FF
  2702  1498  ff                    db          $FF
  2703  1499  ff                    db          $FF
  2704  149a  ff                    db          $FF
  2705  149b  ff                    db          $FF
  2706  149c  ff                    db          $FF
  2707  149d  ff                    db          $FF
  2708  149e  ff                    db          $FF
  2709  149f  ff                    db          $FF
  2710  14a0  ff                    db          $FF
  2711  14a1  ff                    db          $FF
  2712  14a2  ff                    db          $FF
  2713  14a3  ff                    db          $FF
  2714  14a4  ff                    db          $FF
  2715  14a5  ff                    db          $FF
  2716  14a6  ff                    db          $FF
  2717  14a7  ff                    db          $FF
  2718  14a8  ff                    db          $FF
  2719  14a9  ff                    db          $FF
  2720  14aa  ff                    db          $FF
  2721  14ab  ff                    db          $FF
  2722  14ac  ff                    db          $FF
  2723  14ad  ff                    db          $FF
  2724  14ae  ff                    db          $FF
  2725  14af  ff                    db          $FF
  2726  14b0  ff                    db          $FF
  2727  14b1  ff                    db          $FF
  2728  14b2  ff                    db          $FF
  2729  14b3  ff                    db          $FF
  2730  14b4  ff                    db          $FF
  2731  14b5  ff                    db          $FF
  2732  14b6  ff                    db          $FF
  2733  14b7  ff                    db          $FF
  2734  14b8  ff                    db          $FF
  2735  14b9  ff                    db          $FF
  2736  14ba  ff                    db          $FF
  2737  14bb  ff                    db          $FF
  2738  14bc  ff                    db          $FF
  2739  14bd  ff                    db          $FF
  2740  14be  ff                    db          $FF
  2741  14bf  ff                    db          $FF
  2742  14c0  ff                    db          $FF
  2743  14c1  ff                    db          $FF
  2744  14c2  ff                    db          $FF
  2745  14c3  ff                    db          $FF
  2746  14c4  ff                    db          $FF
  2747  14c5  ff                    db          $FF
  2748  14c6  ff                    db          $FF
  2749  14c7  ff                    db          $FF
  2750  14c8  ff                    db          $FF
  2751  14c9  ff                    db          $FF
  2752  14ca  ff                    db          $FF
  2753  14cb  ff                    db          $FF
  2754  14cc  ff                    db          $FF
  2755  14cd  ff                    db          $FF
  2756  14ce  ff                    db          $FF
  2757  14cf  ff                    db          $FF
  2758  14d0  ff                    db          $FF
  2759  14d1  ff                    db          $FF
  2760  14d2  ff                    db          $FF
  2761  14d3  ff                    db          $FF
  2762  14d4  ff                    db          $FF
  2763  14d5  ff                    db          $FF
  2764  14d6  ff                    db          $FF
  2765  14d7  ff                    db          $FF
  2766  14d8  ff                    db          $FF
  2767  14d9  ff                    db          $FF
  2768  14da  ff                    db          $FF
  2769  14db  ff                    db          $FF
  2770  14dc  ff                    db          $FF
  2771  14dd  ff                    db          $FF
  2772  14de  ff                    db          $FF
  2773  14df  ff                    db          $FF
  2774  14e0  ff                    db          $FF
  2775  14e1  ff                    db          $FF
  2776  14e2  ff                    db          $FF
  2777  14e3  ff                    db          $FF
  2778  14e4  ff                    db          $FF
  2779  14e5  ff                    db          $FF
  2780  14e6  ff                    db          $FF
  2781  14e7  ff                    db          $FF
  2782  14e8  ff                    db          $FF
  2783  14e9  ff                    db          $FF
  2784  14ea  ff                    db          $FF
  2785  14eb  ff                    db          $FF
  2786  14ec  ff                    db          $FF
  2787  14ed  ff                    db          $FF
  2788  14ee  ff                    db          $FF
  2789  14ef  ff                    db          $FF
  2790  14f0  ff                    db          $FF
  2791  14f1  ff                    db          $FF
  2792  14f2  ff                    db          $FF
  2793  14f3  ff                    db          $FF
  2794  14f4  ff                    db          $FF
  2795  14f5  ff                    db          $FF
  2796  14f6  ff                    db          $FF
  2797  14f7  ff                    db          $FF
  2798  14f8  ff                    db          $FF
  2799  14f9  ff                    db          $FF
  2800  14fa  ff                    db          $FF
  2801  14fb  ff                    db          $FF
  2802  14fc  ff                    db          $FF
  2803  14fd  ff                    db          $FF
  2804  14fe  ff                    db          $FF
  2805  14ff  ff                    db          $FF
  2806  1500  ff                    db          $FF
  2807  1501  ff                    db          $FF
  2808  1502  ff                    db          $FF
  2809  1503  ff                    db          $FF
  2810  1504  ff                    db          $FF
  2811  1505  ff                    db          $FF
  2812  1506  ff                    db          $FF
  2813  1507  ff                    db          $FF
  2814  1508  ff                    db          $FF
  2815  1509  ff                    db          $FF
  2816  150a  ff                    db          $FF
  2817  150b  ff                    db          $FF
  2818  150c  ff                    db          $FF
  2819  150d  ff                    db          $FF
  2820  150e  ff                    db          $FF
  2821  150f  ff                    db          $FF
  2822  1510  ff                    db          $FF
  2823  1511  ff                    db          $FF
  2824  1512  ff                    db          $FF
  2825  1513  ff                    db          $FF
  2826  1514  ff                    db          $FF
  2827  1515  ff                    db          $FF
  2828  1516  ff                    db          $FF
  2829  1517  ff                    db          $FF
  2830  1518  ff                    db          $FF
  2831  1519  ff                    db          $FF
  2832  151a  ff                    db          $FF
  2833  151b  ff                    db          $FF
  2834  151c  ff                    db          $FF
  2835  151d  ff                    db          $FF
  2836  151e  ff                    db          $FF
  2837  151f  ff                    db          $FF
  2838  1520  ff                    db          $FF
  2839  1521  ff                    db          $FF
  2840  1522  ff                    db          $FF
  2841  1523  ff                    db          $FF
  2842  1524  ff                    db          $FF
  2843  1525  ff                    db          $FF
  2844  1526  ff                    db          $FF
  2845  1527  ff                    db          $FF
  2846  1528  ff                    db          $FF
  2847  1529  ff                    db          $FF
  2848  152a  ff                    db          $FF
  2849  152b  ff                    db          $FF
  2850  152c  ff                    db          $FF
  2851  152d  ff                    db          $FF
  2852  152e  ff                    db          $FF
  2853  152f  ff                    db          $FF
  2854  1530  ff                    db          $FF
  2855  1531  ff                    db          $FF
  2856  1532  ff                    db          $FF
  2857  1533  ff                    db          $FF
  2858  1534  ff                    db          $FF
  2859  1535  ff                    db          $FF
  2860  1536  ff                    db          $FF
  2861  1537  ff                    db          $FF
  2862  1538  ff                    db          $FF
  2863  1539  ff                    db          $FF
  2864  153a  ff                    db          $FF
  2865  153b  ff                    db          $FF
  2866  153c  ff                    db          $FF
  2867  153d  ff                    db          $FF
  2868  153e  ff                    db          $FF
  2869  153f  ff                    db          $FF
  2870  1540  ff                    db          $FF
  2871  1541  ff                    db          $FF
  2872  1542  ff                    db          $FF
  2873  1543  ff                    db          $FF
  2874  1544  ff                    db          $FF
  2875  1545  ff                    db          $FF
  2876  1546  ff                    db          $FF
  2877  1547  ff                    db          $FF
  2878  1548  ff                    db          $FF
  2879  1549  ff                    db          $FF
  2880  154a  ff                    db          $FF
  2881  154b  ff                    db          $FF
  2882  154c  ff                    db          $FF
  2883  154d  ff                    db          $FF
  2884  154e  ff                    db          $FF
  2885  154f  ff                    db          $FF
  2886  1550  ff                    db          $FF
  2887  1551  ff                    db          $FF
  2888  1552  ff                    db          $FF
  2889  1553  ff                    db          $FF
  2890  1554  ff                    db          $FF
  2891  1555  ff                    db          $FF
  2892  1556  ff                    db          $FF
  2893  1557  ff                    db          $FF
  2894  1558  ff                    db          $FF
  2895  1559  ff                    db          $FF
  2896  155a  ff                    db          $FF
  2897  155b  ff                    db          $FF
  2898  155c  ff                    db          $FF
  2899  155d  ff                    db          $FF
  2900  155e  ff                    db          $FF
  2901  155f  ff                    db          $FF
  2902  1560  ff                    db          $FF
  2903  1561  ff                    db          $FF
  2904  1562  ff                    db          $FF
  2905  1563  ff                    db          $FF
  2906  1564  ff                    db          $FF
  2907  1565  ff                    db          $FF
  2908  1566  ff                    db          $FF
  2909  1567  ff                    db          $FF
  2910  1568  ff                    db          $FF
  2911  1569  ff                    db          $FF
  2912  156a  ff                    db          $FF
  2913  156b  ff                    db          $FF
  2914  156c  ff                    db          $FF
  2915  156d  ff                    db          $FF
  2916  156e  ff                    db          $FF
  2917  156f  ff                    db          $FF
  2918  1570  ff                    db          $FF
  2919  1571  ff                    db          $FF
  2920  1572  ff                    db          $FF
  2921  1573  ff                    db          $FF
  2922  1574  ff                    db          $FF
  2923  1575  ff                    db          $FF
  2924  1576  ff                    db          $FF
  2925  1577  ff                    db          $FF
  2926  1578  ff                    db          $FF
  2927  1579  ff                    db          $FF
  2928  157a  ff                    db          $FF
  2929  157b  ff                    db          $FF
  2930  157c  ff                    db          $FF
  2931  157d  ff                    db          $FF
  2932  157e  ff                    db          $FF
  2933  157f  ff                    db          $FF
  2934  1580  ff                    db          $FF
  2935  1581  ff                    db          $FF
  2936  1582  ff                    db          $FF
  2937  1583  ff                    db          $FF
  2938  1584  ff                    db          $FF
  2939  1585  ff                    db          $FF
  2940  1586  ff                    db          $FF
  2941  1587  ff                    db          $FF
  2942  1588  ff                    db          $FF
  2943  1589  ff                    db          $FF
  2944  158a  ff                    db          $FF
  2945  158b  ff                    db          $FF
  2946  158c  ff                    db          $FF
  2947  158d  ff                    db          $FF
  2948  158e  ff                    db          $FF
  2949  158f  ff                    db          $FF
  2950  1590  ff                    db          $FF
  2951  1591  ff                    db          $FF
  2952  1592  ff                    db          $FF
  2953  1593  ff                    db          $FF
  2954  1594  ff                    db          $FF
  2955  1595  ff                    db          $FF
  2956  1596  ff                    db          $FF
  2957  1597  ff                    db          $FF
  2958  1598  ff                    db          $FF
  2959  1599  ff                    db          $FF
  2960  159a  ff                    db          $FF
  2961  159b  ff                    db          $FF
  2962  159c  ff                    db          $FF
  2963  159d  ff                    db          $FF
  2964  159e  ff                    db          $FF
  2965  159f  ff                    db          $FF
  2966  15a0  ff                    db          $FF
  2967  15a1  ff                    db          $FF
  2968  15a2  ff                    db          $FF
  2969  15a3  ff                    db          $FF
  2970  15a4  ff                    db          $FF
  2971  15a5  ff                    db          $FF
  2972  15a6  ff                    db          $FF
  2973  15a7  ff                    db          $FF
  2974  15a8  ff                    db          $FF
  2975  15a9  ff                    db          $FF
  2976  15aa  ff                    db          $FF
  2977  15ab  ff                    db          $FF
  2978  15ac  ff                    db          $FF
  2979  15ad  ff                    db          $FF
  2980  15ae  ff                    db          $FF
  2981  15af  ff                    db          $FF
  2982                          PLAY_POOF_ANIM:
  2983  15b0  e5                    PUSH        HL                                      ;Save HL register value
  2984  15b1  11b701                LD          DE,POOF_1                               ;DE = Start of POOF animation graphic
  2985  15b4  0670                  LD          B,$70                                  ;Set color to WHT on BLK
  2986  15b6  d9                    EXX                                                 ;Swap BC DE HL with BC' DE' HL'
  2987  15b7  cd720d                CALL        POOF_SOUND
  2988  15ba  d9                    EXX                                                 ;Swap BC DE HL with BC' DE' HL'
  2989  15bb  cd3533                CALL        GFX_DRAW
  2990  15be  e1                    POP         HL                  ;Restore DE register value
  2991  15bf  cdef15                CALL        TOGGLE_ITEM_POOF_AND_WAIT
  2992  15c2  e5                    PUSH        HL
  2993  15c3  cd3533                CALL        GFX_DRAW
  2994  15c6  e1                    POP         HL
  2995  15c7  d5                    PUSH        DE
  2996  15c8  112900                LD          DE,$29
  2997  15cb  ed52                  SBC         HL,DE
  2998  15cd  d1                    POP         DE                              ;= $D7,$C9,$01
  2999  15ce  cdef15                CALL        TOGGLE_ITEM_POOF_AND_WAIT
  3000  15d1  e5                    PUSH        HL
  3001  15d2  cd3533                CALL        GFX_DRAW
  3002  15d5  e1                    POP         HL
  3003  15d6  e5                    PUSH        HL
  3004  15d7  0680                  LD          B,$80
  3005  15d9  cd3533                CALL        GFX_DRAW
  3006  15dc  cdef15                CALL        TOGGLE_ITEM_POOF_AND_WAIT
  3007  15df  e1                    POP         HL
  3008  15e0  e5                    PUSH        HL
  3009  15e1  cd3533                CALL        GFX_DRAW
  3010  15e4  cdef15                CALL        TOGGLE_ITEM_POOF_AND_WAIT
  3011  15e7  06d0                  LD          B,$d0
  3012  15e9  e1                    POP         HL
  3013  15ea  cd3533                CALL        GFX_DRAW
  3014  15ed  08                    EX          AF,AF'
  3015  15ee  c9                    RET
  3016                          TOGGLE_ITEM_POOF_AND_WAIT:
  3017  15ef  d9                    EXX
  3018  15f0  010032                LD          BC,DAT_ram_3200                         ;= $20
  3019  15f3  cd4b1d                CALL        SLEEP                                   ;byte SLEEP(short cycleCount)
  3020  15f6  d9                    EXX
  3021  15f7  c9                    RET
  3022  15f8  ff                    db          $FF
  3023  15f9  ff                    db          $FF
  3024  15fa  ff                    db          $FF
  3025  15fb  ff                    db          $FF
  3026  15fc  ff                    db          $FF
  3027  15fd  ff                    db          $FF
  3028  15fe  ff                    db          $FF
  3029  15ff  ff                    db          $FF
  3030  1600  ff                    db          $FF
  3031  1601  ff                    db          $FF
  3032  1602  ff                    db          $FF
  3033  1603  ff                    db          $FF
  3034  1604  ff                    db          $FF
  3035  1605  ff                    db          $FF
  3036  1606  ff                    db          $FF
  3037  1607  ff                    db          $FF
  3038  1608  ff                    db          $FF
  3039  1609  ff                    db          $FF
  3040  160a  ff                    db          $FF
  3041  160b  ff                    db          $FF
  3042  160c  ff                    db          $FF
  3043  160d  ff                    db          $FF
  3044  160e  ff                    db          $FF
  3045  160f  ff                    db          $FF
  3046                          MONSTER_KILLED:
  3047  1610  213b32                LD          HL,CHRRAM_MONSTER_POOF_IDX              ;= $20
  3048  1613  cdb015                CALL        PLAY_POOF_ANIM
  3049  1616  3a793a                LD          A,(PLAYER_MAP_POS)                      ;A  = Player position in map
  3050  1619  2a603a                LD          HL,(DIR_FACING_FW)                      ;HL = FW adjustment value
  3051  161c  84                    ADD         A,H                                     ;A  = Player position in map
  3052                                                                                  ;one step forward
  3053  161d  cdf337                CALL        ITEM_MAP_CHECK                          ;Upon return,
  3054                                                                                  ;A  = itemNum one step forward
  3055                                                                                  ;BC = itemMapRAMLocation
  3056  1620  fe9f                  CP          $9f                                    ;Check to see if it is
  3057                                                                                  ;the Minotaur ($9f)
  3058  1622  caf43a                JP          Z,MINOTAUR_DEAD
  3059  1625  3efe                  LD          A,$fe                                  ;A  = $fe (empty item space)
  3060  1627  02                    LD          (BC),A                                  ;itemMapLocRAM = $fe (empty)
  3061  1628  cdab25                CALL        CLEAR_MONSTER_STATS
  3062  162b  00                    db          $00
  3063  162c  00                    db          $00
  3064  162d  00                    db          $00
  3065  162e  00                    db          $00
  3066  162f  00                    db          $00
  3067  1630  00                    db          $00
  3068  1631  00                    db          $00
  3069  1632  00                    db          $00
  3070  1633  00                    db          $00
  3071  1634  00                    db          $00
  3072  1635  00                    db          $00
  3073  1636  00                    db          $00
  3074  1637  00                    db          $00
  3075  1638  00                    db          $00
  3076  1639  00                    db          $00
  3077  163a  00                    db          $00
  3078  163b  00                    db          $00
  3079  163c  00                    db          $00
  3080  163d  00                    db          $00
  3081  163e  00                    db          $00
  3082  163f  00                    db          $00
  3083  1640  00                    db          $00
  3084  1641  00                    db          $00
  3085  1642  e1                    POP         HL
  3086  1643  c3962a                JP          UPDATE_VIEWPORT
  3087                          TOGGLE_SHIFT_MODE:
  3088  1646  3ab93a                LD          A,(GAME_BOOLEANS)
  3089  1649  cb4f                  BIT         0x1,A                                   ;NZ if SHIFT MODE
  3090  164b  200d                  JR          NZ,RESET_SHIFT_MODE
  3091                          SET_SHIFT_MODE:
  3092  164d  cbcf                  SET         0x1,A                                   ;Set SHIFT MODE boolean
  3093  164f  32b93a                LD          (GAME_BOOLEANS),A
  3094  1652  3ed0                  LD          A,$d0                                  ;DKGRN on BLK
  3095  1654  320534                LD          (COLRAM_SHIFT_MODE_IDX),A               ;= $60    `
  3096  1657  c39c2a                JP          INPUT_DEBOUNCE
  3097                          RESET_SHIFT_MODE:
  3098  165a  3ab93a                LD          A,(GAME_BOOLEANS)                       ;Reset SHIFT MODE boolean
  3099  165d  cb8f                  RES         0x1,A
  3100  165f  32b93a                LD          (GAME_BOOLEANS),A
  3101  1662  3ef0                  LD          A,$f0
  3102  1664  320534                LD          (COLRAM_SHIFT_MODE_IDX),A               ;= $60    `
  3103  1667  c39c2a                JP          INPUT_DEBOUNCE
  3104                          SHOW_AUTHOR:
  3105  166a  214833                LD          HL,CHRRAM_AUTHORS_IDX                   ;= $20
  3106  166d  111104                LD          DE,AUTHORS                              ;= "   Originally programmed by Tom L...
  3107  1670  0620                  LD          B,$20
  3108  1672  cd3533                CALL        GFX_DRAW
  3109  1675  3eff                  LD          A,$ff
  3110  1677  c39f2a                JP          WAIT_FOR_INPUT
  3111                          TIMER_UPDATE:
  3112  167a  2a693a                LD          HL,(TIMER_A)
  3113  167d  010100                LD          BC,0x1
  3114  1680  09                    ADD         HL,BC
  3115  1681  22693a                LD          (TIMER_A),HL
  3116  1684  c9                    RET
  3117                          BLINK_ROUTINE:
  3118  1685  f5                    PUSH        AF
  3119  1686  3ab93a                LD          A,(GAME_BOOLEANS)
  3120  1689  cb47                  BIT         0x0,A
  3121  168b  2807                  JR          Z,STILL_ON_TITLE
  3122  168d  1803                  JR          BLINK_EXIT_AF
  3123                          BLINK_EXIT_ALL:
  3124  168f  d1                    POP         DE
  3125  1690  e1                    POP         HL
  3126                          BLINK_EXIT_BCAF:
  3127  1691  c1                    POP         BC
  3128                          BLINK_EXIT_AF:
  3129  1692  f1                    POP         AF
  3130  1693  c9                    RET
  3131                          STILL_ON_TITLE:
  3132  1694  c5                    PUSH        BC
  3133  1695  3a6a3a                LD          A,(TIMER_B)
  3134  1698  47                    LD          B,A
  3135  1699  3aba3a                LD          A,(NEXT_BLINK_CHECK)
  3136  169c  b8                    CP          B
  3137  169d  20f2                  JR          NZ,BLINK_EXIT_BCAF
  3138  169f  ed5f                  LD          A,R
  3139  16a1  32ba3a                LD          (NEXT_BLINK_CHECK),A
  3140  16a4  e5                    PUSH        HL
  3141  16a5  d5                    PUSH        DE
  3142  16a6  cdcb16                CALL        DO_CLOSE_EYES
  3143  16a9  010080                LD          BC,$8000
  3144  16ac  cd4b1d                CALL        SLEEP                                   ;byte SLEEP(short cycleCount)
  3145  16af  cdb416                CALL        DO_OPEN_EYES
  3146  16b2  18db                  JR          BLINK_EXIT_ALL
  3147                          DO_OPEN_EYES:
  3148  16b4  11d632                LD          DE,$32d6
  3149  16b7  21d6da                LD          HL,$dad6
  3150  16ba  014400                LD          BC,$44
  3151  16bd  edb0                  LDIR
  3152  16bf  11d636                LD          DE,$36d6
  3153  16c2  21d6de                LD          HL,$ded6
  3154  16c5  014400                LD          BC,$44
  3155  16c8  edb0                  LDIR
  3156  16ca  c9                    RET
  3157                          DO_CLOSE_EYES:
  3158  16cb  21d632                LD          HL,$32d6
  3159  16ce  01d0d1                LD          BC,$d1d0
  3160  16d1  70                    LD          (HL),B
  3161  16d2  23                    INC         HL
  3162  16d3  70                    LD          (HL),B
  3163  16d4  111a00                LD          DE,$1a
  3164  16d7  19                    ADD         HL,DE
  3165  16d8  70                    LD          (HL),B
  3166  16d9  2b                    DEC         HL
  3167  16da  70                    LD          (HL),B
  3168  16db  21fe32                LD          HL,$32fe
  3169  16de  71                    LD          (HL),C
  3170  16df  23                    INC         HL
  3171  16e0  70                    LD          (HL),B
  3172  16e1  19                    ADD         HL,DE
  3173  16e2  70                    LD          (HL),B
  3174  16e3  2b                    DEC         HL
  3175  16e4  71                    LD          (HL),C
  3176  16e5  21d636                LD          HL,$36d6
  3177  16e8  010ff0                LD          BC,$f00f
  3178  16eb  70                    LD          (HL),B
  3179  16ec  23                    INC         HL
  3180  16ed  71                    LD          (HL),C
  3181  16ee  19                    ADD         HL,DE
  3182  16ef  71                    LD          (HL),C
  3183  16f0  2b                    DEC         HL
  3184  16f1  70                    LD          (HL),B
  3185  16f2  21fe36                LD          HL,$36fe
  3186  16f5  70                    LD          (HL),B
  3187  16f6  23                    INC         HL
  3188  16f7  70                    LD          (HL),B
  3189  16f8  19                    ADD         HL,DE
  3190  16f9  70                    LD          (HL),B
  3191  16fa  2b                    DEC         HL
  3192  16fb  70                    LD          (HL),B
  3193  16fc  c9                    RET
  3194  16fd  00                    db          $00
  3195  16fe  00                    db          $00
  3196  16ff  00                    db          $00
  3197                          DRAW_ICON_BAR:
  3198  1700  f5                    PUSH        AF
  3199  1701  e5                    PUSH        HL
  3200  1702  210130                LD          HL,CHRRAM_LEVEL_IND_L                   ;= $20
  3201  1705  3685                  LD          (HL),$85           ;Right side halftone CHR
  3202  1707  23                    INC         HL
  3203  1708  23                    INC         HL
  3204  1709  23                    INC         HL
  3205  170a  3695                  LD          (HL),$95           ;Left side halftone CHR
  3206  170c  23                    INC         HL
  3207  170d  3608                  LD          (HL),0x8         ;Up arrow CHR
  3208  170f  23                    INC         HL
  3209  1710  23                    INC         HL
  3210  1711  3648                  LD          (HL),$48            ;Ladder (H) CHR
  3211  1713  23                    INC         HL
  3212  1714  23                    INC         HL
  3213  1715  36d3                  LD          (HL),$d3              ;Item CHR
  3214  1717  23                    INC         HL
  3215  1718  23                    INC         HL
  3216  1719  3693                  LD          (HL),$93           ;Monster CHR
  3217  171b  23                    INC         HL
  3218  171c  23                    INC         HL
  3219  171d  3685                  LD          (HL),$85              ;Right side halftone CHR
  3220  171f  00                    NOP
  3221  1720  00                    NOP
  3222  1721  23                    INC         HL
  3223  1722  23                    INC         HL
  3224  1723  23                    INC         HL
  3225  1724  23                    INC         HL                                      ;Map CHR
  3226  1725  36d1                  LD          (HL),$d1               ;= $20
  3227  1727  23                    INC         HL
  3228  1728  23                    INC         HL                                      ;Armor CHR
  3229  1729  369d                  LD          (HL),$9d             ;= $20
  3230  172b  23                    INC         HL
  3231  172c  23                    INC         HL                                      ;Helmet CHR
  3232  172d  360e                  LD          (HL),0xe             ;= $20
  3233  172f  23                    INC         HL
  3234  1730  23                    INC         HL                                      ;Ring (o) CHR
  3235  1731  366f                  LD          (HL),$6f              ;= $20
  3236  1733  00                    NOP
  3237  1734  00                    NOP
  3238  1735  00                    NOP
  3239  1736  00                    NOP
  3240  1737  00                    NOP
  3241  1738  00                    NOP
  3242  1739  00                    NOP
  3243  173a  00                    NOP
  3244  173b  00                    NOP
  3245  173c  00                    NOP
  3246  173d  e1                    POP         HL
  3247  173e  f1                    POP         AF
  3248  173f  c9                    RET
  3249                          DRAW_COMPASS:
  3250  1740  f5                    PUSH        AF                                      ;DKBLU on BLK
  3251  1741  c5                    PUSH        BC
  3252  1742  e5                    PUSH        HL
  3253  1743  d5                    PUSH        DE
  3254  1744  06b0                  LD          B,$b0
  3255  1746  21af31                LD          HL,DAT_ram_31af                         ;= $20
  3256  1749  117f11                LD          DE,COMPASS                              ;= $D7,"n",$C9,$01
  3257  174c  cd3533                CALL        GFX_DRAW
  3258  174f  21d835                LD          HL,DAT_ram_35d8                         ;= $60
  3259  1752  3610                  LD          (HL),$10                 ;= $60
  3260  1754  d1                    POP         DE
  3261  1755  e1                    POP         HL
  3262  1756  c1                    POP         BC
  3263  1757  f1                    POP         AF
  3264  1758  c9                    RET
  3265  1759  00                    db          $00
  3266  175a  00                    db          $00
  3267  175b  00                    db          $00
  3268  175c  00                    db          $00
  3269  175d  00                    db          $00
  3270  175e  00                    db          $00
  3271  175f  00                    db          $00
  3272  1760  00                    db          $00
  3273  1761  00                    db          $00
  3274  1762  00                    db          $00
  3275  1763  00                    db          $00
  3276  1764  00                    db          $00
  3277  1765  00                    db          $00
  3278  1766  00                    db          $00
  3279                          WIPE_WALLS:
  3280  1767  f5                    PUSH        AF
  3281  1768  c5                    PUSH        BC
  3282  1769  e5                    PUSH        HL
  3283  176a  210038                LD          HL,$3800
  3284  176d  010000                LD          BC,0x0
  3285  1770  3e00                  LD          A,0x0
  3286                          WIPE_WALLS_LOOP:
  3287  1772  77                    LD          (HL),A
  3288  1773  23                    INC         HL
  3289  1774  10fc                  DJNZ        WIPE_WALLS_LOOP
  3290  1776  e1                    POP         HL
  3291  1777  c1                    POP         BC
  3292  1778  f1                    POP         AF
  3293  1779  cd962a                CALL        UPDATE_VIEWPORT
  3294  177c  c39c2a                JP          INPUT_DEBOUNCE
  3295  177f  00                    db          $00
  3296  1780  00                    db          $00
  3297  1781  00                    db          $00
  3298  1782  00                    db          $00
  3299  1783  00                    db          $00
  3300  1784  00                    db          $00
  3301  1785  00                    db          $00
  3302  1786  00                    db          $00
  3303  1787  00                    db          $00
  3304  1788  00                    db          $00
  3305  1789  00                    db          $00
  3306  178a  00                    db          $00
  3307  178b  00                    db          $00
  3308  178c  00                    db          $00
  3309  178d  00                    db          $00
  3310  178e  00                    db          $00
  3311  178f  00                    db          $00
  3312  1790  00                    db          $00
  3313  1791  00                    db          $00
  3314  1792  00                    db          $00
  3315  1793  00                    db          $00
  3316  1794  00                    db          $00
  3317  1795  00                    db          $00
  3318  1796  00                    db          $00
  3319  1797  00                    db          $00
  3320  1798  00                    db          $00
  3321  1799  00                    db          $00
  3322  179a  00                    db          $00
  3323  179b  00                    db          $00
  3324  179c  00                    db          $00
  3325  179d  00                    db          $00
  3326  179e  00                    db          $00
  3327  179f  00                    db          $00
  3328  17a0  00                    db          $00
  3329  17a1  00                    db          $00
  3330  17a2  00                    db          $00
  3331  17a3  00                    db          $00
  3332  17a4  00                    db          $00
  3333                          DRAW_WALL_FL22_EMPTY:
  3334  17a5  21b835                LD          HL,COLRAM_FL22_WALL_IDX                 ;= $60    `
  3335  17a8  010404                LD          BC,$404                                ;4 x 4 rectangle
  3336  17ab  3e00                  LD          A,0x0                                   ;BLK on BLK
  3337  17ad  cdcb08                CALL        FILL_CHRCOL_RECT
  3338  17b0  213032                LD          HL,DAT_ram_3230                         ;= $20
  3339  17b3  010104                LD          BC,$401                                ;4 x 1 rectangle
  3340  17b6  3e20                  LD          A,$20                                  ;SPACE char
  3341  17b8  c3cb08                JP          FILL_CHRCOL_RECT
  3342                          DRAW_WALL_FL2_NEW:
  3343  17bb  213432                LD          HL,$3234                               ;Bottom CHARRAM IDX of FL2
  3344  17be  010104                LD          BC,$401                                ;4 x 1 rectangle
  3345  17c1  3e90                  LD          A,$90                                  ;Thin base line char
  3346  17c3  cdcb08                CALL        FILL_CHRCOL_RECT
  3347  17c6  21bc35                LD          HL,$35bc
  3348  17c9  010402                LD          BC,$204                                ;2 x 4 rectangle
  3349  17cc  3e0f                  LD          A,0xf                                   ;BLK on DKGRY
  3350  17ce  cdcb08                CALL        FILL_CHRCOL_RECT
  3351  17d1  0e04                  LD          C,0x4
  3352  17d3  21be35                LD          HL,$35be
  3353  17d6  3e0f                  LD          A,0xf
  3354  17d8  c3ce08                JP          DRAW_CHRCOLS
  3355                          FIX_ICON_COLORS:
  3356  17db  210134                LD          HL,COLRAM_LEVEL_IDX_L                   ;= $60
  3357  17de  3a6c3a                LD          A,(INPUT_HOLDER)
  3358  17e1  87                    ADD         A,A
  3359  17e2  d601                  SUB         0x1
  3360  17e4  77                    LD          (HL),A              ;= $60
  3361  17e5  2c                    INC         L
  3362  17e6  77                    LD          (HL),A             ;= $60
  3363  17e7  2c                    INC         L
  3364  17e8  77                    LD          (HL),A              ;= $60
  3365  17e9  2c                    INC         L
  3366  17ea  77                    LD          (HL),A              ;= $60
  3367  17eb  210534                LD          HL,COLRAM_SHIFT_MODE_IDX                ;= $60    `
  3368  17ee  010013                LD          BC,$1300
  3369  17f1  2b                    DEC         HL
  3370                          ICON_GREY_FILL_LOOP:
  3371  17f2  23                    INC         HL
  3372  17f3  36f0                  LD          (HL),$f0
  3373  17f5  10fb                  DJNZ        ICON_GREY_FILL_LOOP
  3374  17f7  00                    NOP
  3375  17f8  00                    NOP
  3376  17f9  00                    NOP
  3377  17fa  00                    NOP
  3378  17fb  00                    NOP
  3379  17fc  00                    NOP
  3380  17fd  00                    NOP
  3381  17fe  00                    NOP
  3382  17ff  c9                    RET
  3383                          
  3384                          TITLE_SCREEN:
  3385  1800  2020202020202020  INCBIN "dungeon_title.scr"
              2020e0fcfcb02020  
              2020202020202020  
              2020202020202020  
              e0f0202020202020  
              20202020202020e8  
              fffcbfa3a3efb4ff  
              20eab5e8ffb4eaff  
              80b4ffeab520ffe8  
              bfabb5c420202020  
              20202020202020fe  
              8ffff5f5fdffffff  
              20eab5fe8ffdeab5  
              dbc3ffeab520ffaa  
              fd1fb02020202020  
              d02020202020e8ff  
              ffffb0ebb4f5ffff  
              b0eaffffffffffff  
              ffa1ffeaf520ffe0  
              a2abfd20202020d0  
              d1d1d0202020fea5  
              20aafdf0f0fef7aa  
              ffffffa520aaffb5  
              ebf5ffa2efffffea  
              fdfebf2020d0d1d1  
              20d0d0d1d0202020  
              d020a2afafa3effd  
              b0436f6d70757465  
              722053797374656d  
              a2a320d0d1d0d020  
              d1d1d1d0d0d0d1d0  
              d0d0d020d0d0d0d0  
              d020d0d0d0d0d0d0  
              20d0d020d0d0d0d0  
              d0d1d0d0d1d0d1d1  
              d0d1d020d1d1d020  
              d0d1d0d1d0d1d0d0  
              d0d1d0d1d1d0d1d1  
              d1d0d1d0d020d0d0  
              20d0d1d020d0d1d0  
              2020d0d1d020d0d1  
              d0d0d0d1d1d0d1d1  
              d1d1d0d1d1d0d1d1  
              d1d1d0d1d1d0d0d0  
              d1d020d0d1d12020  
              202020d0d1d0d0d0  
              d1d1d0d0d1d1d1d0  
              d0d1d0d0d1d0d0d1  
              d1d1d1d1d1d1d0d1  
              d020d0d1d0202020  
              eafffcffb0feffb0  
              fefdb5fdffb4d0d0  
              e8fff5e0fffffcff  
              fffdfdffb4fffdff  
              eab5faffb0ffffb4  
              e0b5ffeab5faebb5  
              a1fae5bfd0a1d0d0  
              e0b7ffeaf5d0a1ea  
              b5e0bfd0a1fae0ff  
              eaf5ffeaf5faeab5  
              eab5ffeab5fffeb5  
              e8bfeaffffd04f46  
              eafdffaaffffb4ea  
              b5eaffffd0ffffa5  
              eaffb5d0ffffeab5  
              eab5ffeab5ffebb5  
              ffa5b2fdd0b0d0d0  
              eab7ffe0d0ebb5ea  
              b5a2fd20b0ffeab5  
              eab7ffeab7ffeab5  
              eab5ffeab5ffeab5  
              bfffa5bfffa5d0d0  
              eab5ffaaffffa1ea  
              b5d0bfffa5ffa2ff  
              eab5ebffa1ffeab5  
              d0d0d1d1d1d1d1d0  
              d0d1d1d0d0d0d0d0  
              d1d1d0d0d0d0d0d0  
              d0d0d0d0d0d0d0d0  
              d1d1d1d1d1d1d120  
              d12020d0d0d1d1d1  
              d1d0d0d0d0d0d0d0  
              d0d0d0d0d0d0d0d0  
              d0d0d0d0d0d0d1d1  
              d1d1d0d0d020d0d0  
              20d02020d0d1d0d1  
              d1d1d15072657373  
              d133d1666f72d145  
              415359d1d1d1d1d1  
              d0d1d1d020202020  
              d020202020d020c6  
              d0d1d15072657373  
              d132d1666f72d14d  
              454449554dd1d1d1  
              20c6d020202020d0  
              2020202020d02020  
              d0d1d15072657373  
              d131d1666f72d148  
              415244d1d1d1d1d0  
              2020d02020202020  
              202020d02020d0d0  
              d1d0d15072657373  
              d134d1666f72d148  
              415244455354d0d1  
              d0d0202020202020  
              20202020202020d0  
              d0d0d0d1d1d1d0d1  
              d1d1d1d1d1d1d1d0  
              d1d1d1d1d1d1d020  
              202020d020202020  
              20202020d0202020  
              d0d0d1d0d1d0d1d0  
              d0d1d0d0d0d1d0d1  
              d0d0d0d1d0d120d0  
              2020d02020202020  
              2043616e20796f75  
              20636f6e71756572  
              20746865206d696e  
              6f746175722cd041  
              73746572696f6e3f  
              2020202020202020  
              2020202020202020  
              2020202020202020  
              2020202020202020  
              2020202020202020  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              7030303030303030  
              3030404040403030  
              3030303030303030  
              3030303030303030  
              4040303030303030  
              3030303030303040  
              404041434d4d4040  
              3040404040404040  
              4040404040304040  
              4040404030303030  
              3030303030303040  
              0440e1133dd34040  
              3040404004404040  
              0440404040304040  
              4040403030303030  
              b030303030304040  
              40404e1e133d4040  
              4040404040404040  
              4040404040304040  
              40404030303030b0  
              0ff0b03030304040  
              30404e4e41434040  
              4040404030404040  
              4040404040404040  
              4040403030b0f00f  
              0fbf0f0fb0303030  
              f030404040404040  
              4080808080808080  
              8030808080808080  
              404030b00f0fbf0f  
              0f0fbfbfbf0ff0f0  
              f0f0f030f0f0f0f0  
              f030f0f0f0f0f0f0  
              30f0f030f0f0f0f0  
              f00f0fbfbfbf0f0f  
              f0f00f0fbfbfbf0f  
              b0f0f0f0f0f0f0f0  
              f0f0b0f0f0f0f0f0  
              f0b0f0f0f030b00f  
              0fbfbfbf0f0ff0f0  
              3030f0f00f0fbfbf  
              bf0f0ff0f0f0f0f0  
              f00f0f0f0f0f0ff0  
              f0f0f0f0f0b00fbf  
              bfbf0f0f0ff03030  
              303030f0f00f0fbf  
              bfbf0f0f0ff00f0f  
              0f0f0f0f0f0f0f0f  
              0ff0f0f00f0fbfbf  
              bf0f0f0ff0303030  
              303f3030303f303f  
              3f3f3f3f303f0f0f  
              3f303f3f30303f30  
              303f3f303f303f30  
              3f3f3f3f303f3f30  
              30303f303030303f  
              3f3f3f300f3f0f0f  
              3f3f3f3f3f0f3f3f  
              3f3f3f0f3f3f3f3f  
              30303f3030303030  
              30303f30303f303f  
              3f3f3f303f0f3f3f  
              3f3f303f3f3f3f3f  
              3f3f3f3f0f303f3f  
              3f3f30f030303030  
              30303f30303f303f  
              303f3f300f3f0f0f  
              3f3f303f0f3f3f3f  
              3f3f3f3f3f303f3f  
              3f303f3030303030  
              303030303030303f  
              30303f30303f0f0f  
              3f3f303f303f3f3f  
              3f0f30303f303f3f  
              3f3f3f3f303f3030  
              f0f0f0f00f0f0f0f  
              0ff00f0f0f0f0f0f  
              0f0f0f0f0f0f0f0f  
              0f0f0f0f0f0f0f0f  
              0ff0f0f0f00ff030  
              f03030f0f0f0f0f0  
              0f0f0f0f0f0f0f0f  
              0f0f0f0f0f0f0f0f  
              0f0f0f0f0f0f0ff0  
              f0f0f0f0f030f0b0  
              30f03030f0f0bfbf  
              f00f0f1f1f1f1f1f  
              0f010f1f1f1f0f1f  
              1f1f1f0f0f0f0ff0  
              bfbff0f030303030  
              f030303030f03040  
              bf0f0f3f3f3f3f3f  
              0ff30f3f3f3f0f3f  
              3f3f3f3f3f0f0f0f  
              3040b030303030f0  
              3030303030f03030  
              0ff00f5f5f5f5f5f  
              0ff50f5f5f5f0f5f  
              5f5f5f0f0f0ff00f  
              3030f03030303030  
              303030f03030f0f0  
              f0f0f07f7f7f7f7f  
              0ff70f7f7f7f0f7f  
              7f7f7f7f7f7ff0f0  
              f0f0303030303030  
              30303030303030f0  
              f0f0f0f0f0f0f0f0  
              f0f0f0f0f0f0f0f0  
              f0f0f0f0f0f0f030  
              303030f030303030  
              30303030f0303030  
              f0f0f0f0f0f0f0f0  
              f0f0f0f0f0f0f0f0  
              f0f0f0f0f0f030f0  
              3030f03030303030  
              30d0d0d030d0d0d0  
              30d0d0d0d0d0d0d0  
              30d0d0d030d0d0d0  
              d0d0d0d0d0d0f020  
              20202020202020d0  
              3030303030303030  
              3030303030303030  
              3030303030303030  
              3030303030303030  
              3030303030303030  
              0000000000000000  
              0000000000000000  
              0000000000000000  
  3386                          
  3387                          SCRAMBLECODE:
  3388  2000  3e5b5e00009c00b0      db          ">[^\0\0",$9C,$00,$B0,$00,"l\0d\0",$A8,"^p"
              006c006400a85e70  
  3389                          GAMEINIT:
  3390  2010  31ff3f                LD          SP,$3fff                      ;Set SP to top of BANK0 RAM
  3391  2013  cdfe11                CALL        WIPE_VARIABLE_SPACE                     ;Wipe variable space first...
  3392  2016  3602                  LD          (HL),0x2              ;($3a62) = 0x2
  3393  2018  2c                    INC         L                                       ;HL = $3a63
  3394  2019  3e32                  LD          A,$32                                  ;A = $32
  3395  201b  77                    LD          (HL),A                          ;($3a63) = $32
  3396  201c  2c                    INC         L                                       ;HL = $3a64
  3397  201d  77                    LD          (HL),A                          ;($3a64) = $32
  3398  201e  2c                    INC         L                                       ;HL = $3a65
  3399  201f  77                    LD          (HL),A                          ;($3a65) = $32
  3400  2020  2c                    INC         L                                       ;HL = $3a66
  3401  2021  3d                    DEC         A                                       ;A = $31
  3402  2022  77                    LD          (HL),A                          ;($3a66) = $31
  3403  2023  2c                    INC         L                                       ;HL = $3a67
  3404  2024  77                    LD          (HL),A                          ;($3a67) = $31
  3405  2025  2c                    INC         L                                       ;HL = $3a68
  3406  2026  0612                  LD          B,$12                                  ;B = $12
  3407  2028  af                    XOR         A                                       ;A = 0x0, F = $44 (Z and P set)
  3408                          LAB_ram_e029:
  3409  2029  77                    LD          (HL),A                   ;($3a68) = $00
  3410  202a  2c                    INC         L                                       ;HL = $3a69 to $3a7a,
  3411                                                                                  ;A = 0x0, F = $28
  3412  202b  10fc                  DJNZ        LAB_ram_e029                            ;Loop if Not Z (B is decremented)
  3413  202d  3e18                  LD          A,$18                                  ;A = $18 (HL = $3a7a, B = 0x0)
  3414  202f  77                    LD          (HL),A                         ;($3a7a) = $18
  3415  2030  23                    INC         HL                                      ;HL = $3a7b
  3416  2031  3efe                  LD          A,$fe                                  ;A = $fe
  3417  2033  0610                  LD          B,$10                                  ;B = $10
  3418                          LAB_ram_e035:
  3419  2035  77                    LD          (HL),A                         ;= $60
  3420  2036  23                    INC         HL
  3421  2037  10fc                  DJNZ        LAB_ram_e035                            ;Loop if Not Z (B is decremented)
  3422  2039  0620                  LD          B,$20                                  ;Set fill CHR to SPACE 32/$20
  3423  203b  210030                LD          HL,CHRRAM                               ;HL = $3000 (Start of CHRRAM)
  3424  203e  cd591e                CALL        FILL_FULL_1024                          ;byte FILL_FULL_1024(word chrColValue...
  3425  2041  215e00                LD          HL,$5e                                 ;HL = $005e
  3426  2044  229c3a                LD          (TIMER_E),HL                            ;($3a9c) = $0053
  3427  2047  ed5f                  LD          A,R                                     ;Semi-random number into A
  3428  2049  67                    LD          H,A
  3429  204a  22913a                LD          (RNDHOLD_AA),HL
  3430  204d  017f00                LD          BC,$7f
  3431  2050  3e07                  LD          A,0x7
  3432  2052  ed79                  OUT         (C),A                          ;= db
  3433  2054  0d                    DEC         C
  3434  2055  3e3f                  LD          A,$3f
  3435  2057  ed79                  OUT         (C),A                          ;= db
  3436  2059  0606                  LD          B,0x6                                   ;BLK on CYN
  3437  205b  210034                LD          HL,COLRAM                               ;= $60
  3438  205e  cd591e                CALL        FILL_FULL_1024                          ;byte FILL_FULL_1024(word chrColValue...
  3439  2061  cdac2c                CALL        CHK_ITEM
  3440  2064  cd6b20                CALL        DRAW_TITLE
  3441  2067  c39c2a                JP          INPUT_DEBOUNCE
  3442  206a  00                    NOP
  3443                          DRAW_TITLE:
  3444  206b  110030                LD          DE,CHRRAM                               ;= $20
  3445  206e  2100d8                LD          HL,$D800                                ;= $20
  3446  2071  01e803                LD          BC,$3e8
  3447  2074  edb0                  LDIR                                                ;= $20
  3448  2076  110034                LD          DE,COLRAM                               ;= $60
  3449  2079  2100dc                LD          HL,$DC00                                ;= $70
  3450  207c  01e803                LD          BC,$3e8
  3451  207f  edb0                  LDIR                                                ;= $60
  3452                                                                                  ;= $70
  3453  2081  c9                    RET
  3454  2082  00                    db          $00
  3455  2083  00                    db          $00
  3456  2084  00                    db          $00
  3457  2085  00                    db          $00
  3458  2086  00                    db          $00
  3459  2087  00                    db          $00
  3460  2088  00                    db          $00
  3461  2089  00                    db          $00
  3462  208a  00                    db          $00
  3463  208b  00                    db          $00
  3464  208c  00                    db          $00
  3465  208d  00                    db          $00
  3466  208e  00                    db          $00
  3467  208f  00                    db          $00
  3468  2090  00                    db          $00
  3469  2091  00                    db          $00
  3470  2092  00                    db          $00
  3471  2093  00                    db          $00
  3472  2094  00                    db          $00
  3473  2095  00                    db          $00
  3474                          BLANK_SCRN:
  3475  2096  210030                LD          HL,CHRRAM                               ;= $20
  3476  2099  0620                  LD          B,$20                                  ;SPACE char
  3477  209b  cd591e                CALL        FILL_FULL_1024                          ;byte FILL_FULL_1024(word chrColValue...
  3478  209e  210034                LD          HL,COLRAM                               ;= $60
  3479  20a1  06d0                  LD          B,$d0                                  ;DKGRN on BLK
  3480  20a3  cd591e                CALL        FILL_FULL_1024                          ;byte FILL_FULL_1024(word chrColValue...
  3481  20a6  116e01                LD          DE,STATS_TXT                            ;DE = STATS_TXT
  3482  20a9  211930                LD          HL,CHRRAM_STATS_TOP                     ;HL = CHRRAM_STATS_TOP
  3483  20ac  06d0                  LD          B,$d0                                  ;DKGRN on BLK
  3484  20ae  cd3533                CALL        GFX_DRAW
  3485  20b1  214530                LD          HL,IDX_HEALTH_SPACER                    ;= $20
  3486  20b4  cd3533                CALL        GFX_DRAW
  3487  20b7  213000                LD          HL,$30                                 ;Set starting PHYS HEALTH = 30
  3488  20ba  1e15                  LD          E,$15                                  ;Set starting SPRT HEALTH = 15
  3489  20bc  22933a                LD          (PLAYER_PHYS_HEALTH),HL
  3490  20bf  22953a                LD          (PLAYER_PHYS_HEALTH_MAX),HL
  3491  20c2  7b                    LD          A,E
  3492  20c3  32973a                LD          (PLAYER_SPRT_HEALTH),A
  3493  20c6  32983a                LD          (PLAYER_SPRT_HEALTH_MAX),A
  3494  20c9  cd5d3d                CALL        REDRAW_STATS
  3495  20cc  212000                LD          HL,$20
  3496  20cf  22a93a                LD          (BYTE_ram_3aa9),HL
  3497  20d2  3e14                  LD          A,$14
  3498  20d4  32ab3a                LD          (FOOD_INV),A                            ;Set starting FOOD_INV  = 14
  3499  20d7  32ac3a                LD          (ARROW_INV),A                           ;Set starting ARROW INV = 14
  3500  20da  0610                  LD          B,$10                                  ;RED on BLK
  3501  20dc  217132                LD          HL,CHRRAM_LEFT_HAND_ITEM_IDX            ;= $20
  3502  20df  11c102                LD          DE,BOW                                  ;= $01,$01,$01,$01,$01
  3503  20e2  cd3533                CALL        GFX_DRAW
  3504  20e5  cddb17                CALL        FIX_ICON_COLORS
  3505  20e8  cd4017                CALL        DRAW_COMPASS
  3506  20eb  00                    NOP
  3507  20ec  00                    NOP
  3508  20ed  00                    NOP
  3509  20ee  00                    NOP
  3510  20ef  00                    NOP
  3511  20f0  00                    NOP
  3512  20f1  00                    NOP
  3513  20f2  00                    NOP
  3514  20f3  00                    NOP
  3515  20f4  3d                    DEC         A
  3516  20f5  47                    LD          B,A
  3517  20f6  3e03                  LD          A,0x3
  3518  20f8  90                    SUB         B
  3519  20f9  327a3a                LD          (RIGHT_HAND_ITEM),A
  3520  20fc  0f                    RRCA
  3521  20fd  3804                  JR          C,LAB_ram_e103
  3522  20ff  0610                  LD          B,$10                                  ;Right hand RED SHIELD_L
  3523  2101  1802                  JR          ADJUST_SHIELD_LEVEL
  3524                          LAB_ram_e103:
  3525  2103  0630                  LD          B,$30
  3526                          ADJUST_SHIELD_LEVEL:
  3527  2105  0f                    RRCA
  3528  2106  3004                  JR          NC,LAB_ram_e10c
  3529  2108  3e40                  LD          A,$40
  3530  210a  80                    ADD         A,B
  3531  210b  47                    LD          B,A
  3532                          LAB_ram_e10c:
  3533  210c  3e18                  LD          A,$18                                  ;Left hand RED BOW
  3534  210e  327b3a                LD          (LEFT_HAND_ITEM),A
  3535  2111  217b32                LD          HL,CHRRAM_RIGHT_HAND_ITEM_IDX           ;= $20
  3536  2114  115202                LD          DE,BUCKLER                              ;= $01,$01,$01,$01,$01
  3537  2117  cd3533                CALL        GFX_DRAW
  3538  211a  cda333                CALL        BUILD_MAP
  3539  211d  cdbf0d                CALL        SUB_ram_cdbf
  3540  2120  cdc432                CALL        SUB_ram_f2c4
  3541  2123  cde634                CALL        REDRAW_START
  3542  2126  cd0438                CALL        REDRAW_VIEWPORT
  3543  2129  c3cc26                JP          DO_SWAP_HANDS
  3544  212c  00                    db          $00
  3545  212d  00                    db          $00
  3546  212e  00                    db          $00
  3547  212f  00                    db          $00
  3548  2130  00                    db          $00
  3549  2131  00                    db          $00
  3550  2132  00                    db          $00
  3551  2133  00                    db          $00
  3552  2134  00                    db          $00
  3553  2135  00                    db          $00
  3554  2136  00                    db          $00
  3555  2137  00                    db          $00
  3556  2138  00                    db          $00
  3557  2139  00                    db          $00
  3558  213a  00                    db          $00
  3559  213b  00                    db          $00
  3560  213c  00                    db          $00
  3561  213d  00                    db          $00
  3562  213e  00                    db          $00
  3563  213f  00                    db          $00
  3564  2140  00                    db          $00
  3565  2141  00                    db          $00
  3566  2142  00                    db          $00
  3567  2143  00                    db          $00
  3568  2144  00                    db          $00
  3569  2145  00                    db          $00
  3570  2146  00                    db          $00
  3571  2147  00                    db          $00
  3572  2148  00                    db          $00
  3573  2149  00                    db          $00
  3574  214a  00                    db          $00
  3575  214b  00                    db          $00
  3576  214c  00                    db          $00
  3577  214d  00                    db          $00
  3578  214e  00                    db          $00
  3579  214f  00                    db          $00
  3580  2150  00                    db          $00
  3581  2151  00                    db          $00
  3582  2152  00                    db          $00
  3583  2153  00                    db          $00
  3584  2154  00                    db          $00
  3585  2155  00                    db          $00
  3586  2156  00                    db          $00
  3587  2157  00                    db          $00
  3588  2158  00                    db          $00
  3589  2159  00                    db          $00
  3590  215a  00                    db          $00
  3591  215b  00                    db          $00
  3592  215c  00                    db          $00
  3593  215d  00                    db          $00
  3594  215e  00                    db          $00
  3595  215f  00                    db          $00
  3596  2160  00                    db          $00
  3597  2161  00                    db          $00
  3598  2162  00                    db          $00
  3599  2163  00                    db          $00
  3600  2164  00                    db          $00
  3601  2165  00                    db          $00
  3602  2166  00                    db          $00
  3603  2167  00                    db          $00
  3604  2168  00                    db          $00
  3605  2169  00                    db          $00
  3606  216a  00                    db          $00
  3607  216b  00                    db          $00
  3608  216c  00                    db          $00
  3609  216d  00                    db          $00
  3610  216e  00                    db          $00
  3611  216f  00                    db          $00
  3612  2170  00                    db          $00
  3613  2171  00                    db          $00
  3614  2172  00                    db          $00
  3615  2173  00                    db          $00
  3616  2174  00                    db          $00
  3617  2175  00                    db          $00
  3618  2176  00                    db          $00
  3619  2177  00                    db          $00
  3620  2178  00                    db          $00
  3621  2179  00                    db          $00
  3622  217a  00                    db          $00
  3623  217b  00                    db          $00
  3624  217c  00                    db          $00
  3625  217d  00                    db          $00
  3626  217e  00                    db          $00
  3627  217f  00                    db          $00
  3628  2180  00                    db          $00
  3629  2181  00                    db          $00
  3630  2182  00                    db          $00
  3631  2183  00                    db          $00
  3632  2184  00                    db          $00
  3633  2185  00                    db          $00
  3634  2186  00                    db          $00
  3635  2187  00                    db          $00
  3636  2188  00                    db          $00
  3637  2189  00                    db          $00
  3638  218a  00                    db          $00
  3639  218b  00                    db          $00
  3640  218c  00                    db          $00
  3641  218d  00                    db          $00
  3642  218e  00                    db          $00
  3643  218f  00                    db          $00
  3644  2190  00                    db          $00
  3645  2191  00                    db          $00
  3646  2192  00                    db          $00
  3647  2193  00                    db          $00
  3648  2194  00                    db          $00
  3649  2195  00                    db          $00
  3650  2196  00                    db          $00
  3651  2197  00                    db          $00
  3652  2198  00                    db          $00
  3653  2199  00                    db          $00
  3654  219a  00                    db          $00
  3655  219b  00                    db          $00
  3656  219c  00                    db          $00
  3657  219d  00                    db          $00
  3658                          DO_MOVE_FW_CHK_WALLS:
  3659  219e  3ae833                LD          A,(WALL_F0_STATE)                       ;= $20
  3660  21a1  fe00                  CP          0x0                                     ;Check for no wall in F0
  3661  21a3  caab21                JP          Z,FW_WALLS_CLEAR_CHK_MONSTER
  3662  21a6  cb57                  BIT         0x2,A                                   ;Check for closed door
  3663  21a8  ca3022                JP          Z,NO_ACTION_TAKEN
  3664                          FW_WALLS_CLEAR_CHK_MONSTER:
  3665  21ab  3ae937                LD          A,(ITEM_F1)                             ;= $60
  3666  21ae  3c                    INC         A
  3667  21af  3c                    INC         A
  3668  21b0  fe7a                  CP          $7a                                    ;Check for monster in F1
  3669  21b2  d23022                JP          NC,NO_ACTION_TAKEN                      ;Monster in your way!
  3670                                                                                  ;Do nothing.
  3671  21b5  ed4b603a              LD          BC,(DIR_FACING_FW)                      ;Way is clear!
  3672                                                                                  ;Move forward.
  3673  21b9  ed439e3a              LD          (BYTE_ram_3a9e),BC
  3674  21bd  3a623a                LD          A,(DIR_FACING_SHORT)
  3675  21c0  32a03a                LD          (BYTE_ram_3aa0),A
  3676  21c3  3a793a                LD          A,(PLAYER_MAP_POS)
  3677  21c6  32773a                LD          (PLAYER_PREV_MAP_LOC),A
  3678  21c9  80                    ADD         A,B
  3679  21ca  32793a                LD          (PLAYER_MAP_POS),A
  3680  21cd  c3962a                JP          UPDATE_VIEWPORT
  3681                          DO_JUMP_BACK:
  3682  21d0  21793a                LD          HL,PLAYER_MAP_POS
  3683  21d3  3a773a                LD          A,(PLAYER_PREV_MAP_LOC)
  3684  21d6  be                    CP          (HL)
  3685  21d7  ca0122                JP          Z,LAB_ram_e201
  3686  21da  08                    EX          AF,AF'
  3687  21db  2a9e3a                LD          HL,(BYTE_ram_3a9e)
  3688  21de  3a613a                LD          A,(DIR_FACING_BW)
  3689  21e1  ed44                  NEG                                                 ;Negate A
  3690  21e3  bc                    CP          H
  3691  21e4  ca3022                JP          Z,NO_ACTION_TAKEN
  3692  21e7  08                    EX          AF,AF'
  3693  21e8  32793a                LD          (PLAYER_MAP_POS),A
  3694  21eb  22603a                LD          (DIR_FACING_FW),HL
  3695  21ee  3aa03a                LD          A,(BYTE_ram_3aa0)
  3696  21f1  32623a                LD          (DIR_FACING_SHORT),A
  3697  21f4  3a783a                LD          A,(LAST_ITEM_HELD)
  3698  21f7  a7                    AND         A
  3699  21f8  ca962a                JP          Z,UPDATE_VIEWPORT
  3700  21fb  cdab25                CALL        CLEAR_MONSTER_STATS
  3701  21fe  c34e32                JP          INIT_MELEE_ANIM
  3702                          LAB_ram_e201:
  3703  2201  010005                LD          BC,$500
  3704  2204  112000                LD          DE,$20
  3705  2207  cd3c22                CALL        PLAY_SOUND_LOOP
  3706  220a  3a783a                LD          A,(LAST_ITEM_HELD)
  3707  220d  a7                    AND         A
  3708  220e  ca9f2a                JP          Z,WAIT_FOR_INPUT
  3709  2211  c34e32                JP          INIT_MELEE_ANIM
  3710                          DO_COUNT_FOOD:
  3711  2214  3aab3a                LD          A,(FOOD_INV)
  3712                          COUNT_INV:
  3713  2217  57                    LD          D,A
  3714  2218  14                    INC         D
  3715  2219  af                    XOR         A
  3716                          PLAY_INV_COUNT_BLIPS:
  3717  221a  15                    DEC         D
  3718  221b  ca9c2a                JP          Z,INPUT_DEBOUNCE
  3719  221e  08                    EX          AF,AF'
  3720  221f  010024                LD          BC,BYTE_ram_2400                        ;= $FF
  3721  2222  cd4b1d                CALL        SLEEP                                   ;byte SLEEP(short cycleCount)
  3722  2225  08                    EX          AF,AF'
  3723  2226  d3fc                  OUT         (SPEAKER),A                             ;= db
  3724  2228  3d                    DEC         A
  3725  2229  18ef                  JR          PLAY_INV_COUNT_BLIPS
  3726                          DO_COUNT_ARROWS:
  3727  222b  3aac3a                LD          A,(ARROW_INV)
  3728  222e  18e7                  JR          COUNT_INV
  3729                          NO_ACTION_TAKEN:
  3730  2230  010005                LD          BC,$500
  3731  2233  112000                LD          DE,$20
  3732  2236  cd3c22                CALL        PLAY_SOUND_LOOP
  3733  2239  c39f2a                JP          WAIT_FOR_INPUT
  3734                          PLAY_SOUND_LOOP:
  3735  223c  1b                    DEC         DE
  3736  223d  7b                    LD          A,E
  3737  223e  b2                    OR          D
  3738  223f  c8                    RET         Z
  3739  2240  d3fc                  OUT         (SPEAKER),A                             ;Send sound to speaker
  3740  2242  60                    LD          H,B
  3741  2243  69                    LD          L,C
  3742                          LAB_ram_e244:
  3743  2244  2b                    DEC         HL
  3744  2245  7d                    LD          A,L
  3745  2246  b4                    OR          H
  3746  2247  c24422                JP          NZ,LAB_ram_e244
  3747  224a  c33c22                JP          PLAY_SOUND_LOOP
  3748                          USE_MAP:
  3749  224d  3ab93a                LD          A,(GAME_BOOLEANS)
  3750  2250  cb57                  BIT         0x2,A                                   ;See if HAVE MAP bit is set
  3751  2252  ca3022                JP          Z,NO_ACTION_TAKEN
  3752  2255  3aad3a                LD          A,(MAP_INV_SLOT)
  3753  2258  a7                    AND         A
  3754  2259  ca4e32                JP          Z,INIT_MELEE_ANIM
  3755  225c  d9                    EXX                                                 ;Swap BC  DE  HL
  3756                                                                                  ;with BC' DE' HL'
  3757  225d  011818                LD          BC,$1818                               ;24 x 24
  3758  2260  212830                LD          HL,IDX_VIEWPORT_CHRRAM                  ;= $20
  3759  2263  3e20                  LD          A,$20                                  ;SPACE character fill
  3760  2265  cdcb08                CALL        FILL_CHRCOL_RECT                        ;Fill map CHARs with SPACES
  3761  2268  cd480e                CALL        SOUND_03
  3762  226b  011818                LD          BC,$1818                               ;24 x 24
  3763  226e  212834                LD          HL,COLRAM_VIEWPORT_IDX                  ;= $60    `
  3764  2271  3eb0                  LD          A,$b0                                  ;DKBLU on BLK
  3765                                                                                  ;Was DKGN on BLK
  3766  2273  cdcb08                CALL        FILL_CHRCOL_RECT                        ;Fill map colors
  3767  2276  d9                    EXX                                                 ;Swap BC  DE  HL
  3768                                                                                  ;with BC' DE' HL'
  3769  2277  f5                    PUSH        AF
  3770  2278  3aad3a                LD          A,(MAP_INV_SLOT)
  3771  227b  47                    LD          B,A
  3772  227c  f1                    POP         AF
  3773  227d  00                    NOP                                                 ;Reset N flag
  3774  227e  05                    DEC         B
  3775  227f  cab322                JP          Z,DRAW_RED_MAP                          ;Walls and player
  3776  2282  05                    DEC         B
  3777  2283  caab22                JP          Z,DRAW_YELLOW_MAP                       ;Walls, player, and ladder
  3778  2286  05                    DEC         B
  3779  2287  ca9422                JP          Z,DRAW_PURPLE_MAP                       ;Walls, player, ladder,
  3780                                                                                  ;and monsters
  3781  228a  c31712                JP          DRAW_WHITE_MAP                          ;Walls, player, ladder,
  3782                                                                                  ;monsters, and items
  3783  228d  00                    db          $00
  3784  228e  00                    db          $00
  3785  228f  00                    db          $00
  3786  2290  00                    db          $00
  3787  2291  00                    db          $00
  3788  2292  00                    db          $00
  3789  2293  00                    db          $00
  3790                          DRAW_PURPLE_MAP:
  3791  2294  21a878                LD          HL,$78a8                               ;Item range for monsters:
  3792                                                                                  ;78 - skeleton
  3793                                                                                  ;a8 - db?
  3794  2297  cd1523                CALL        MAP_ITEM_MONSTER
  3795                          UPDATE_MONSTER_CELLS:
  3796  229a  280f                  JR          Z,DRAW_YELLOW_MAP
  3797  229c  0a                    LD          A,(BC)
  3798  229d  0c                    INC         C
  3799  229e  0c                    INC         C
  3800  229f  d9                    EXX                                                 ;Swap BC  DE  HL
  3801                                                                                  ;with BC' DE' HL'
  3802  22a0  16b1                  LD          D,$b1                                  ;Set current map position color
  3803                                                                                  ;to $b1 DKBLU on RED
  3804                                                                                  ;was DKGRN on YEL
  3805  22a2  cd2723                CALL        UPDATE_COLRAM_FROM_OFFSET
  3806  22a5  d9                    EXX                                                 ;Swap BC  DE  HL
  3807                                                                                  ;with BC' DE' HL'
  3808  22a6  cd1823                CALL        FIND_NEXT_ITEM_MONSTER_LOOP
  3809  22a9  18ef                  JR          UPDATE_MONSTER_CELLS
  3810                          DRAW_YELLOW_MAP:
  3811  22ab  16b5                  LD          D,$b5                                  ;Set current map position color
  3812                                                                                  ;to $b5, DKBLU on PUR
  3813                                                                                  ;was DKGRN on PUR
  3814  22ad  3aa13a                LD          A,(ITEM_HOLDER)
  3815  22b0  cd2723                CALL        UPDATE_COLRAM_FROM_OFFSET
  3816                          DRAW_RED_MAP:
  3817  22b3  011810                LD          BC,$1018                               ;16 x 20
  3818  22b6  11ff37                LD          DE,HC_LAST_INPUT
  3819  22b9  21cc30                LD          HL,CHRRAM_WALL_F0_IDX                   ;= $20
  3820                          CALC_MINIMAP_WALL:
  3821  22bc  13                    INC         DE
  3822  22bd  7a                    LD          A,D
  3823  22be  fe39                  CP          $39
  3824  22c0  2824                  JR          Z,SET_MINIMAP_PLAYER_LOC
  3825  22c2  1a                    LD          A,(DE)
  3826  22c3  b7                    OR          A
  3827  22c4  2808                  JR          Z,SET_MINIMAP_NO_WALLS
  3828  22c6  e60f                  AND         0xf
  3829  22c8  200c                  JR          NZ,LAB_ram_e2d6
  3830                          SET_MINIMAP_N_WALL:
  3831  22ca  3ea3                  LD          A,$a3                                  ;A = $a3, map CHAR N wall
  3832  22cc  180f                  JR          DRAW_MINIMAP_WALL
  3833                          SET_MINIMAP_NO_WALLS:
  3834  22ce  3ea0                  LD          A,$a0                                  ;A = $a0, map CHAR no walls
  3835  22d0  180b                  JR          DRAW_MINIMAP_WALL
  3836                          SET_MINIMAP_NW_WALLS:
  3837  22d2  3eb7                  LD          A,$b7                                  ;A = $b7, map CHAR N and W walls
  3838  22d4  1807                  JR          DRAW_MINIMAP_WALL
  3839                          LAB_ram_e2d6:
  3840  22d6  1a                    LD          A,(DE)
  3841  22d7  e6f0                  AND         $f0
  3842  22d9  20f7                  JR          NZ,SET_MINIMAP_NW_WALLS
  3843                          SET_MINIMAP_W_WALL:
  3844  22db  3eb5                  LD          A,$b5                                  ;A = $b5, map CHAR W wall
  3845                          DRAW_MINIMAP_WALL:
  3846  22dd  77                    LD          (HL),A              ;= $20
  3847  22de  23                    INC         HL
  3848  22df  10db                  DJNZ        CALC_MINIMAP_WALL
  3849  22e1  09                    ADD         HL,BC
  3850  22e2  0610                  LD          B,$10
  3851  22e4  18d6                  JR          CALC_MINIMAP_WALL
  3852                          SET_MINIMAP_PLAYER_LOC:
  3853  22e6  3a793a                LD          A,(PLAYER_MAP_POS)
  3854  22e9  16b7                  LD          D,$b7                                  ;Set player position color
  3855                                                                                  ;to $b7 DKBLU on WHT
  3856                                                                                  ;was DKGRN on WHT
  3857  22eb  cd2723                CALL        UPDATE_COLRAM_FROM_OFFSET
  3858  22ee  cd3b29                CALL        WAIT_A_TICK
  3859                          READ_KEY:
  3860  22f1  01ff00                LD          BC,$ff
  3861  22f4  ed78                  IN          A,(C)
  3862  22f6  3c                    INC         A
  3863  22f7  20f8                  JR          NZ,READ_KEY
  3864                          ENABLE_HC:
  3865  22f9  0ef7                  LD          C,$f7
  3866  22fb  3e0f                  LD          A,0xf
  3867  22fd  ed79                  OUT         (C),A                              ;= db
  3868  22ff  0d                    DEC         C
  3869                          READ_HC:
  3870  2300  ed78                  IN          A,(C)                     ;= db
  3871  2302  3c                    INC         A
  3872  2303  c2f122                JP          NZ,READ_KEY
  3873  2306  0c                    INC         C
  3874  2307  3e0e                  LD          A,0xe
  3875                          DISABLE_HC:
  3876  2309  ed79                  OUT         (C),A                              ;= db
  3877  230b  0d                    DEC         C
  3878  230c  ed78                  IN          A,(C)                     ;= db
  3879  230e  3c                    INC         A
  3880  230f  c2f122                JP          NZ,READ_KEY
  3881  2312  c3962a                JP          UPDATE_VIEWPORT
  3882                          MAP_ITEM_MONSTER:
  3883  2315  010039                LD          BC,MAP_LADDER_OFFSET
  3884                          FIND_NEXT_ITEM_MONSTER_LOOP:
  3885  2318  0a                    LD          A,(BC)
  3886  2319  03                    INC         BC
  3887  231a  3c                    INC         A
  3888  231b  c8                    RET         Z
  3889  231c  0a                    LD          A,(BC)
  3890  231d  bc                    CP          H                                       ;CP A to H (low end of itemRange)
  3891  231e  03                    INC         BC
  3892  231f  38f7                  JR          C,FIND_NEXT_ITEM_MONSTER_LOOP
  3893  2321  bd                    CP          L                                       ;CP A to L (high end of itemRange)
  3894  2322  30f4                  JR          NC,FIND_NEXT_ITEM_MONSTER_LOOP
  3895  2324  0d                    DEC         C
  3896  2325  0b                    DEC         BC
  3897  2326  c9                    RET
  3898                          UPDATE_COLRAM_FROM_OFFSET:
  3899  2327  f5                    PUSH        AF
  3900  2328  e60f                  AND         0xf
  3901  232a  21cc34                LD          HL,COLRAM_F0_WALL_MAP_IDX               ;= $60    `
  3902  232d  4f                    LD          C,A
  3903  232e  0600                  LD          B,0x0
  3904  2330  09                    ADD         HL,BC
  3905  2331  f1                    POP         AF
  3906  2332  e6f0                  AND         $f0
  3907  2334  1f                    RRA
  3908  2335  4f                    LD          C,A
  3909  2336  09                    ADD         HL,BC
  3910  2337  17                    RLA
  3911  2338  17                    RLA
  3912  2339  cb10                  RL          B
  3913  233b  4f                    LD          C,A
  3914  233c  09                    ADD         HL,BC
  3915  233d  72                    LD          (HL),D                                  ;LD (HL),D
  3916  233e  c9                    RET
  3917                          CHK_ITEM_BREAK:
  3918  233f  78                    LD          A,B                                     ;A  = itemLevel (0-3)
  3919  2340  07                    RLCA                                                ;A  = A * 2
  3920  2341  07                    RLCA                                                ;A  = A * 2
  3921  2342  07                    RLCA                                                ;A  = A * 2
  3922  2343  4f                    LD          C,A                                     ;B  = A
  3923  2344  cdac3a                CALL        MAKE_RANDOM_BYTE                        ;A  = Random Byte
  3924  2347  81                    ADD         A,C                                     ;A  = A + B (orig A * 8)
  3925  2348  3806                  JR          C,ITEM_POOFS_RH                         ;If A > 255, item breaks
  3926  234a  c605                  ADD         A,0x5                                   ;A  = A + 5
  3927  234c  d0                    RET         NC                                      ;If A < 255, item doesn't break
  3928  234d  00                    db          $00
  3929  234e  00                    db          $00
  3930  234f  00                    db          $00
  3931                          ITEM_POOFS_RH:
  3932  2350  37                    SCF                                                 ;Set C
  3933  2351  08                    EX          AF,AF'
  3934  2352  216c33                LD          HL,CHRRAM_RH_POOF_IDX                   ;= $20
  3935  2355  cdb015                CALL        PLAY_POOF_ANIM
  3936  2358  00                    db          $00
  3937  2359  00                    db          $00
  3938  235a  00                    db          $00
  3939  235b  00                    db          $00
  3940  235c  00                    db          $00
  3941  235d  00                    db          $00
  3942  235e  00                    db          $00
  3943  235f  00                    db          $00
  3944  2360  00                    db          $00
  3945  2361  00                    db          $00
  3946  2362  00                    db          $00
  3947  2363  00                    db          $00
  3948                          FIX_RH_COLORS:
  3949  2364  f5                    PUSH        AF
  3950  2365  c5                    PUSH        BC
  3951  2366  e5                    PUSH        HL
  3952  2367  3ef0                  LD          A,$f0                                  ;DKGRN on BLK
  3953  2369  010404                LD          BC,$404                                ; 4 x 4 rectangle
  3954  236c  214337                LD          HL,COLRAM_RH_ITEM_IDX                   ;= $60    `
  3955  236f  cdcb08                CALL        FILL_CHRCOL_RECT
  3956  2372  e1                    POP         HL
  3957  2373  c1                    POP         BC
  3958  2374  f1                    POP         AF
  3959  2375  37                    SCF
  3960  2376  c9                    RET
  3961  2377  00                    db          $00
  3962  2378  00                    db          $00
  3963  2379  00                    db          $00
  3964  237a  00                    db          $00
  3965  237b  00                    db          $00
  3966  237c  00                    db          $00
  3967  237d  00                    db          $00
  3968  237e  00                    db          $00
  3969  237f  00                    db          $00
  3970  2380  00                    db          $00
  3971  2381  00                    db          $00
  3972  2382  00                    db          $00
  3973  2383  00                    db          $00
  3974  2384  00                    db          $00
  3975  2385  00                    db          $00
  3976  2386  00                    db          $00
  3977  2387  00                    db          $00
  3978  2388  00                    db          $00
  3979  2389  00                    db          $00
  3980  238a  00                    db          $00
  3981  238b  00                    db          $00
  3982  238c  00                    db          $00
  3983  238d  00                    db          $00
  3984  238e  00                    db          $00
  3985  238f  00                    db          $00
  3986  2390  00                    db          $00
  3987  2391  00                    db          $00
  3988  2392  00                    db          $00
  3989  2393  00                    db          $00
  3990  2394  00                    db          $00
  3991  2395  00                    db          $00
  3992  2396  00                    db          $00
  3993  2397  00                    db          $00
  3994  2398  00                    db          $00
  3995  2399  00                    db          $00
  3996                          SUB_ram_e39a:
  3997  239a  cd700e                CALL        SOUND_05
  3998  239d  3a873a                LD          A,(BYTE_ram_3a87)
  3999  23a0  2a853a                LD          HL,(BYTE_ram_3a85)
  4000  23a3  3d                    DEC         A
  4001  23a4  c2cd23                JP          NZ,LAB_ram_e3cd
  4002  23a7  2d                    DEC         L
  4003  23a8  c2b623                JP          NZ,LAB_ram_e3b6
  4004  23ab  25                    DEC         H
  4005  23ac  ca5a24                JP          Z,LAB_ram_e45a
  4006  23af  3e31                  LD          A,$31
  4007  23b1  32643a                LD          (RAM_AC),A
  4008  23b4  2e04                  LD          L,0x4
  4009                          LAB_ram_e3b6:
  4010  23b6  3e04                  LD          A,0x4
  4011  23b8  32873a                LD          (BYTE_ram_3a87),A
  4012  23bb  22853a                LD          (BYTE_ram_3a85),HL
  4013  23be  2a833a                LD          HL,(BYTE_ram_3a83)
  4014  23c1  012900                LD          BC,$29
  4015  23c4  af                    XOR         A
  4016  23c5  ed42                  SBC         HL,BC
  4017  23c7  22833a                LD          (BYTE_ram_3a83),HL
  4018  23ca  c3d723                JP          LAB_ram_e3d7
  4019                          LAB_ram_e3cd:
  4020  23cd  32873a                LD          (BYTE_ram_3a87),A
  4021  23d0  2a833a                LD          HL,(BYTE_ram_3a83)
  4022  23d3  2b                    DEC         HL
  4023  23d4  22833a                LD          (BYTE_ram_3a83),HL
  4024                          LAB_ram_e3d7:
  4025  23d7  01c800                LD          BC,$c8
  4026  23da  af                    XOR         A
  4027  23db  ed42                  SBC         HL,BC
  4028  23dd  e5                    PUSH        HL
  4029  23de  09                    ADD         HL,BC
  4030  23df  11003a                LD          DE,ITEM_MOVE_CHR_BUFFER
  4031  23e2  cd6029                CALL        UPDATE_MELEE_OBJECTSdb
  4032  23e5  e1                    POP         HL
  4033  23e6  4d                    LD          C,L
  4034  23e7  3a643a                LD          A,(RAM_AC)
  4035  23ea  32633a                LD          (MON_FS),A
  4036  23ed  3a823a                LD          A,(BYTE_ram_3a82)
  4037  23f0  cdac2c                CALL        CHK_ITEM
  4038  23f3  3e32                  LD          A,$32
  4039  23f5  32633a                LD          (MON_FS),A
  4040  23f8  3a693a                LD          A,(TIMER_A)
  4041  23fb  c6ff                  ADD         A,$ff
  4042  23fd  32893a                LD          (BYTE_ram_3a89),A
  4043  2400  c9                    RET
  4044                          SUB_ram_e401:
  4045  2401  7d                    LD          A,L
  4046  2402  e60f                  AND         0xf
  4047  2404  47                    LD          B,A
  4048  2405  04                    INC         B
  4049  2406  cd1d24                CALL        SUB_ram_e41d
  4050  2409  4f                    LD          C,A
  4051  240a  7d                    LD          A,L
  4052  240b  e6f0                  AND         $f0
  4053  240d  07                    RLCA
  4054  240e  07                    RLCA
  4055  240f  07                    RLCA
  4056  2410  07                    RLCA
  4057  2411  47                    LD          B,A
  4058  2412  04                    INC         B
  4059  2413  cd1d24                CALL        SUB_ram_e41d
  4060  2416  07                    RLCA
  4061  2417  07                    RLCA
  4062  2418  07                    RLCA
  4063  2419  07                    RLCA
  4064  241a  81                    ADD         A,C
  4065  241b  6f                    LD          L,A
  4066  241c  c9                    RET
  4067                          SUB_ram_e41d:
  4068  241d  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  4069  2420  e60f                  AND         0xf
  4070                          LAB_ram_e422:
  4071  2422  90                    SUB         B
  4072  2423  30fd                  JR          NC,LAB_ram_e422
  4073  2425  80                    ADD         A,B
  4074  2426  c9                    RET
  4075                          SUB_ram_e427:
  4076  2427  7d                    LD          A,L
  4077  2428  83                    ADD         A,E
  4078  2429  27                    DAA
  4079  242a  6f                    LD          L,A
  4080  242b  7a                    LD          A,D
  4081  242c  8c                    ADC         A,H
  4082  242d  27                    DAA
  4083  242e  67                    LD          H,A
  4084  242f  c9                    RET
  4085                          RECALC_PHYS_HEALTH:
  4086  2430  7d                    LD          A,L
  4087  2431  93                    SUB         E
  4088  2432  27                    DAA                                                 ;Normalize BCD
  4089  2433  6f                    LD          L,A
  4090  2434  7c                    LD          A,H
  4091  2435  9a                    SBC         A,D
  4092  2436  27                    DAA                                                 ;Normalize BCD
  4093  2437  67                    LD          H,A
  4094  2438  c9                    RET
  4095                          SUB_ram_e439:
  4096  2439  af                    XOR         A
  4097  243a  cb1c                  RR          H
  4098  243c  3008                  JR          NC,LAB_ram_e446
  4099  243e  cb1d                  RR          L
  4100  2440  7d                    LD          A,L
  4101  2441  d630                  SUB         $30
  4102  2443  6f                    LD          L,A
  4103  2444  1802                  JR          LAB_ram_e448
  4104                          LAB_ram_e446:
  4105  2446  cb1d                  RR          L
  4106                          LAB_ram_e448:
  4107  2448  cb5d                  BIT         0x3,L
  4108  244a  c8                    RET         Z
  4109  244b  7d                    LD          A,L
  4110  244c  d603                  SUB         0x3
  4111  244e  6f                    LD          L,A
  4112  244f  c9                    RET
  4113                          SUB_ram_e450:
  4114  2450  ed5b833a              LD          DE,(BYTE_ram_3a83)
  4115  2454  21003a                LD          HL,ITEM_MOVE_CHR_BUFFER
  4116  2457  c37d29                JP          SUB_ram_e97d
  4117                          LAB_ram_e45a:
  4118  245a  cd5024                CALL        SUB_ram_e450
  4119  245d  3e32                  LD          A,$32
  4120  245f  32643a                LD          (RAM_AC),A
  4121  2462  32653a                LD          (RAM_AD),A
  4122  2465  3a9b3a                LD          A,(WEAPON_SPRT)
  4123  2468  5f                    LD          E,A
  4124  2469  1600                  LD          D,0x0
  4125  246b  fe00                  CP          0x0
  4126  246d  c20f25                JP          NZ,LAB_ram_e50f
  4127  2470  ed5b993a              LD          DE,(WEAPON_PHYS)
  4128  2474  d9                    EXX
  4129  2475  cd4227                CALL        NEW_RIGHT_HAND_ITEM
  4130  2478  d9                    EXX
  4131  2479  2a953a                LD          HL,(PLAYER_PHYS_HEALTH_MAX)
  4132  247c  cd3924                CALL        SUB_ram_e439
  4133  247f  cd3024                CALL        RECALC_PHYS_HEALTH
  4134  2482  3003                  JR          NC,LAB_ram_e487
  4135  2484  210000                LD          HL,0x0
  4136                          LAB_ram_e487:
  4137  2487  cd0124                CALL        SUB_ram_e401
  4138  248a  6c                    LD          L,H
  4139  248b  67                    LD          H,A
  4140  248c  cd0124                CALL        SUB_ram_e401
  4141  248f  6c                    LD          L,H
  4142  2490  67                    LD          H,A
  4143  2491  eb                    EX          DE,HL
  4144  2492  cd3924                CALL        SUB_ram_e439
  4145  2495  eb                    EX          DE,HL
  4146  2496  cd2724                CALL        SUB_ram_e427
  4147  2499  eb                    EX          DE,HL
  4148  249a  cd0124                CALL        SUB_ram_e401
  4149  249d  cd2724                CALL        SUB_ram_e427
  4150  24a0  ed5ba63a              LD          DE,(NEW_DAMAGE)
  4151  24a4  cd3024                CALL        RECALC_PHYS_HEALTH
  4152  24a7  3812                  JR          C,LAB_ram_e4bb
  4153                          LAB_ram_e4a9:
  4154  24a9  eb                    EX          DE,HL
  4155  24aa  2aa33a                LD          HL,(CURR_MONSTER_PHYS)
  4156  24ad  cd3024                CALL        RECALC_PHYS_HEALTH
  4157  24b0  3811                  JR          C,LAB_ram_e4c3
  4158  24b2  b5                    OR          L
  4159  24b3  280e                  JR          Z,LAB_ram_e4c3
  4160  24b5  22a33a                LD          (CURR_MONSTER_PHYS),HL
  4161  24b8  c36932                JP          REDRAW_MONSTER_HEALTH
  4162                          LAB_ram_e4bb:
  4163  24bb  210600                LD          HL,0x6
  4164  24be  cd0124                CALL        SUB_ram_e401
  4165  24c1  18e6                  JR          LAB_ram_e4a9
  4166                          LAB_ram_e4c3:
  4167  24c3  d9                    EXX
  4168  24c4  210000                LD          HL,0x0
  4169  24c7  22a33a                LD          (CURR_MONSTER_PHYS),HL
  4170  24ca  cd6932                CALL        REDRAW_MONSTER_HEALTH
  4171  24cd  d9                    EXX
  4172  24ce  2c                    INC         L
  4173  24cf  3e99                  LD          A,$99
  4174  24d1  bc                    CP          H
  4175  24d2  c21016                JP          NZ,MONSTER_KILLED
  4176  24d5  3e61                  LD          A,$61
  4177  24d7  bd                    CP          L
  4178  24d8  d21016                JP          NC,MONSTER_KILLED
  4179  24db  3a4134                LD          A,(COLRAM_PHYS_STATS_1000)              ;= $60
  4180  24de  cdba25                CALL        SUB_ram_e5ba
  4181  24e1  2a953a                LD          HL,(PLAYER_PHYS_HEALTH_MAX)
  4182  24e4  cd3924                CALL        SUB_ram_e439
  4183  24e7  7d                    LD          A,L
  4184  24e8  b8                    CP          B
  4185  24e9  d21016                JP          NC,MONSTER_KILLED
  4186                          LAB_ram_e4ec:
  4187  24ec  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  4188  24ef  d640                  SUB         $40
  4189  24f1  3804                  JR          C,INCREASE_MAX_PHYS_HEALTH
  4190  24f3  b9                    CP          C
  4191  24f4  d21016                JP          NC,MONSTER_KILLED
  4192                          INCREASE_MAX_PHYS_HEALTH:
  4193  24f7  2a953a                LD          HL,(PLAYER_PHYS_HEALTH_MAX)
  4194  24fa  7d                    LD          A,L
  4195  24fb  c601                  ADD         A,0x1
  4196  24fd  27                    DAA                                                 ;Correct for BCD
  4197  24fe  6f                    LD          L,A
  4198  24ff  7c                    LD          A,H
  4199  2500  ce00                  ADC         A,0x0
  4200  2502  67                    LD          H,A
  4201  2503  22953a                LD          (PLAYER_PHYS_HEALTH_MAX),HL
  4202  2506  79                    LD          A,C
  4203  2507  d610                  SUB         $10
  4204  2509  da1016                JP          C,MONSTER_KILLED
  4205  250c  4f                    LD          C,A
  4206  250d  18dd                  JR          LAB_ram_e4ec
  4207                          LAB_ram_e50f:
  4208  250f  3a983a                LD          A,(PLAYER_SPRT_HEALTH_MAX)
  4209  2512  2600                  LD          H,0x0
  4210  2514  6f                    LD          L,A
  4211  2515  d9                    EXX
  4212  2516  cd4227                CALL        NEW_RIGHT_HAND_ITEM
  4213  2519  d9                    EXX
  4214  251a  cd3924                CALL        SUB_ram_e439
  4215  251d  7d                    LD          A,L
  4216  251e  93                    SUB         E
  4217  251f  27                    DAA
  4218  2520  6f                    LD          L,A
  4219  2521  3002                  JR          NC,LAB_ram_e525
  4220  2523  2e00                  LD          L,0x0
  4221                          LAB_ram_e525:
  4222  2525  cd0124                CALL        SUB_ram_e401
  4223  2528  eb                    EX          DE,HL
  4224  2529  cd3924                CALL        SUB_ram_e439
  4225  252c  7d                    LD          A,L
  4226  252d  83                    ADD         A,E
  4227  252e  27                    DAA
  4228  252f  5f                    LD          E,A
  4229  2530  cd0124                CALL        SUB_ram_e401
  4230  2533  83                    ADD         A,E
  4231  2534  27                    DAA
  4232  2535  6f                    LD          L,A
  4233  2536  3aa53a                LD          A,(BYTE_ram_3aa5)
  4234  2539  5f                    LD          E,A
  4235  253a  7d                    LD          A,L
  4236  253b  93                    SUB         E
  4237  253c  27                    DAA
  4238  253d  3810                  JR          C,LAB_ram_e54f
  4239  253f  6f                    LD          L,A
  4240                          MONSTER_TAKES_SPRT_DAMAGE:
  4241  2540  3aa23a                LD          A,(CURR_MONSTER_SPRT)
  4242  2543  95                    SUB         L
  4243  2544  27                    DAA
  4244  2545  3810                  JR          C,LAB_ram_e557
  4245  2547  280e                  JR          Z,LAB_ram_e557
  4246  2549  32a23a                LD          (CURR_MONSTER_SPRT),A
  4247  254c  c36932                JP          REDRAW_MONSTER_HEALTH
  4248                          LAB_ram_e54f:
  4249  254f  210300                LD          HL,0x3
  4250  2552  cd0124                CALL        SUB_ram_e401
  4251  2555  18e9                  JR          MONSTER_TAKES_SPRT_DAMAGE
  4252                          LAB_ram_e557:
  4253  2557  f5                    PUSH        AF
  4254  2558  af                    XOR         A
  4255  2559  32a23a                LD          (CURR_MONSTER_SPRT),A
  4256  255c  cd6932                CALL        REDRAW_MONSTER_HEALTH
  4257  255f  f1                    POP         AF
  4258  2560  3d                    DEC         A
  4259  2561  fe86                  CP          $86
  4260  2563  3827                  JR          C,ITEM_USED_UP
  4261  2565  3a4634                LD          A,(COLRAM_SPRT_STATS_10)                ;= $60
  4262  2568  cdba25                CALL        SUB_ram_e5ba
  4263  256b  3a983a                LD          A,(PLAYER_SPRT_HEALTH_MAX)
  4264  256e  b8                    CP          B
  4265  256f  301b                  JR          NC,ITEM_USED_UP
  4266                          REDUCE_ITEM_BY_30:
  4267  2571  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  4268  2574  d630                  SUB         $30
  4269  2576  3803                  JR          C,INCREASE_MAX_SPRT_HEALTH
  4270  2578  b9                    CP          C
  4271  2579  3011                  JR          NC,ITEM_USED_UP
  4272                          INCREASE_MAX_SPRT_HEALTH:
  4273  257b  3a983a                LD          A,(PLAYER_SPRT_HEALTH_MAX)
  4274  257e  c601                  ADD         A,0x1
  4275  2580  27                    DAA                                                 ;Correct for BCD
  4276  2581  32983a                LD          (PLAYER_SPRT_HEALTH_MAX),A
  4277  2584  79                    LD          A,C
  4278  2585  d610                  SUB         $10
  4279  2587  3803                  JR          C,ITEM_USED_UP
  4280  2589  4f                    LD          C,A
  4281  258a  18e5                  JR          REDUCE_ITEM_BY_30
  4282                          ITEM_USED_UP:
  4283  258c  c31016                JP          MONSTER_KILLED
  4284  258f  00                    db          $00
  4285  2590  00                    db          $00
  4286  2591  00                    db          $00
  4287  2592  00                    db          $00
  4288  2593  00                    db          $00
  4289  2594  00                    db          $00
  4290  2595  00                    db          $00
  4291  2596  00                    db          $00
  4292  2597  00                    db          $00
  4293  2598  00                    db          $00
  4294  2599  00                    db          $00
  4295  259a  00                    db          $00
  4296  259b  00                    db          $00
  4297  259c  00                    db          $00
  4298  259d  00                    db          $00
  4299  259e  00                    db          $00
  4300  259f  00                    db          $00
  4301  25a0  00                    db          $00
  4302  25a1  00                    db          $00
  4303  25a2  00                    db          $00
  4304  25a3  00                    db          $00
  4305  25a4  00                    db          $00
  4306  25a5  00                    db          $00
  4307  25a6  00                    db          $00
  4308  25a7  00                    db          $00
  4309  25a8  00                    db          $00
  4310  25a9  00                    db          $00
  4311  25aa  00                    db          $00
  4312                          CLEAR_MONSTER_STATS:
  4313  25ab  af                    XOR         A                                       ;A  = $fe on entry (usually)
  4314                                                                                  ;A  = $00 after
  4315                                                                                  ;Reset C & N, Set Z
  4316                                                                                  ;
  4317  25ac  32783a                LD          (LAST_ITEM_HELD),A                   ;ItemHolder = $00
  4318  25af  010304                LD          BC,$403
  4319  25b2  213d33                LD          HL,CHRRAM_LEVEL_IDX                     ;= $20
  4320  25b5  3e20                  LD          A,$20
  4321  25b7  c3cb08                JP          FILL_CHRCOL_RECT
  4322                          SUB_ram_e5ba:
  4323  25ba  e60f                  AND         0xf
  4324  25bc  3c                    INC         A
  4325  25bd  3c                    INC         A
  4326  25be  47                    LD          B,A
  4327  25bf  07                    RLCA
  4328  25c0  07                    RLCA
  4329  25c1  07                    RLCA
  4330  25c2  07                    RLCA
  4331  25c3  4f                    LD          C,A
  4332  25c4  78                    LD          A,B
  4333  25c5  87                    ADD         A,A
  4334  25c6  27                    DAA
  4335  25c7  87                    ADD         A,A
  4336  25c8  27                    DAA
  4337  25c9  87                    ADD         A,A
  4338  25ca  27                    DAA
  4339  25cb  87                    ADD         A,A
  4340  25cc  27                    DAA
  4341  25cd  47                    LD          B,A
  4342  25ce  c9                    RET
  4343                          MELEE_ANIM_LOOP:
  4344  25cf  cd700e                CALL        SOUND_05
  4345  25d2  3a8b3a                LD          A,(MELEE_ANIM_STATE)
  4346  25d5  2a8d3a                LD          HL,(MONSTER_ATT_POS_COUNT)
  4347  25d8  3d                    DEC         A
  4348  25d9  c20026                JP          NZ,LAB_ram_e600
  4349  25dc  2d                    DEC         L
  4350  25dd  c2eb25                JP          NZ,LAB_ram_e5eb
  4351  25e0  25                    DEC         H
  4352  25e1  ca3f26                JP          Z,LAB_ram_e63f
  4353  25e4  3e32                  LD          A,$32
  4354  25e6  32673a                LD          (RAM_AF),A
  4355  25e9  2e02                  LD          L,0x2
  4356                          LAB_ram_e5eb:
  4357  25eb  3e03                  LD          A,0x3
  4358  25ed  328b3a                LD          (MELEE_ANIM_STATE),A
  4359  25f0  228d3a                LD          (MONSTER_ATT_POS_COUNT),HL
  4360  25f3  2a8f3a                LD          HL,(MONSTER_ATT_POS_OFFSET)
  4361  25f6  012900                LD          BC,$29
  4362  25f9  09                    ADD         HL,BC
  4363  25fa  228f3a                LD          (MONSTER_ATT_POS_OFFSET),HL
  4364  25fd  c30a26                JP          ANIMATE_MELEE_ROUND
  4365                          LAB_ram_e600:
  4366  2600  328b3a                LD          (MELEE_ANIM_STATE),A
  4367  2603  2a8f3a                LD          HL,(MONSTER_ATT_POS_OFFSET)
  4368  2606  23                    INC         HL
  4369  2607  228f3a                LD          (MONSTER_ATT_POS_OFFSET),HL
  4370                          ANIMATE_MELEE_ROUND:
  4371  260a  01c800                LD          BC,$c8
  4372  260d  af                    XOR         A
  4373  260e  ed42                  SBC         HL,BC
  4374  2610  e5                    PUSH        HL
  4375  2611  09                    ADD         HL,BC
  4376  2612  11203a                LD          DE,BYTE_ram_3a20
  4377  2615  cd6029                CALL        UPDATE_MELEE_OBJECTSdb
  4378  2618  c1                    POP         BC
  4379  2619  0600                  LD          B,0x0
  4380  261b  3a673a                LD          A,(RAM_AF)
  4381  261e  32633a                LD          (MON_FS),A
  4382  2621  3a8a3a                LD          A,(BYTE_ram_3a8a)
  4383  2624  cdac2c                CALL        CHK_ITEM
  4384  2627  3e32                  LD          A,$32
  4385  2629  32633a                LD          (MON_FS),A
  4386  262c  3a693a                LD          A,(TIMER_A)
  4387  262f  c6ff                  ADD         A,$ff
  4388  2631  328c3a                LD          (BYTE_ram_3a8c),A
  4389  2634  c9                    RET
  4390                          SUB_ram_e635:
  4391  2635  ed5b8f3a              LD          DE,(MONSTER_ATT_POS_OFFSET)
  4392  2639  21203a                LD          HL,BYTE_ram_3a20
  4393  263c  c37d29                JP          SUB_ram_e97d
  4394                          LAB_ram_e63f:
  4395  263f  cd3526                CALL        SUB_ram_e635
  4396  2642  3e31                  LD          A,$31
  4397  2644  32673a                LD          (RAM_AF),A
  4398  2647  32663a                LD          (RAM_AE),A
  4399  264a  3a6c3a                LD          A,(INPUT_HOLDER)
  4400  264d  47                    LD          B,A
  4401  264e  2600                  LD          H,0x0
  4402  2650  3aa83a                LD          A,(WEAPON_VALUE_HOLDER)
  4403  2653  6f                    LD          L,A
  4404  2654  1802                  JR          LAB_ram_e658
  4405                          LAB_ram_e656:
  4406  2656  85                    ADD         A,L
  4407  2657  27                    DAA
  4408                          LAB_ram_e658:
  4409  2658  10fc                  DJNZ        LAB_ram_e656
  4410  265a  6f                    LD          L,A
  4411  265b  3a8a3a                LD          A,(BYTE_ram_3a8a)
  4412  265e  e6fc                  AND         $fc
  4413  2660  fe24                  CP          $24
  4414  2662  202f                  JR          NZ,LAB_ram_e693
  4415  2664  3a733a                LD          A,(SHIELD_SPRT)
  4416  2667  5f                    LD          E,A
  4417  2668  cd3924                CALL        SUB_ram_e439
  4418  266b  55                    LD          D,L
  4419  266c  cd0124                CALL        SUB_ram_e401
  4420  266f  7d                    LD          A,L
  4421  2670  82                    ADD         A,D
  4422  2671  27                    DAA
  4423  2672  93                    SUB         E
  4424  2673  27                    DAA
  4425  2674  3814                  JR          C,LAB_ram_e68a
  4426  2676  5f                    LD          E,A
  4427                          LAB_ram_e677:
  4428  2677  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  4429  267a  93                    SUB         E
  4430  267b  27                    DAA
  4431  267c  daa92f                JP          C,PLAYER_DIES
  4432  267f  caa92f                JP          Z,PLAYER_DIES
  4433  2682  32973a                LD          (PLAYER_SPRT_HEALTH),A
  4434  2685  cd5d3d                CALL        REDRAW_STATS
  4435  2688  1834                  JR          LAB_ram_e6be
  4436                          LAB_ram_e68a:
  4437  268a  210200                LD          HL,0x2
  4438  268d  cd0124                CALL        SUB_ram_e401
  4439  2690  5d                    LD          E,L
  4440  2691  18e4                  JR          LAB_ram_e677
  4441                          LAB_ram_e693:
  4442  2693  cd0124                CALL        SUB_ram_e401
  4443  2696  3aa83a                LD          A,(WEAPON_VALUE_HOLDER)
  4444  2699  85                    ADD         A,L
  4445  269a  27                    DAA
  4446  269b  6f                    LD          L,A
  4447  269c  7c                    LD          A,H
  4448  269d  ce00                  ADC         A,0x0
  4449  269f  27                    DAA
  4450  26a0  67                    LD          H,A
  4451  26a1  ed5b713a              LD          DE,(SHIELD_PHYS)
  4452  26a5  cd3024                CALL        RECALC_PHYS_HEALTH
  4453  26a8  381a                  JR          C,LAB_ram_e6c4
  4454                          LAB_ram_e6aa:
  4455  26aa  eb                    EX          DE,HL
  4456  26ab  2a933a                LD          HL,(PLAYER_PHYS_HEALTH)
  4457  26ae  cd3024                CALL        RECALC_PHYS_HEALTH
  4458  26b1  daa92f                JP          C,PLAYER_DIES
  4459  26b4  b5                    OR          L
  4460  26b5  caa92f                JP          Z,PLAYER_DIES
  4461  26b8  22933a                LD          (PLAYER_PHYS_HEALTH),HL
  4462  26bb  cd5d3d                CALL        REDRAW_STATS
  4463                          LAB_ram_e6be:
  4464  26be  cde634                CALL        REDRAW_START
  4465  26c1  c30438                JP          REDRAW_VIEWPORT
  4466                          LAB_ram_e6c4:
  4467  26c4  210300                LD          HL,0x3
  4468  26c7  cd0124                CALL        SUB_ram_e401
  4469  26ca  18de                  JR          LAB_ram_e6aa
  4470                          DO_SWAP_HANDS:
  4471  26cc  217a3a                LD          HL,RIGHT_HAND_ITEM
  4472  26cf  017b3a                LD          BC,LEFT_HAND_ITEM
  4473  26d2  cd622a                CALL        SUB_ram_ea62
  4474  26d5  214333                LD          HL,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  4475  26d8  11003a                LD          DE,ITEM_MOVE_CHR_BUFFER
  4476  26db  cd6029                CALL        UPDATE_MELEE_OBJECTSdb
  4477  26de  213933                LD          HL,CHRRAM_LEFT_HD_GFX_IDX               ;= $20
  4478  26e1  114333                LD          DE,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  4479  26e4  cd9e29                CALL        SUB_ram_e99e
  4480  26e7  21003a                LD          HL,ITEM_MOVE_CHR_BUFFER
  4481  26ea  113933                LD          DE,CHRRAM_LEFT_HD_GFX_IDX               ;= $20
  4482  26ed  cd7d29                CALL        SUB_ram_e97d
  4483  26f0  cd4227                CALL        NEW_RIGHT_HAND_ITEM
  4484  26f3  010000                LD          BC,0x0
  4485  26f6  217a3a                LD          HL,RIGHT_HAND_ITEM
  4486  26f9  cd2027                CALL        SUB_ram_e720
  4487  26fc  3a733a                LD          A,(SHIELD_SPRT)
  4488  26ff  91                    SUB         C
  4489  2700  27                    DAA
  4490  2701  32733a                LD          (SHIELD_SPRT),A
  4491  2704  3a713a                LD          A,(SHIELD_PHYS)
  4492  2707  90                    SUB         B
  4493  2708  27                    DAA
  4494  2709  32713a                LD          (SHIELD_PHYS),A
  4495  270c  3a723a                LD          A,(SHIELD_PHYS+1)
  4496  270f  de00                  SBC         A,0x0
  4497  2711  32723a                LD          (SHIELD_PHYS+1),A
  4498  2714  010000                LD          BC,0x0
  4499  2717  217b3a                LD          HL,LEFT_HAND_ITEM
  4500  271a  cd2027                CALL        SUB_ram_e720
  4501  271d  c31228                JP          LAB_ram_e812
  4502                          SUB_ram_e720:
  4503  2720  7e                    LD          A,(HL)
  4504  2721  fe14                  CP          $14
  4505  2723  d0                    RET         NC
  4506  2724  fe10                  CP          $10
  4507  2726  3003                  JR          NC,LAB_ram_e72b
  4508  2728  fe04                  CP          0x4
  4509  272a  d0                    RET         NC
  4510                          LAB_ram_e72b:
  4511  272b  e603                  AND         0x3
  4512  272d  3c                    INC         A
  4513  272e  cdc129                CALL        SUB_ram_e9c1
  4514  2731  7e                    LD          A,(HL)
  4515  2732  e6fc                  AND         $fc
  4516  2734  c0                    RET         NZ
  4517  2735  2600                  LD          H,0x0
  4518  2737  68                    LD          L,B
  4519  2738  cd3924                CALL        SUB_ram_e439
  4520  273b  45                    LD          B,L
  4521  273c  69                    LD          L,C
  4522  273d  cd3924                CALL        SUB_ram_e439
  4523  2740  4d                    LD          C,L
  4524  2741  c9                    RET
  4525                          NEW_RIGHT_HAND_ITEM:
  4526  2742  3a7a3a                LD          A,(RIGHT_HAND_ITEM)
  4527  2745  fe18                  CP          $18                                    ;Less than RED Bow
  4528  2747  3877                  JR          C,LAB_ram_e7c0
  4529  2749  fe34                  CP          $34                                    ;Greater than WHITE Crossbow
  4530  274b  3073                  JR          NC,LAB_ram_e7c0
  4531  274d  010000                LD          BC,0x0                                  ;C = 0
  4532  2750  1e00                  LD          E,0x0                                   ;E = 0
  4533  2752  cb3f                  SRL         A                                       ;Div A by 2
  4534  2754  cb18                  RR          B
  4535  2756  1f                    RRA
  4536  2757  cb10                  RL          B
  4537  2759  cb10                  RL          B
  4538  275b  d606                  SUB         0x6
  4539  275d  2004                  JR          NZ,LAB_ram_e763
  4540  275f  1606                  LD          D,0x6
  4541  2761  1828                  JR          LAB_ram_e78b
  4542                          LAB_ram_e763:
  4543  2763  3d                    DEC         A
  4544  2764  2004                  JR          NZ,LAB_ram_e76a
  4545  2766  1606                  LD          D,0x6
  4546  2768  1834                  JR          LAB_ram_e79e
  4547                          LAB_ram_e76a:
  4548  276a  3d                    DEC         A
  4549  276b  2004                  JR          NZ,LAB_ram_e771
  4550  276d  1616                  LD          D,$16
  4551  276f  181a                  JR          LAB_ram_e78b
  4552                          LAB_ram_e771:
  4553  2771  3d                    DEC         A
  4554  2772  2004                  JR          NZ,LAB_ram_e778
  4555  2774  1620                  LD          D,$20
  4556  2776  1826                  JR          LAB_ram_e79e
  4557                          LAB_ram_e778:
  4558  2778  3d                    DEC         A
  4559  2779  2004                  JR          NZ,LAB_ram_e77f
  4560  277b  1624                  LD          D,$24
  4561  277d  180c                  JR          LAB_ram_e78b
  4562                          LAB_ram_e77f:
  4563  277f  3d                    DEC         A
  4564  2780  2004                  JR          NZ,LAB_ram_e786
  4565  2782  1615                  LD          D,$15
  4566  2784  1818                  JR          LAB_ram_e79e
  4567                          LAB_ram_e786:
  4568  2786  3d                    DEC         A
  4569  2787  1618                  LD          D,$18
  4570  2789  00                    NOP
  4571  278a  00                    NOP
  4572                          LAB_ram_e78b:
  4573  278b  cd8532                CALL        CALC_WEAPON_VALUE
  4574  278e  87                    ADD         A,A
  4575  278f  27                    DAA                                                 ;BCD Correction
  4576  2790  6f                    LD          L,A
  4577  2791  3e00                  LD          A,0x0
  4578  2793  17                    RLA
  4579  2794  67                    LD          H,A
  4580  2795  22993a                LD          (WEAPON_PHYS),HL
  4581  2798  af                    XOR         A
  4582  2799  329b3a                LD          (WEAPON_SPRT),A
  4583  279c  180c                  JR          LAB_ram_e7aa
  4584                          LAB_ram_e79e:
  4585  279e  cd8532                CALL        CALC_WEAPON_VALUE
  4586  27a1  329b3a                LD          (WEAPON_SPRT),A
  4587  27a4  210000                LD          HL,0x0
  4588  27a7  22993a                LD          (WEAPON_PHYS),HL
  4589                          LAB_ram_e7aa:
  4590  27aa  119130                LD          DE,CHRRAM_PHYS_WEAPON_IDX               ;= $20
  4591  27ad  21993a                LD          HL,WEAPON_PHYS
  4592  27b0  0602                  LD          B,0x2
  4593  27b2  cdfd32                CALL        RECALC_AND_REDRAW_BCD
  4594  27b5  119730                LD          DE,CHRRAM_SPRT_WEAPON_IDX               ;= $20
  4595  27b8  219b3a                LD          HL,WEAPON_SPRT
  4596  27bb  0601                  LD          B,0x1
  4597  27bd  c3fd32                JP          RECALC_AND_REDRAW_BCD
  4598                          LAB_ram_e7c0:
  4599  27c0  210000                LD          HL,0x0                                  ;HL = 0
  4600  27c3  af                    XOR         A                                       ;A  = 0
  4601  27c4  22993a                LD          (WEAPON_PHYS),HL
  4602  27c7  329b3a                LD          (WEAPON_SPRT),A
  4603  27ca  18de                  JR          LAB_ram_e7aa
  4604                          DO_PICK_UP:
  4605  27cc  3aa13a                LD          A,(ITEM_HOLDER)
  4606  27cf  47                    LD          B,A
  4607  27d0  3a793a                LD          A,(PLAYER_MAP_POS)
  4608  27d3  b8                    CP          B                                       ;Check difference between
  4609                                                                                  ;item and item location
  4610  27d4  ca3022                JP          Z,NO_ACTION_TAKEN
  4611  27d7  3c                    INC         A
  4612  27d8  ca3022                JP          Z,NO_ACTION_TAKEN
  4613  27db  3d                    DEC         A
  4614  27dc  cdf337                CALL        ITEM_MAP_CHECK
  4615  27df  2863                  JR          Z,LAB_ram_e844
  4616  27e1  fe04                  CP          0x4                                     ;Compare to RING (0x4)
  4617  27e3  3862                  JR          C,CHECK_FOOD_ARROWS                     ;Jump if less than RING (C)
  4618  27e5  fe10                  CP          $10                                    ;Compare to PAVICE ($10)
  4619  27e7  305e                  JR          NC,CHECK_FOOD_ARROWS                    ;Jump if PAVICE or greater (NC)
  4620                          PROCESS_RHA:
  4621  27e9  cd4129                CALL        PICK_UP_F0_ITEM
  4622  27ec  21743a                LD          HL,ARMOR_INV_SLOT                       ;Start with ARMOR slot
  4623  27ef  3d                    DEC         A                                       ;Subtract 1 from A:
  4624                                                                                  ;- Armor
  4625  27f0  2002                  JR          NZ,NOT_ARMOR                            ;Treat as NOT ARMOR
  4626  27f2  23                    INC         HL                                      ;HL = HELMET_INV_SLOT
  4627  27f3  23                    INC         HL                                      ;HL = RING_INV_SLOT
  4628                          NOT_ARMOR:
  4629  27f4  3d                    DEC         A
  4630  27f5  2001                  JR          NZ,NOT_HELMET
  4631  27f7  23                    INC         HL
  4632                          NOT_HELMET:
  4633  27f8  7e                    LD          A,(HL)
  4634  27f9  14                    INC         D
  4635  27fa  ba                    CP          D
  4636  27fb  d29c2a                JP          NC,INPUT_DEBOUNCE
  4637  27fe  08                    EX          AF,AF'
  4638  27ff  7a                    LD          A,D
  4639  2800  77                    LD          (HL),A
  4640  2801  cdc129                CALL        SUB_ram_e9c1
  4641  2804  59                    LD          E,C
  4642  2805  50                    LD          D,B
  4643  2806  08                    EX          AF,AF'
  4644  2807  cdc129                CALL        SUB_ram_e9c1
  4645  280a  7b                    LD          A,E
  4646  280b  91                    SUB         C
  4647  280c  27                    DAA                                                 ;BCD Correction
  4648  280d  4f                    LD          C,A
  4649  280e  7a                    LD          A,D
  4650  280f  90                    SUB         B
  4651  2810  27                    DAA                                                 ;BCD Correction
  4652  2811  47                    LD          B,A
  4653                          LAB_ram_e812:
  4654  2812  3a733a                LD          A,(SHIELD_SPRT)
  4655  2815  81                    ADD         A,C
  4656  2816  27                    DAA                                                 ;BCD Correction
  4657  2817  32733a                LD          (SHIELD_SPRT),A
  4658  281a  3a713a                LD          A,(SHIELD_PHYS)
  4659  281d  80                    ADD         A,B
  4660  281e  27                    DAA                                                 ;BCD Correction
  4661  281f  32713a                LD          (SHIELD_PHYS),A
  4662  2822  3a723a                LD          A,(SHIELD_PHYS+1)
  4663  2825  ce00                  ADC         A,0x0
  4664  2827  27                    DAA                                                 ;BCD Correction
  4665  2828  32723a                LD          (SHIELD_PHYS+1),A
  4666  282b  21713a                LD          HL,SHIELD_PHYS
  4667  282e  116930                LD          DE,CHRRAM_PHYS_SHIELD_IDX               ;= $20
  4668  2831  0602                  LD          B,0x2
  4669  2833  cdfd32                CALL        RECALC_AND_REDRAW_BCD
  4670  2836  21733a                LD          HL,SHIELD_SPRT
  4671  2839  116f30                LD          DE,CHRRAM_SPRT_SHIELD_IDX               ;= $20
  4672  283c  0601                  LD          B,0x1
  4673  283e  cdfd32                CALL        RECALC_AND_REDRAW_BCD
  4674  2841  c3e43d                JP          RHA_REDRAW                              ;Was JP AWAITING_INPUT
  4675                                                                                  ;(c3 9c ea)
  4676                          LAB_ram_e844:
  4677  2844  cce129                CALL        Z,SUB_ram_e9e1
  4678                          CHECK_FOOD_ARROWS:
  4679  2847  fe48                  CP          $48
  4680  2849  384a                  JR          C,CHECK_MAP_NECKLACE_CHARMS             ;CHEST or lower
  4681  284b  fe50                  CP          $50
  4682  284d  3046                  JR          NC,CHECK_MAP_NECKLACE_CHARMS            ;LOCKED CHEST or higher
  4683  284f  cd4129                CALL        PICK_UP_F0_ITEM
  4684  2852  14                    INC         D
  4685  2853  cb12                  RL          D
  4686  2855  14                    INC         D
  4687  2856  fe12                  CP          $12
  4688  2858  202b                  JR          NZ,PICK_UP_ARROWS
  4689  285a  d5                    PUSH        DE
  4690  285b  cd6528                CALL        PICK_UP_FOOD
  4691  285e  d1                    POP         DE
  4692  285f  cd6528                CALL        PICK_UP_FOOD
  4693  2862  c39c2a                JP          INPUT_DEBOUNCE
  4694                          PICK_UP_FOOD:
  4695  2865  3aab3a                LD          A,(FOOD_INV)
  4696  2868  82                    ADD         A,D
  4697  2869  3007                  JR          NC,LAB_ram_e872
  4698  286b  3c                    INC         A
  4699  286c  4f                    LD          C,A
  4700  286d  7a                    LD          A,D
  4701  286e  91                    SUB         C
  4702  286f  57                    LD          D,A
  4703  2870  18f3                  JR          PICK_UP_FOOD
  4704                          LAB_ram_e872:
  4705  2872  32ab3a                LD          (FOOD_INV),A
  4706  2875  2aa93a                LD          HL,(BYTE_ram_3aa9)
  4707  2878  7a                    LD          A,D
  4708  2879  85                    ADD         A,L
  4709  287a  27                    DAA                                                 ;BCD correct
  4710  287b  6f                    LD          L,A
  4711  287c  7c                    LD          A,H
  4712  287d  ce00                  ADC         A,0x0
  4713  287f  27                    DAA                                                 ;BCD correct
  4714  2880  67                    LD          H,A
  4715  2881  22a93a                LD          (BYTE_ram_3aa9),HL
  4716  2884  c9                    RET
  4717                          PICK_UP_ARROWS:
  4718  2885  3aac3a                LD          A,(ARROW_INV)
  4719  2888  82                    ADD         A,D
  4720  2889  fe33                  CP          $33
  4721  288b  3802                  JR          C,ADD_ARROWS_TO_INV
  4722  288d  3e32                  LD          A,$32
  4723                          ADD_ARROWS_TO_INV:
  4724  288f  32ac3a                LD          (ARROW_INV),A
  4725  2892  c39c2a                JP          INPUT_DEBOUNCE
  4726                          CHECK_MAP_NECKLACE_CHARMS:
  4727  2895  fe6c                  CP          $6c                                    ;Red MAP
  4728  2897  2821                  JR          Z,PROCESS_MAP
  4729  2899  fe6d                  CP          $6d                                    ;Yellow MAP
  4730  289b  281d                  JR          Z,PROCESS_MAP
  4731  289d  fede                  CP          $de                                    ;Purple MAP
  4732  289f  2819                  JR          Z,PROCESS_MAP
  4733  28a1  fedf                  CP          $df                                    ;White MAP
  4734  28a3  2815                  JR          Z,PROCESS_MAP
  4735  28a5  00                    db          $00
  4736  28a6  00                    db          $00
  4737  28a7  00                    db          $00
  4738  28a8  00                    db          $00
  4739  28a9  00                    db          $00
  4740  28aa  00                    db          $00
  4741  28ab  00                    db          $00
  4742  28ac  fe5c                  CP          $5c                                    ;WHITE KEY or lower
  4743  28ae  3829                  JR          C,PICK_UP_NON_TREASURE
  4744  28b0  fe64                  CP          $64
  4745  28b2  3025                  JR          NC,PICK_UP_NON_TREASURE                 ;WARRIOR POTION or higher
  4746  28b4  cd4129                CALL        PICK_UP_F0_ITEM
  4747  28b7  c39c2a                JP          INPUT_DEBOUNCE
  4748                          PROCESS_MAP:
  4749  28ba  f5                    PUSH        AF
  4750  28bb  3ab93a                LD          A,(GAME_BOOLEANS)
  4751  28be  cbd7                  SET         0x2,A
  4752  28c0  32b93a                LD          (GAME_BOOLEANS),A
  4753  28c3  f1                    POP         AF
  4754  28c4  cd4129                CALL        PICK_UP_F0_ITEM
  4755  28c7  ed53ad3a              LD          (MAP_INV_SLOT),DE
  4756  28cb  f5                    PUSH        AF
  4757  28cc  3aad3a                LD          A,(MAP_INV_SLOT)
  4758  28cf  cdd83d                CALL        LEVEL_TO_COLRAM_FIX
  4759  28d2  321134                LD          (COLRAM_MAP_IDX),A                      ;= $60    `
  4760  28d5  f1                    POP         AF
  4761  28d6  c39c2a                JP          INPUT_DEBOUNCE
  4762                          PICK_UP_NON_TREASURE:
  4763  28d9  217a3a                LD          HL,RIGHT_HAND_ITEM
  4764  28dc  7e                    LD          A,(HL)
  4765  28dd  32ea37                LD          (ITEM_F0),A                             ;= $60
  4766  28e0  cd622a                CALL        SUB_ram_ea62
  4767  28e3  214333                LD          HL,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  4768  28e6  11003a                LD          DE,ITEM_MOVE_CHR_BUFFER
  4769  28e9  cd6029                CALL        UPDATE_MELEE_OBJECTSdb
  4770  28ec  215233                LD          HL,CHRRAM_FO_ITEM_IDX                   ;= $20
  4771  28ef  114333                LD          DE,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  4772  28f2  cd9e29                CALL        SUB_ram_e99e
  4773  28f5  21003a                LD          HL,ITEM_MOVE_CHR_BUFFER
  4774  28f8  115233                LD          DE,CHRRAM_FO_ITEM_IDX                   ;= $20
  4775  28fb  cd7d29                CALL        SUB_ram_e97d
  4776  28fe  215237                LD          HL,COLRAM_FO_ITEM_IDX                   ;= $60    `
  4777  2901  11000f                LD          DE,$f00                                ;BLK on DKGY /
  4778                                                                                  ;BLK on BLK
  4779                                                                                  ;WAS BLK on DKCYN /
  4780                                                                                  ;    BLK on BLK
  4781                                                                                  ;WAS LD DE,$0900
  4782  2904  0ef0                  LD          C,$f0                                  ;Floor color (for compare)
  4783                                                                                  ;DKGRY on BLK
  4784                                                                                  ;WAS DKCYN on BLK
  4785  2906  cd1a29                CALL        RECOLOR_ITEM
  4786  2909  214337                LD          HL,COLRAM_RH_ITEM_IDX                   ;= $60    `
  4787  290c  11f000                LD          DE,$f0                                 ;Floor color (for fill)
  4788                                                                                  ;DKGRY on BLK
  4789                                                                                  ;WAS DKCYN on BLK
  4790  290f  0e00                  LD          C,0x0
  4791  2911  cd1a29                CALL        RECOLOR_ITEM
  4792  2914  cd4227                CALL        NEW_RIGHT_HAND_ITEM
  4793  2917  c39c2a                JP          INPUT_DEBOUNCE
  4794                          RECOLOR_ITEM:
  4795  291a  3e04                  LD          A,0x4
  4796                          LAB_ram_e91c:
  4797  291c  08                    EX          AF,AF'
  4798  291d  0604                  LD          B,0x4
  4799                          LAB_ram_e91f:
  4800  291f  7e                    LD          A,(HL)
  4801  2920  e6f0                  AND         $f0
  4802  2922  bb                    CP          E
  4803  2923  2810                  JR          Z,LAB_ram_e935
  4804  2925  b2                    OR          D
  4805                          LAB_ram_e926:
  4806  2926  77                    LD          (HL),A
  4807  2927  23                    INC         HL
  4808  2928  10f5                  DJNZ        LAB_ram_e91f
  4809  292a  d5                    PUSH        DE
  4810  292b  112400                LD          DE,$24                                 ;Jump ahead 36 cells
  4811                                                                                  ;(40 - 4)
  4812  292e  19                    ADD         HL,DE
  4813  292f  d1                    POP         DE
  4814  2930  08                    EX          AF,AF'
  4815  2931  3d                    DEC         A
  4816  2932  20e8                  JR          NZ,LAB_ram_e91c
  4817  2934  c9                    RET
  4818                          LAB_ram_e935:
  4819  2935  7e                    LD          A,(HL)
  4820  2936  e60f                  AND         0xf
  4821  2938  b1                    OR          C
  4822  2939  18eb                  JR          LAB_ram_e926
  4823                          WAIT_A_TICK:
  4824  293b  010086                LD          BC,$8600                               ;Sleep for 134 "cycles"
  4825  293e  c34b1d                JP          SLEEP                                   ;byte SLEEP(short cycleCount)
  4826                          PICK_UP_F0_ITEM:
  4827  2941  a7                    AND         A                                       ;Reset flags
  4828  2942  08                    EX          AF,AF'                                  ;Save item
  4829  2943  3efe                  LD          A,$fe                                  ;Empty item
  4830  2945  02                    LD          (BC),A
  4831  2946  215233                LD          HL,CHRRAM_FO_ITEM_IDX                   ;= $20
  4832  2949  3e20                  LD          A,$20                                  ;SPACE char
  4833  294b  cd5209                CALL        UPDATE_FO_ITEM
  4834  294e  215237                LD          HL,COLRAM_FO_ITEM_IDX                   ;= $60    `
  4835  2951  3edf                  LD          A,$df                                  ;DKGRN on DKGRY
  4836  2953  cd5209                CALL        UPDATE_FO_ITEM
  4837  2956  08                    EX          AF,AF'                                  ;Restore item
  4838  2957  1f                    RRA                                                 ;Rotate A right, A:0 to carry
  4839  2958  cb1a                  RR          D                                       ;Rotate D right
  4840                                                                                  ;Carry (from A:0) to D:7
  4841  295a  1f                    RRA                                                 ;Rotate A right, A:0 (was A:1) to carry
  4842  295b  cb12                  RL          D                                       ;Rotate D left, carry to D:0
  4843                                                                                  ;D:7 to carry
  4844  295d  cb12                  RL          D                                       ;Rotate D left, carry to D;0
  4845                                                                                  ;D:7 to carry
  4846                                                                                  ;D  = item level
  4847  295f  c9                    RET
  4848                          UPDATE_MELEE_OBJECTSdb:
  4849  2960  3e04                  LD          A,0x4
  4850                          LAB_ram_e962:
  4851  2962  010400                LD          BC,0x4
  4852  2965  edb0                  LDIR                                                ;= "OM"
  4853  2967  3d                    DEC         A
  4854  2968  ca7229                JP          Z,LAB_ram_e972
  4855  296b  012400                LD          BC,$24
  4856  296e  09                    ADD         HL,BC
  4857  296f  c36229                JP          LAB_ram_e962
  4858                          LAB_ram_e972:
  4859  2972  7c                    LD          A,H
  4860  2973  fe34                  CP          $34
  4861  2975  d0                    RET         NC
  4862  2976  018403                LD          BC,$384
  4863  2979  09                    ADD         HL,BC
  4864  297a  c36029                JP          UPDATE_MELEE_OBJECTSdb
  4865                          SUB_ram_e97d:
  4866  297d  3e04                  LD          A,0x4
  4867                          LAB_ram_e97f:
  4868  297f  010400                LD          BC,0x4
  4869  2982  edb0                  LDIR                                                ;= "OM"
  4870  2984  3d                    DEC         A
  4871  2985  ca9129                JP          Z,LAB_ram_e991
  4872  2988  eb                    EX          DE,HL
  4873  2989  012400                LD          BC,$24
  4874  298c  09                    ADD         HL,BC
  4875  298d  eb                    EX          DE,HL
  4876  298e  c37f29                JP          LAB_ram_e97f
  4877                          LAB_ram_e991:
  4878  2991  7a                    LD          A,D
  4879  2992  fe34                  CP          $34
  4880  2994  d0                    RET         NC
  4881  2995  018403                LD          BC,$384
  4882  2998  eb                    EX          DE,HL
  4883  2999  09                    ADD         HL,BC
  4884  299a  eb                    EX          DE,HL
  4885  299b  c37d29                JP          SUB_ram_e97d
  4886                          SUB_ram_e99e:
  4887  299e  3e04                  LD          A,0x4
  4888                          LAB_ram_e9a0:
  4889  29a0  010400                LD          BC,0x4
  4890  29a3  edb0                  LDIR                                                ;= "OM"
  4891  29a5  3d                    DEC         A
  4892  29a6  cab329                JP          Z,LAB_ram_e9b3
  4893  29a9  012400                LD          BC,$24
  4894  29ac  09                    ADD         HL,BC
  4895  29ad  eb                    EX          DE,HL
  4896  29ae  09                    ADD         HL,BC
  4897  29af  eb                    EX          DE,HL
  4898  29b0  c3a029                JP          LAB_ram_e9a0
  4899                          LAB_ram_e9b3:
  4900  29b3  7c                    LD          A,H
  4901  29b4  fe34                  CP          $34
  4902  29b6  d0                    RET         NC
  4903  29b7  018403                LD          BC,$384
  4904  29ba  09                    ADD         HL,BC
  4905  29bb  eb                    EX          DE,HL
  4906  29bc  09                    ADD         HL,BC
  4907  29bd  eb                    EX          DE,HL
  4908  29be  c39e29                JP          SUB_ram_e99e
  4909                          SUB_ram_e9c1:
  4910  29c1  3d                    DEC         A
  4911  29c2  2004                  JR          NZ,LAB_ram_e9c8
  4912  29c4  010105                LD          BC,$501                                ;PHYS = 5
  4913                                                                                  ;SPRT = 1
  4914  29c7  c9                    RET
  4915                          LAB_ram_e9c8:
  4916  29c8  3d                    DEC         A
  4917  29c9  2004                  JR          NZ,LAB_ram_e9cf
  4918  29cb  010408                LD          BC,$804
  4919  29ce  c9                    RET
  4920                          LAB_ram_e9cf:
  4921  29cf  3d                    DEC         A
  4922  29d0  2004                  JR          NZ,LAB_ram_e9d6
  4923  29d2  010812                LD          BC,LAB_ram_1208
  4924  29d5  c9                    RET
  4925                          LAB_ram_e9d6:
  4926  29d6  3d                    DEC         A
  4927  29d7  2004                  JR          NZ,LAB_ram_e9dd
  4928  29d9  011326                LD          BC,BYTE_ram_2613                        ;= $FF
  4929  29dc  c9                    RET
  4930                          LAB_ram_e9dd:
  4931  29dd  010000                LD          BC,0x0
  4932  29e0  c9                    RET
  4933                          SUB_ram_e9e1:
  4934  29e1  3a7a3a                LD          A,(RIGHT_HAND_ITEM)
  4935  29e4  fefe                  CP          $fe
  4936  29e6  2004                  JR          NZ,LAB_ram_e9ec
  4937  29e8  e1                    POP         HL
  4938  29e9  c33022                JP          NO_ACTION_TAKEN
  4939                          LAB_ram_e9ec:
  4940  29ec  3eff                  LD          A,$ff
  4941  29ee  02                    LD          (BC),A
  4942  29ef  0d                    DEC         C
  4943  29f0  0d                    DEC         C
  4944  29f1  7c                    LD          A,H
  4945  29f2  02                    LD          (BC),A
  4946  29f3  0c                    INC         C
  4947  29f4  3efe                  LD          A,$fe
  4948  29f6  02                    LD          (BC),A
  4949  29f7  c9                    RET
  4950                          DO_ROTATE_PACK:
  4951  29f8  217c3a                LD          HL,INV_ITEM_SLOT_1
  4952  29fb  01103a                LD          BC,ITEM_MOVE_COL_BUFFER
  4953  29fe  af                    XOR         A
  4954  29ff  02                    LD          (BC),A
  4955  2a00  cd622a                CALL        SUB_ram_ea62
  4956  2a03  23                    INC         HL
  4957  2a04  017c3a                LD          BC,INV_ITEM_SLOT_1
  4958  2a07  cd622a                CALL        SUB_ram_ea62
  4959  2a0a  1e04                  LD          E,0x4
  4960                          LAB_ram_ea0c:
  4961  2a0c  23                    INC         HL
  4962  2a0d  03                    INC         BC
  4963  2a0e  cd622a                CALL        SUB_ram_ea62
  4964  2a11  1d                    DEC         E
  4965  2a12  c20c2a                JP          NZ,LAB_ram_ea0c
  4966  2a15  21103a                LD          HL,ITEM_MOVE_COL_BUFFER
  4967  2a18  03                    INC         BC
  4968  2a19  cd622a                CALL        SUB_ram_ea62
  4969  2a1c  21b431                LD          HL,DAT_ram_31b4                         ;= $20
  4970  2a1f  11003a                LD          DE,ITEM_MOVE_CHR_BUFFER
  4971  2a22  cd6029                CALL        UPDATE_MELEE_OBJECTSdb
  4972  2a25  211131                LD          HL,DAT_ram_3111                         ;= $20
  4973  2a28  11b431                LD          DE,DAT_ram_31b4                         ;= $20
  4974  2a2b  cd9e29                CALL        SUB_ram_e99e
  4975  2a2e  210c31                LD          HL,DAT_ram_310c                         ;= $20
  4976  2a31  111131                LD          DE,DAT_ram_3111                         ;= $20
  4977  2a34  cd9e29                CALL        SUB_ram_e99e
  4978  2a37  21a931                LD          HL,CHHRAM_INV_4_IDX                     ;= $20
  4979  2a3a  110c31                LD          DE,DAT_ram_310c                         ;= $20
  4980  2a3d  cd9e29                CALL        SUB_ram_e99e
  4981  2a40  214c32                LD          HL,DAT_ram_324c                         ;= $20
  4982  2a43  11a931                LD          DE,CHHRAM_INV_4_IDX                     ;= $20
  4983  2a46  cd9e29                CALL        SUB_ram_e99e
  4984  2a49  215132                LD          HL,CHHRAM_INV_6_IDX                     ;= $20
  4985  2a4c  114c32                LD          DE,DAT_ram_324c                         ;= $20
  4986  2a4f  cd9e29                CALL        SUB_ram_e99e
  4987  2a52  219fea                LD          HL,$ea9f
  4988  2a55  e5                    PUSH        HL
  4989  2a56  21003a                LD          HL,ITEM_MOVE_CHR_BUFFER
  4990  2a59  115132                LD          DE,CHHRAM_INV_6_IDX                     ;= $20
  4991  2a5c  cd7d29                CALL        SUB_ram_e97d
  4992  2a5f  c33b29                JP          WAIT_A_TICK
  4993                          SUB_ram_ea62:
  4994  2a62  56                    LD          D,(HL)
  4995  2a63  0a                    LD          A,(BC)
  4996  2a64  77                    LD          (HL),A
  4997  2a65  7a                    LD          A,D
  4998  2a66  02                    LD          (BC),A
  4999  2a67  c9                    RET
  5000                          DO_SWAP_PACK:
  5001  2a68  217c3a                LD          HL,INV_ITEM_SLOT_1
  5002  2a6b  017a3a                LD          BC,RIGHT_HAND_ITEM
  5003  2a6e  cd622a                CALL        SUB_ram_ea62
  5004  2a71  214333                LD          HL,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  5005  2a74  11003a                LD          DE,ITEM_MOVE_CHR_BUFFER
  5006  2a77  cd6029                CALL        UPDATE_MELEE_OBJECTSdb
  5007  2a7a  21b431                LD          HL,DAT_ram_31b4                         ;= $20
  5008  2a7d  114333                LD          DE,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  5009  2a80  cd9e29                CALL        SUB_ram_e99e
  5010  2a83  219fea                LD          HL,$ea9f
  5011  2a86  e5                    PUSH        HL
  5012  2a87  21003a                LD          HL,ITEM_MOVE_CHR_BUFFER
  5013  2a8a  11b431                LD          DE,DAT_ram_31b4                         ;= $20
  5014  2a8d  cd7d29                CALL        SUB_ram_e97d
  5015  2a90  cd4227                CALL        NEW_RIGHT_HAND_ITEM
  5016  2a93  c33b29                JP          WAIT_A_TICK
  5017                          UPDATE_VIEWPORT:
  5018  2a96  cde634                CALL        REDRAW_START
  5019  2a99  cd0438                CALL        REDRAW_VIEWPORT
  5020                          INPUT_DEBOUNCE:
  5021  2a9c  cd3b29                CALL        WAIT_A_TICK
  5022                          WAIT_FOR_INPUT:
  5023  2a9f  cd7a16                CALL        TIMER_UPDATE
  5024  2aa2  cd8516                CALL        BLINK_ROUTINE
  5025  2aa5  00                    NOP
  5026  2aa6  00                    NOP
  5027  2aa7  00                    NOP
  5028  2aa8  00                    NOP
  5029  2aa9  305b                  JR          NC,TIMER_UPDATED_CHECK_INPUT
  5030  2aab  216b3a                LD          HL,TIMER_C
  5031  2aae  34                    INC         (HL)
  5032  2aaf  7e                    LD          A,(HL)
  5033  2ab0  fe15                  CP          $15
  5034  2ab2  da062b                JP          C,TIMER_UPDATED_CHECK_INPUT
  5035  2ab5  af                    XOR         A
  5036  2ab6  77                    LD          (HL),A
  5037                          SCREEN_SAVER_FULL_SCREEN:
  5038  2ab7  210008                LD          HL,$800
  5039                          SCREEN_SAVER_REDRAW_LOOP:
  5040  2aba  110034                LD          DE,COLRAM                               ;= $60
  5041                          RECALC_SCREEN_SAVER_COLORS:
  5042  2abd  1a                    LD          A,(DE)                          ;= $60
  5043  2abe  0f                    RRCA
  5044  2abf  12                    LD          (DE),A                          ;= $60
  5045  2ac0  13                    INC         DE
  5046  2ac1  3e38                  LD          A,$38
  5047  2ac3  ba                    CP          D
  5048  2ac4  20f7                  JR          NZ,RECALC_SCREEN_SAVER_COLORS
  5049  2ac6  25                    DEC         H
  5050  2ac7  2002                  JR          NZ,CHECK_INPUT_DURING_SCREEN_SAVER
  5051  2ac9  2608                  LD          H,0x8
  5052                          CHECK_INPUT_DURING_SCREEN_SAVER:
  5053  2acb  2d                    DEC         L
  5054  2acc  28ec                  JR          Z,SCREEN_SAVER_REDRAW_LOOP
  5055  2ace  014001                LD          BC,$140
  5056  2ad1  cd4b1d                CALL        SLEEP                                   ;byte SLEEP(short cycleCount)
  5057  2ad4  01ff00                LD          BC,$ff
  5058  2ad7  ed78                  IN          A,(C)
  5059  2ad9  3c                    INC         A
  5060  2ada  2019                  JR          NZ,LAB_ram_eaf5
  5061  2adc  0ef7                  LD          C,$f7
  5062  2ade  3e0f                  LD          A,0xf
  5063  2ae0  ed79                  OUT         (C),A                              ;= db
  5064  2ae2  0d                    DEC         C
  5065  2ae3  ed78                  IN          A,(C)                     ;= db
  5066  2ae5  3c                    INC         A
  5067  2ae6  c2f52a                JP          NZ,LAB_ram_eaf5
  5068  2ae9  0c                    INC         C
  5069  2aea  3e0e                  LD          A,0xe
  5070  2aec  ed79                  OUT         (C),A                              ;= db
  5071  2aee  0d                    DEC         C
  5072  2aef  ed78                  IN          A,(C)                     ;= db
  5073  2af1  3c                    INC         A
  5074  2af2  cacb2a                JP          Z,CHECK_INPUT_DURING_SCREEN_SAVER
  5075                          LAB_ram_eaf5:
  5076  2af5  110034                LD          DE,COLRAM                               ;= $60
  5077                          LAB_ram_eaf8:
  5078  2af8  44                    LD          B,H
  5079  2af9  1a                    LD          A,(DE)                          ;= $60
  5080                          LAB_ram_eafa:
  5081  2afa  0f                    RRCA
  5082  2afb  10fd                  DJNZ        LAB_ram_eafa
  5083  2afd  12                    LD          (DE),A                          ;= $60
  5084  2afe  13                    INC         DE                  ;= $60
  5085  2aff  3e38                  LD          A,$38
  5086  2b01  ba                    CP          D
  5087  2b02  20f4                  JR          NZ,LAB_ram_eaf8
  5088  2b04  1896                  JR          INPUT_DEBOUNCE
  5089                          TIMER_UPDATED_CHECK_INPUT:
  5090  2b06  3a653a                LD          A,(RAM_AD)
  5091  2b09  fe32                  CP          $32
  5092  2b0b  2846                  JR          Z,LAB_ram_eb53
  5093  2b0d  3a663a                LD          A,(RAM_AE)
  5094  2b10  fe31                  CP          $31
  5095  2b12  2013                  JR          NZ,LAB_ram_eb27
  5096  2b14  21693a                LD          HL,TIMER_A
  5097  2b17  3a893a                LD          A,(BYTE_ram_3a89)
  5098  2b1a  be                    CP          (HL)
  5099  2b1b  c29f2a                JP          NZ,WAIT_FOR_INPUT
  5100  2b1e  cd5024                CALL        SUB_ram_e450
  5101  2b21  cd9a23                CALL        SUB_ram_e39a
  5102  2b24  c39f2a                JP          WAIT_FOR_INPUT
  5103                          LAB_ram_eb27:
  5104  2b27  21693a                LD          HL,TIMER_A
  5105  2b2a  3a8c3a                LD          A,(BYTE_ram_3a8c)
  5106  2b2d  be                    CP          (HL)
  5107  2b2e  c29f2a                JP          NZ,WAIT_FOR_INPUT
  5108  2b31  cd3526                CALL        SUB_ram_e635
  5109  2b34  cd5024                CALL        SUB_ram_e450
  5110  2b37  cd9a23                CALL        SUB_ram_e39a
  5111  2b3a  cdcf25                CALL        MELEE_ANIM_LOOP
  5112  2b3d  c39f2a                JP          WAIT_FOR_INPUT
  5113                          LAB_ram_eb40:
  5114  2b40  21693a                LD          HL,TIMER_A
  5115  2b43  3a8c3a                LD          A,(BYTE_ram_3a8c)
  5116  2b46  be                    CP          (HL)
  5117  2b47  c29f2a                JP          NZ,WAIT_FOR_INPUT
  5118  2b4a  cd3526                CALL        SUB_ram_e635
  5119  2b4d  cdcf25                CALL        MELEE_ANIM_LOOP
  5120  2b50  c39f2a                JP          WAIT_FOR_INPUT
  5121                          LAB_ram_eb53:
  5122  2b53  3a663a                LD          A,(RAM_AE)
  5123  2b56  fe31                  CP          $31
  5124  2b58  20e6                  JR          NZ,LAB_ram_eb40
  5125  2b5a  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  5126  2b5d  3a783a                LD          A,(LAST_ITEM_HELD)
  5127  2b60  a7                    AND         A
  5128  2b61  c2d62b                JP          NZ,LAB_ram_ebd6
  5129  2b64  0604                  LD          B,0x4
  5130  2b66  21e937                LD          HL,ITEM_F1                              ;= $60
  5131  2b69  7e                    LD          A,(HL)                         ;= $60
  5132  2b6a  3c                    INC         A
  5133  2b6b  3c                    INC         A
  5134  2b6c  21ec37                LD          HL,ITEM_FR1                             ;= $60
  5135                          LAB_ram_eb6f:
  5136  2b6f  fe7a                  CP          $7a
  5137  2b71  3008                  JR          NC,LAB_ram_eb7b
  5138  2b73  23                    INC         HL
  5139  2b74  7e                    LD          A,(HL)                         ;= $60
  5140  2b75  3c                    INC         A
  5141  2b76  3c                    INC         A
  5142  2b77  10f6                  DJNZ        LAB_ram_eb6f
  5143  2b79  185b                  JR          LAB_ram_ebd6
  5144                          LAB_ram_eb7b:
  5145  2b7b  3a883a                LD          A,(TIMER_D)
  5146  2b7e  fe05                  CP          0x5
  5147  2b80  3054                  JR          NC,LAB_ram_ebd6
  5148  2b82  cdac3a                CALL        MAKE_RANDOM_BYTE
  5149  2b85  c608                  ADD         A,0x8
  5150  2b87  304d                  JR          NC,LAB_ram_ebd6
  5151  2b89  05                    DEC         B
  5152  2b8a  2012                  JR          NZ,LAB_ram_eb9e
  5153  2b8c  3afd33                LD          A,(DAT_ram_33fd)                        ;= $20
  5154  2b8f  cb57                  BIT         0x2,A
  5155  2b91  2003                  JR          NZ,LAB_ram_eb96
  5156  2b93  a7                    AND         A
  5157  2b94  2040                  JR          NZ,LAB_ram_ebd6
  5158                          LAB_ram_eb96:
  5159  2b96  cd232e                CALL        SUB_ram_ee23
  5160  2b99  cd232e                CALL        SUB_ram_ee23
  5161  2b9c  1822                  JR          LAB_ram_ebc0
  5162                          LAB_ram_eb9e:
  5163  2b9e  05                    DEC         B
  5164  2b9f  200f                  JR          NZ,LAB_ram_ebb0
  5165  2ba1  3af533                LD          A,(DAT_ram_33f5)                        ;= $20
  5166  2ba4  cb57                  BIT         0x2,A
  5167  2ba6  2003                  JR          NZ,LAB_ram_ebab
  5168  2ba8  a7                    AND         A
  5169  2ba9  202b                  JR          NZ,LAB_ram_ebd6
  5170                          LAB_ram_ebab:
  5171  2bab  cd0b2e                CALL        SUB_ram_ee0b
  5172  2bae  1810                  JR          LAB_ram_ebc0
  5173                          LAB_ram_ebb0:
  5174  2bb0  05                    DEC         B
  5175  2bb1  2019                  JR          NZ,LAB_ram_ebcc
  5176  2bb3  3af933                LD          A,(DAT_ram_33f9)                        ;= $20
  5177  2bb6  cb57                  BIT         0x2,A
  5178  2bb8  2003                  JR          NZ,LAB_ram_ebbd
  5179  2bba  a7                    AND         A
  5180  2bbb  2019                  JR          NZ,LAB_ram_ebd6
  5181                          LAB_ram_ebbd:
  5182  2bbd  cd232e                CALL        SUB_ram_ee23
  5183                          LAB_ram_ebc0:
  5184  2bc0  cde634                CALL        REDRAW_START
  5185  2bc3  cd0438                CALL        REDRAW_VIEWPORT
  5186                          LAB_ram_ebc6:
  5187  2bc6  cd5f0d                CALL        SUB_ram_cd5f
  5188  2bc9  c33031                JP          SUB_ram_f130
  5189                          LAB_ram_ebcc:
  5190  2bcc  3ae833                LD          A,(WALL_F0_STATE)                       ;= $20
  5191  2bcf  cb57                  BIT         0x2,A
  5192  2bd1  20f3                  JR          NZ,LAB_ram_ebc6
  5193  2bd3  a7                    AND         A
  5194  2bd4  28f0                  JR          Z,LAB_ram_ebc6
  5195                          LAB_ram_ebd6:
  5196  2bd6  01ff00                LD          BC,$ff
  5197  2bd9  ed78                  IN          A,(C)
  5198  2bdb  3c                    INC         A
  5199  2bdc  c2522c                JP          NZ,LAB_ram_ec52
  5200  2bdf  0ef7                  LD          C,$f7
  5201  2be1  3e0f                  LD          A,0xf
  5202  2be3  ed79                  OUT         (C),A                              ;= db
  5203  2be5  0d                    DEC         C
  5204  2be6  ed78                  IN          A,(C)                     ;= db
  5205  2be8  3c                    INC         A
  5206  2be9  200c                  JR          NZ,LAB_ram_ebf7
  5207  2beb  0c                    INC         C
  5208  2bec  3e0e                  LD          A,0xe
  5209  2bee  ed79                  OUT         (C),A                              ;= db
  5210  2bf0  0d                    DEC         C
  5211  2bf1  ed78                  IN          A,(C)                     ;= db
  5212  2bf3  3c                    INC         A
  5213  2bf4  ca9f2a                JP          Z,WAIT_FOR_INPUT
  5214                          LAB_ram_ebf7:
  5215  2bf7  cd362c                CALL        PLAY_DESCENDING_SOUND
  5216  2bfa  21fe37                LD          HL,HC_INPUT_HOLDER                      ;= $6060
  5217                          DISABLE_JOY_04:
  5218  2bfd  0ef7                  LD          C,$f7
  5219  2bff  3e0f                  LD          A,0xf
  5220  2c01  ed79                  OUT         (C),A                              ;= db
  5221  2c03  0d                    DEC         C
  5222  2c04  ed78                  IN          A,(C)                     ;= db
  5223  2c06  77                    LD          (HL),A                 ;= $6060
  5224  2c07  23                    INC         HL
  5225  2c08  0c                    INC         C
  5226                          ENABLE_JOY_04:
  5227  2c09  3e0e                  LD          A,0xe
  5228  2c0b  ed79                  OUT         (C),A                              ;= db
  5229  2c0d  0d                    DEC         C
  5230  2c0e  ed78                  IN          A,(C)                     ;= db
  5231  2c10  77                    LD          (HL),A
  5232  2c11  3a6c3a                LD          A,(INPUT_HOLDER)
  5233  2c14  a7                    AND         A
  5234  2c15  c2b00e                JP          NZ,HC_JOY_INPUT_COMPARE
  5235  2c18  3a683a                LD          A,(DUNGEON_LEVEL)
  5236  2c1b  a7                    AND         A
  5237  2c1c  c21020                JP          NZ,GAMEINIT
  5238  2c1f  7e                    LD          A,(HL)
  5239  2c20  3c                    INC         A
  5240  2c21  280e                  JR          Z,TITLE_CHK_FOR_HC_INPUT
  5241                          HC_LEVEL_SELECT_LOOP:
  5242  2c23  fe60                  CP          $60                                    ;K3 pressed on title screen
  5243  2c25  2874                  JR          Z,SET_DIFFICULTY_1
  5244  2c27  fe7c                  CP          $7c
  5245  2c29  2874                  JR          Z,SET_DIFFICULTY_2
  5246  2c2b  fec0                  CP          $c0
  5247  2c2d  2874                  JR          Z,SET_DIFFICULTY_3
  5248  2c2f  185a                  JR          SET_DIFFICULTY_4
  5249                          TITLE_CHK_FOR_HC_INPUT:
  5250  2c31  2b                    DEC         HL
  5251  2c32  7e                    LD          A,(HL)                 ;= $6060
  5252  2c33  3c                    INC         A
  5253  2c34  18ed                  JR          HC_LEVEL_SELECT_LOOP
  5254                          PLAY_DESCENDING_SOUND:
  5255  2c36  af                    XOR         A
  5256  2c37  32693a                LD          (TIMER_A),A
  5257  2c3a  326a3a                LD          (TIMER_B),A
  5258  2c3d  326b3a                LD          (TIMER_C),A
  5259  2c40  d3fc                  OUT         (SPEAKER),A                             ;= db
  5260  2c42  01f000                LD          BC,$f0
  5261  2c45  cd4b1d                CALL        SLEEP                                   ;byte SLEEP(short cycleCount)
  5262  2c48  3c                    INC         A
  5263  2c49  d3fc                  OUT         (SPEAKER),A                             ;= db
  5264  2c4b  01c004                LD          BC,$4c0
  5265  2c4e  cd4b1d                CALL        SLEEP                                   ;byte SLEEP(short cycleCount)
  5266  2c51  c9                    RET
  5267                          LAB_ram_ec52:
  5268  2c52  cd362c                CALL        PLAY_DESCENDING_SOUND
  5269  2c55  21f637                LD          HL,KEY_INPUT_COL0                       ;= $60
  5270  2c58  01ff3e                LD          BC,GFX_POINTERS
  5271  2c5b  1608                  LD          D,0x8
  5272                          SELECT_DIFFICULTY_LOOP:
  5273  2c5d  ed78                  IN          A,(C)
  5274  2c5f  77                    LD          (HL),A                  ;= $20
  5275                                                                                  ;= $60
  5276  2c60  2c                    INC         L
  5277  2c61  cb00                  RLC         B
  5278  2c63  15                    DEC         D
  5279  2c64  20f7                  JR          NZ,SELECT_DIFFICULTY_LOOP
  5280  2c66  3a6c3a                LD          A,(INPUT_HOLDER)
  5281  2c69  a7                    AND         A
  5282  2c6a  c2e03b                JP          NZ,KEY_COMPARE                          ;OLD = e12c ; NEW = fbe0
  5283  2c6d  3a683a                LD          A,(DUNGEON_LEVEL)
  5284  2c70  a7                    AND         A
  5285  2c71  c21020                JP          NZ,GAMEINIT
  5286  2c74  3afc37                LD          A,(KEY_INPUT_COL6)                      ;= $60
  5287  2c77  fefe                  CP          $fe
  5288  2c79  2820                  JR          Z,SET_DIFFICULTY_1                      ;Key 3 pressed on Title Screen
  5289  2c7b  fedf                  CP          $df
  5290  2c7d  ca6a16                JP          Z,SHOW_AUTHOR                           ;Key A pressed (and held)
  5291                                                                                  ;on title screen
  5292  2c80  3afd37                LD          A,(KEY_INPUT_COL7)                      ;= $60
  5293  2c83  fefe                  CP          $fe
  5294  2c85  2818                  JR          Z,SET_DIFFICULTY_2                      ;Key 2 pressed on Title Screen
  5295  2c87  fefb                  CP          $fb
  5296  2c89  2818                  JR          Z,SET_DIFFICULTY_3                      ;Key 1 pressed on Title Screen
  5297                          SET_DIFFICULTY_4:
  5298  2c8b  3e00                  LD          A,0x0                                   ;Some other key pressed on Title Screen
  5299                          GOTO_GAME_START:
  5300  2c8d  326c3a                LD          (INPUT_HOLDER),A
  5301  2c90  3ab93a                LD          A,(GAME_BOOLEANS)
  5302  2c93  cbc7                  SET         0x0,A
  5303  2c95  32b93a                LD          (GAME_BOOLEANS),A
  5304  2c98  c39620                JP          BLANK_SCRN
  5305                          SET_DIFFICULTY_1:
  5306  2c9b  3e01                  LD          A,0x1
  5307  2c9d  18ee                  JR          GOTO_GAME_START
  5308                          SET_DIFFICULTY_2:
  5309  2c9f  3e02                  LD          A,0x2
  5310  2ca1  18ea                  JR          GOTO_GAME_START
  5311                          SET_DIFFICULTY_3:
  5312  2ca3  3e03                  LD          A,0x3
  5313  2ca5  18e6                  JR          GOTO_GAME_START
  5314  2ca7  00                    NOP
  5315  2ca8  00                    NOP
  5316  2ca9  00                    NOP
  5317  2caa  00                    NOP
  5318  2cab  00                    NOP
  5319                          CHK_ITEM:
  5320  2cac  fefe                  CP          $fe
  5321  2cae  c8                    RET         Z
  5322  2caf  cb3f                  SRL         A
  5323  2cb1  5f                    LD          E,A
  5324  2cb2  daba2c                JP          C,LAB_ram_ecba
  5325  2cb5  1610                  LD          D,$10
  5326  2cb7  c3bc2c                JP          LAB_ram_ecbc
  5327                          LAB_ram_ecba:
  5328  2cba  1630                  LD          D,$30
  5329                          LAB_ram_ecbc:
  5330  2cbc  cb3f                  SRL         A
  5331  2cbe  d2c52c                JP          NC,LAB_ram_ecc5
  5332  2cc1  3e40                  LD          A,$40
  5333  2cc3  82                    ADD         A,D
  5334  2cc4  57                    LD          D,A
  5335                          LAB_ram_ecc5:
  5336  2cc5  cb83                  RES         0x0,E
  5337  2cc7  7b                    LD          A,E
  5338  2cc8  cb27                  SLA         A
  5339  2cca  83                    ADD         A,E
  5340  2ccb  80                    ADD         A,B
  5341  2ccc  42                    LD          B,D
  5342  2ccd  6f                    LD          L,A
  5343  2cce  26ff                  LD          H,$ff
  5344  2cd0  5e                    LD          E,(HL)
  5345  2cd1  23                    INC         HL
  5346  2cd2  56                    LD          D,(HL)
  5347  2cd3  3a633a                LD          A,(MON_FS)
  5348  2cd6  67                    LD          H,A
  5349  2cd7  69                    LD          L,C
  5350  2cd8  c33533                JP          GFX_DRAW
  5351                          DO_OPEN_CLOSE:
  5352  2cdb  3aea37                LD          A,(ITEM_F0)                             ;= $60
  5353  2cde  0e00                  LD          C,0x0                                   ;C  = 0
  5354  2ce0  cb3f                  SRL         A                                       ;Move item LEVEL
  5355                                                                                  ;into C
  5356  2ce2  cb19                  RR          C
  5357  2ce4  cb3f                  SRL         A
  5358  2ce6  cb11                  RL          C
  5359  2ce8  cb11                  RL          C
  5360  2cea  fe11                  CP          $11                                    ;Compare to BOX
  5361                                                                                  ;44,45,46,47 2 @ SRL = 11
  5362  2cec  202d                  JR          NZ,LAB_ram_ed1b
  5363  2cee  79                    LD          A,C                                     ;A = C (item level)
  5364  2cef  a7                    AND         A
  5365  2cf0  2809                  JR          Z,DO_OPEN_BOX
  5366  2cf2  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  5367  2cf5  0c                    INC         C
  5368                          LAB_ram_ecf6:
  5369  2cf6  91                    SUB         C
  5370  2cf7  30fd                  JR          NC,LAB_ram_ecf6
  5371  2cf9  81                    ADD         A,C
  5372  2cfa  4f                    LD          C,A
  5373                          DO_OPEN_BOX:
  5374  2cfb  ed5f                  LD          A,R                                     ;Semi-random number into A
  5375  2cfd  e607                  AND         0x7
  5376                          PICK_RANDOM_ITEM:
  5377  2cff  d607                  SUB         0x7
  5378  2d01  30fc                  JR          NC,PICK_RANDOM_ITEM
  5379  2d03  c61d                  ADD         A,$1d                                  ;$1d is +1 above range
  5380  2d05  cb19                  RR          C
  5381  2d07  cb18                  RR          B
  5382  2d09  cb19                  RR          C                                       ;C = C/8
  5383  2d0b  17                    RLA
  5384  2d0c  cb10                  RL          B
  5385  2d0e  17                    RLA
  5386  2d0f  08                    EX          AF,AF'
  5387  2d10  3a793a                LD          A,(PLAYER_MAP_POS)
  5388  2d13  cdf337                CALL        ITEM_MAP_CHECK
  5389  2d16  08                    EX          AF,AF'
  5390  2d17  02                    LD          (BC),A
  5391  2d18  c3962a                JP          UPDATE_VIEWPORT
  5392                          LAB_ram_ed1b:
  5393  2d1b  3a793a                LD          A,(PLAYER_MAP_POS)
  5394  2d1e  2638                  LD          H,$38
  5395  2d20  6f                    LD          L,A
  5396  2d21  3a623a                LD          A,(DIR_FACING_SHORT)
  5397  2d24  3d                    DEC         A
  5398  2d25  280a                  JR          Z,NORTH_OPEN_CLOSE_DOOR                 ;Is facing NORTH
  5399  2d27  3d                    DEC         A
  5400  2d28  2820                  JR          Z,SHIFT_EAST_OPEN_CLOSE_DOOR            ;Is facing EAST
  5401  2d2a  3d                    DEC         A
  5402  2d2b  201e                  JR          NZ,LAB_ram_ed4b                         ;Is facing WEST
  5403  2d2d  7d                    LD          A,L                                     ;Is facing SOUTH
  5404  2d2e  c610                  ADD         A,$10
  5405  2d30  6f                    LD          L,A                                     ;Shift SOUTH and process as NORTH
  5406                          NORTH_OPEN_CLOSE_DOOR:
  5407  2d31  cb76                  BIT         0x6,(HL)                                ;N WALL check
  5408  2d33  ca3022                JP          Z,NO_ACTION_TAKEN                       ;...if no N WALL
  5409  2d36  cb6e                  BIT         0x5,(HL)                                ;N hidden DOOR check
  5410  2d38  2804                  JR          Z,SET_N_DOOR_MASK                       ;...if no N hidden DOOR
  5411  2d3a  3e44                  LD          A,$44                                  ;WALL mask
  5412  2d3c  1802                  JR          OPEN_N_CHECK
  5413                          SET_N_DOOR_MASK:
  5414  2d3e  3e22                  LD          A,$22                                  ;DOOR mask
  5415                          OPEN_N_CHECK:
  5416  2d40  cb7e                  BIT         0x7,(HL)                                ;N DOOR-OPEN check
  5417  2d42  c2c12d                JP          NZ,CLOSE_N_DOOR                         ;...if N DOOR not OPEN
  5418  2d45  cbfe                  SET         0x7,(HL)                                ;Set N door closed on wall map
  5419  2d47  c3632d                JP          SET_F0_DOOR_OPEN
  5420                          SHIFT_EAST_OPEN_CLOSE_DOOR:
  5421  2d4a  2c                    INC         L                                       ;Shift EAST and process as WEST
  5422                          LAB_ram_ed4b:
  5423  2d4b  cb4e                  BIT         0x1,(HL)                                ;W WALL check
  5424  2d4d  ca3022                JP          Z,NO_ACTION_TAKEN                       ;...if no W WALL
  5425  2d50  cb46                  BIT         0x0,(HL)                                ;W DOOR check
  5426  2d52  ca5a2d                JP          Z,SET_W_DOOR_MASK                       ;...if no W DOOR
  5427  2d55  3e44                  LD          A,$44                                  ;WALL mask
  5428  2d57  c35c2d                JP          LAB_ram_ed5c
  5429                          SET_W_DOOR_MASK:
  5430  2d5a  3e22                  LD          A,$22
  5431                          LAB_ram_ed5c:
  5432  2d5c  cb56                  BIT         0x2,(HL)                                ;DOOR-OPEN check
  5433  2d5e  c2c62d                JP          NZ,CLOSE_W_DOOR                         ;...if DOOR-OPEN
  5434  2d61  cbd6                  SET         0x2,(HL)                                ;Set W door closed on wall map
  5435                          SET_F0_DOOR_OPEN:
  5436  2d63  21e833                LD          HL,WALL_F0_STATE                        ;= $20
  5437  2d66  cbd6                  SET         0x2,(HL)                 ;= $20
  5438  2d68  08                    EX          AF,AF'                                  ;Save MASK state from A
  5439                          WAIT_TO_REDRAW_F0_DOOR:
  5440  2d69  dbfd                  IN          A,(VSYNC)                               ;= db
  5441  2d6b  3c                    INC         A
  5442  2d6c  28fb                  JR          Z,WAIT_TO_REDRAW_F0_DOOR
  5443  2d6e  3e00                  LD          A,0x0                                   ;BLK on BLK
  5444                                                                                  ;WAS BLU on BLU
  5445                                                                                  ;WAS LD A,$bb
  5446  2d70  cd0809                CALL        DRAW_DOOR_F0
  5447  2d73  3ae937                LD          A,(ITEM_F1)                             ;= $60
  5448  2d76  018a02                LD          BC,$28a
  5449  2d79  cdac2c                CALL        CHK_ITEM
  5450  2d7c  217035                LD          HL,COLRAM_F0_DOOR_IDX                   ;= $60
  5451  2d7f  11003a                LD          DE,ITEM_MOVE_CHR_BUFFER
  5452  2d82  cdaf2d                CALL        SUB_ram_edaf
  5453  2d85  cdfb0d                CALL        SETUP_OPEN_DOOR_SOUND
  5454  2d88  d9                    EXX
  5455  2d89  21583a                LD          HL,BYTE_ram_3a58
  5456  2d8c  112837                LD          DE,DAT_ram_3728                         ;= $60
  5457  2d8f  3e0c                  LD          A,0xc
  5458                          LAB_ram_ed91:
  5459  2d91  08                    EX          AF,AF'
  5460  2d92  d9                    EXX
  5461  2d93  cd010e                CALL        LO_HI_PITCH_SOUND
  5462  2d96  d9                    EXX
  5463  2d97  010800                LD          BC,0x8
  5464  2d9a  edb0                  LDIR                                                ;= $60
  5465  2d9c  011000                LD          BC,$10
  5466  2d9f  ed42                  SBC         HL,BC
  5467  2da1  eb                    EX          DE,HL
  5468  2da2  013000                LD          BC,$30
  5469  2da5  ed42                  SBC         HL,BC
  5470  2da7  eb                    EX          DE,HL
  5471  2da8  08                    EX          AF,AF'
  5472  2da9  3d                    DEC         A
  5473  2daa  ca9f2a                JP          Z,WAIT_FOR_INPUT
  5474  2dad  18e2                  JR          LAB_ram_ed91
  5475                          SUB_ram_edaf:
  5476  2daf  3e0c                  LD          A,0xc
  5477                          LAB_ram_edb1:
  5478  2db1  010800                LD          BC,0x8
  5479  2db4  edb0                  LDIR
  5480  2db6  012000                LD          BC,$20
  5481  2db9  09                    ADD         HL,BC
  5482  2dba  3d                    DEC         A
  5483  2dbb  20f4                  JR          NZ,LAB_ram_edb1
  5484  2dbd  08                    EX          AF,AF'
  5485  2dbe  c30809                JP          DRAW_DOOR_F0
  5486                          CLOSE_N_DOOR:
  5487  2dc1  cbbe                  RES         0x7,(HL)                                ;Set N Door map flag to closed
  5488  2dc3  c3c82d                JP          START_DOOR_CLOSE_ANIM
  5489                          CLOSE_W_DOOR:
  5490  2dc6  cb96                  RES         0x2,(HL)                                ;Set W Door map flag to closed
  5491                          START_DOOR_CLOSE_ANIM:
  5492  2dc8  21e833                LD          HL,WALL_F0_STATE                        ;= $20
  5493  2dcb  cb96                  RES         0x2,(HL)                 ;= $20
  5494  2dcd  08                    EX          AF,AF'
  5495  2dce  3a793a                LD          A,(PLAYER_MAP_POS)
  5496  2dd1  32773a                LD          (PLAYER_PREV_MAP_LOC),A
  5497  2dd4  cd0f0e                CALL        SETUP_CLOSE_DOOR_SOUND
  5498  2dd7  d9                    EXX
  5499  2dd8  08                    EX          AF,AF'
  5500  2dd9  217035                LD          HL,COLRAM_F0_DOOR_IDX                   ;= $60
  5501  2ddc  112000                LD          DE,$20
  5502  2ddf  01080c                LD          BC,$c08
  5503                          DOOR_CLOSE_ANIM_LOOP:
  5504  2de2  77                    LD          (HL),A              ;= $60
  5505  2de3  2c                    INC         L
  5506  2de4  0d                    DEC         C
  5507  2de5  c2e22d                JP          NZ,DOOR_CLOSE_ANIM_LOOP
  5508  2de8  d9                    EXX
  5509  2de9  08                    EX          AF,AF'
  5510  2dea  cd150e                CALL        HI_LO_PITCH_SOUND
  5511  2ded  08                    EX          AF,AF'
  5512  2dee  d9                    EXX
  5513  2def  0e08                  LD          C,0x8
  5514  2df1  19                    ADD         HL,DE
  5515  2df2  10ee                  DJNZ        DOOR_CLOSE_ANIM_LOOP
  5516  2df4  cdab25                CALL        CLEAR_MONSTER_STATS
  5517  2df7  c39f2a                JP          WAIT_FOR_INPUT
  5518  2dfa  010016                LD          BC,$1600
  5519  2dfd  c34b1d                JP          SLEEP                                   ;byte SLEEP(short cycleCount)
  5520                          DO_TURN_LEFT:
  5521  2e00  3a783a                LD          A,(LAST_ITEM_HELD)
  5522  2e03  a7                    AND         A
  5523  2e04  c23022                JP          NZ,NO_ACTION_TAKEN
  5524  2e07  21962a                LD          HL,UPDATE_VIEWPORT
  5525  2e0a  e5                    PUSH        HL
  5526                          SUB_ram_ee0b:
  5527  2e0b  3a623a                LD          A,(DIR_FACING_SHORT)
  5528  2e0e  3d                    DEC         A
  5529  2e0f  c2142e                JP          NZ,LAB_ram_ee14
  5530  2e12  3e04                  LD          A,0x4
  5531                          LAB_ram_ee14:
  5532  2e14  32623a                LD          (DIR_FACING_SHORT),A
  5533  2e17  c9                    RET
  5534                          DO_TURN_RIGHT:
  5535  2e18  3a783a                LD          A,(LAST_ITEM_HELD)
  5536  2e1b  a7                    AND         A
  5537  2e1c  c23022                JP          NZ,NO_ACTION_TAKEN
  5538  2e1f  21962a                LD          HL,UPDATE_VIEWPORT
  5539  2e22  e5                    PUSH        HL
  5540                          SUB_ram_ee23:
  5541  2e23  3a623a                LD          A,(DIR_FACING_SHORT)
  5542  2e26  3c                    INC         A
  5543  2e27  fe05                  CP          0x5
  5544  2e29  c22e2e                JP          NZ,LAB_ram_ee2e
  5545  2e2c  3e01                  LD          A,0x1
  5546                          LAB_ram_ee2e:
  5547  2e2e  32623a                LD          (DIR_FACING_SHORT),A
  5548  2e31  c9                    RET
  5549                          DO_GLANCE_RIGHT:
  5550  2e32  3a783a                LD          A,(LAST_ITEM_HELD)
  5551  2e35  a7                    AND         A
  5552  2e36  c23022                JP          NZ,NO_ACTION_TAKEN
  5553  2e39  cd232e                CALL        SUB_ram_ee23
  5554  2e3c  cde634                CALL        REDRAW_START
  5555  2e3f  cd0438                CALL        REDRAW_VIEWPORT
  5556  2e42  cd481d                CALL        SLEEP_ZERO                              ;byte SLEEP_ZERO(void)
  5557  2e45  c3002e                JP          DO_TURN_LEFT
  5558                          DO_GLANCE_LEFT:
  5559  2e48  3a783a                LD          A,(LAST_ITEM_HELD)
  5560  2e4b  a7                    AND         A
  5561  2e4c  c23022                JP          NZ,NO_ACTION_TAKEN
  5562  2e4f  cd0b2e                CALL        SUB_ram_ee0b
  5563  2e52  cde634                CALL        REDRAW_START
  5564  2e55  cd0438                CALL        REDRAW_VIEWPORT
  5565  2e58  cd481d                CALL        SLEEP_ZERO                              ;byte SLEEP_ZERO(void)
  5566  2e5b  c3182e                JP          DO_TURN_RIGHT
  5567                          DO_USE_ATTACK:
  5568  2e5e  3a7a3a                LD          A,(RIGHT_HAND_ITEM)
  5569  2e61  0600                  LD          B,0x0
  5570  2e63  cb3f                  SRL         A                                       ;Remove "color/level" in bit 0
  5571                                                                                  ;to compare item type, below.
  5572  2e65  cb18                  RR          B                                       ;Push bit 0 from A
  5573                                                                                  ;(via Carry Flag) to B
  5574  2e67  cb3f                  SRL         A                                       ;Remove second "color/level" in bit 1
  5575                                                                                  ;to compare item type, below
  5576  2e69  cb10                  RL          B                                       ;Move bits 0 & 1
  5577                                                                                  ;from A to B...
  5578  2e6b  cb10                  RL          B                                       ;B now has the LEVEL value (0-3)
  5579  2e6d  00                    NOP                                                 ;Was USE_MAP
  5580  2e6e  00                    NOP
  5581  2e6f  00                    NOP
  5582  2e70  00                    NOP
  5583  2e71  00                    NOP
  5584  2e72  fe16                  CP          $16                                    ;Compare to KEY
  5585                                                                                  ;58,59,5A,5B 2 @ SRL = 16
  5586  2e74  ca2130                JP          Z,DO_USE_KEY
  5587  2e77  fe19                  CP          $19                                    ;Compare to PHYS POTION
  5588                                                                                  ;64,65,66,67 2 @ SRL = 19
  5589  2e79  caf12f                JP          Z,DO_USE_PHYS_POTION
  5590  2e7c  fe1a                  CP          $1a                                    ;Compare to SPRT POTION
  5591                                                                                  ;68,69,6A,6B 2 @ SRL = 1A
  5592  2e7e  ca0930                JP          Z,DO_USE_SPRT_POTION
  5593  2e81  fe1c                  CP          $1c                                    ;Compare to CHAOS POTION
  5594                                                                                  ;70,71,72,73 2 @ SRL = 1c
  5595  2e83  c28230                JP          NZ,USE_SOMETHING_ELSE
  5596                          DO_USE_CHAOS_POTION:
  5597  2e86  cd9d2e                CALL        PLAY_USE_PHYS_POTION_SOUND
  5598  2e89  04                    INC         B
  5599  2e8a  05                    DEC         B
  5600  2e8b  2052                  JR          NZ,CHECK_YELLOW_L_POTION                ;If NZ, handle other colors
  5601                                                                                  ;of LARGE POTION
  5602  2e8d  cdbc2e                CALL        TOTAL_HEAL                              ;LARGE Potion is RED
  5603                                                                                  ;so do TOTAL HEAL
  5604                          PROCESS_POTION_UPDATES:
  5605  2e90  cd5d3d                CALL        REDRAW_STATS
  5606  2e93  3a783a                LD          A,(LAST_ITEM_HELD)
  5607  2e96  a7                    AND         A
  5608  2e97  c24e32                JP          NZ,INIT_MELEE_ANIM
  5609  2e9a  c39c2a                JP          INPUT_DEBOUNCE
  5610                          PLAY_USE_PHYS_POTION_SOUND:
  5611  2e9d  d9                    EXX
  5612  2e9e  cd480e                CALL        SOUND_03
  5613  2ea1  cd480e                CALL        SOUND_03
  5614  2ea4  cd480e                CALL        SOUND_03
  5615  2ea7  1801                  JR          CLEAR_RIGHT_HAND
  5616                          SUB_ram_eea9:
  5617  2ea9  d9                    EXX
  5618                          CLEAR_RIGHT_HAND:
  5619  2eaa  3efe                  LD          A,$fe
  5620  2eac  327a3a                LD          (RIGHT_HAND_ITEM),A
  5621  2eaf  11f401                LD          DE,POOF_6                               ;= "    ",$01
  5622  2eb2  214333                LD          HL,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  5623  2eb5  06d0                  LD          B,$d0
  5624  2eb7  cd3533                CALL        GFX_DRAW
  5625  2eba  d9                    EXX
  5626  2ebb  c9                    RET
  5627                          TOTAL_HEAL:
  5628  2ebc  2a953a                LD          HL,(PLAYER_PHYS_HEALTH_MAX)
  5629  2ebf  22933a                LD          (PLAYER_PHYS_HEALTH),HL
  5630  2ec2  3a983a                LD          A,(PLAYER_SPRT_HEALTH_MAX)
  5631  2ec5  32973a                LD          (PLAYER_SPRT_HEALTH),A
  5632  2ec8  c9                    RET
  5633                          REDRAW_STATS_OLD:
  5634  2ec9  21933a                LD          HL,PLAYER_PHYS_HEALTH
  5635  2ecc  114130                LD          DE,CHRRAM_PHYS_HEALTH_1000              ;= $20
  5636  2ecf  0602                  LD          B,0x2
  5637  2ed1  cdfd32                CALL        RECALC_AND_REDRAW_BCD
  5638  2ed4  21973a                LD          HL,PLAYER_SPRT_HEALTH
  5639  2ed7  114730                LD          DE,CHRRAM_SPRT_HEALTH_10                ;= $20
  5640  2eda  0601                  LD          B,0x1
  5641  2edc  c3fd32                JP          RECALC_AND_REDRAW_BCD                   ;Waz JP FUN_ram_f2fd
  5642                                                                                  ;(c3 fd f2)
  5643                          CHECK_YELLOW_L_POTION:
  5644  2edf  05                    DEC         B
  5645  2ee0  200d                  JR          NZ,CHECK_PURPLE_L_POTION
  5646  2ee2  011000                LD          BC,$10                                 ;Set PHYS increase to 10
  5647  2ee5  1e00                  LD          E,0x0                                   ;Set SPRT increase to 0
  5648                          PROCESS_LARGE_POTION:
  5649  2ee7  cd322f                CALL        CALC_CURR_PHYS_HEALTH
  5650  2eea  cd572f                CALL        CALC_MAX_PHYS_HEALTH
  5651  2eed  18a1                  JR          PROCESS_POTION_UPDATES
  5652                          CHECK_PURPLE_L_POTION:
  5653  2eef  05                    DEC         B
  5654  2ef0  2007                  JR          NZ,CHECK_WHITE_L_POTION
  5655  2ef2  010000                LD          BC,0x0                                  ;Set PHYS increase to 0
  5656  2ef5  1e06                  LD          E,0x6                    ;Set SPRT increase to 6
  5657  2ef7  18ee                  JR          PROCESS_LARGE_POTION
  5658                          CHECK_WHITE_L_POTION:
  5659  2ef9  cdac3a                CALL        MAKE_RANDOM_BYTE                        ;Get RANDOM BYTE
  5660                                                                                  ;and put into A
  5661  2efc  e603                  AND         0x3                                     ;Range it to 0-3
  5662  2efe  3d                    DEC         A
  5663  2eff  2007                  JR          NZ,LAB_ram_ef08                         ;If NZ, check for case 1
  5664  2f01  1e00                  LD          E,0x0                    ;Case 0: set SPRT increase to 0
  5665  2f03  012000                LD          BC,$20                                 ;Set PHYS increase to 20
  5666  2f06  18df                  JR          PROCESS_LARGE_POTION                    ;...and reprocess
  5667                          LAB_ram_ef08:
  5668  2f08  3d                    DEC         A
  5669  2f09  2007                  JR          NZ,LAB_ram_ef12
  5670  2f0b  010000                LD          BC,0x0                                  ;Set PHYS increase to 0
  5671  2f0e  1e12                  LD          E,$12                ;Set SPRT increase to 12
  5672  2f10  18d5                  JR          PROCESS_LARGE_POTION
  5673                          LAB_ram_ef12:
  5674  2f12  3d                    DEC         A
  5675  2f13  200a                  JR          NZ,CHECK_CASE_3_WL_POTION
  5676  2f15  cdbc2e                CALL        TOTAL_HEAL                              ;Fill up PHYS and SPRT
  5677  2f18  011000                LD          BC,$10                                 ;Set PHYS increase to 10
  5678  2f1b  1e06                  LD          E,0x6                    ;Set SPRT increase to 6
  5679  2f1d  18c8                  JR          PROCESS_LARGE_POTION
  5680                          CHECK_CASE_3_WL_POTION:
  5681  2f1f  013000                LD          BC,$30                                 ;Set PHYS decrease to 30
  5682  2f22  1e15                  LD          E,$15                                  ;Set SPRT decrease to 15
  5683  2f24  cd732f                CALL        REDUCE_HEALTH_BIG
  5684  2f27  011500                LD          BC,$15
  5685  2f2a  1e07                  LD          E,0x7
  5686  2f2c  cd8e2f                CALL        REDUCE_HEALTH_SMALL
  5687  2f2f  c3902e                JP          PROCESS_POTION_UPDATES
  5688                          CALC_CURR_PHYS_HEALTH:
  5689  2f32  2a933a                LD          HL,(PLAYER_PHYS_HEALTH)                 ;Load current PHYS Health
  5690                                                                                  ;into HL
  5691  2f35  7d                    LD          A,L
  5692  2f36  81                    ADD         A,C
  5693  2f37  27                    DAA                                                 ;Correct 1000s & 100s
  5694                                                                                  ;for BCD
  5695  2f38  6f                    LD          L,A
  5696  2f39  7c                    LD          A,H
  5697  2f3a  88                    ADC         A,B
  5698  2f3b  27                    DAA                                                 ;Correct 10s & 1s
  5699                                                                                  ;for BCD
  5700  2f3c  fe02                  CP          0x2
  5701  2f3e  67                    LD          H,A
  5702  2f3f  2004                  JR          NZ,UPDATE_HEALTH_VALUES
  5703  2f41  2601                  LD          H,0x1
  5704  2f43  2e99                  LD          L,$99                                  ;Max PHYS Health of 199
  5705                          UPDATE_HEALTH_VALUES:
  5706  2f45  22933a                LD          (PLAYER_PHYS_HEALTH),HL
  5707  2f48  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  5708  2f4b  83                    ADD         A,E
  5709  2f4c  27                    DAA                                                 ;Correct for BCD
  5710  2f4d  32973a                LD          (PLAYER_SPRT_HEALTH),A
  5711  2f50  d0                    RET         NC
  5712  2f51  3e99                  LD          A,$99                                  ;Max SPRT Health of 99
  5713  2f53  32973a                LD          (PLAYER_SPRT_HEALTH),A
  5714  2f56  c9                    RET
  5715                          CALC_MAX_PHYS_HEALTH:
  5716  2f57  2a933a                LD          HL,(PLAYER_PHYS_HEALTH)
  5717  2f5a  ed4b953a              LD          BC,(PLAYER_PHYS_HEALTH_MAX)
  5718  2f5e  7c                    LD          A,H
  5719  2f5f  b8                    CP          B
  5720  2f60  3807                  JR          C,CALC_MAX_SPRT_HEALTH
  5721  2f62  7d                    LD          A,L
  5722  2f63  b9                    CP          C
  5723  2f64  3803                  JR          C,CALC_MAX_SPRT_HEALTH
  5724  2f66  22953a                LD          (PLAYER_PHYS_HEALTH_MAX),HL
  5725                          CALC_MAX_SPRT_HEALTH:
  5726  2f69  21983a                LD          HL,PLAYER_SPRT_HEALTH_MAX
  5727  2f6c  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  5728  2f6f  be                    CP          (HL)
  5729  2f70  d8                    RET         C
  5730  2f71  77                    LD          (HL),A
  5731  2f72  c9                    RET
  5732                          REDUCE_HEALTH_BIG:
  5733  2f73  2a933a                LD          HL,(PLAYER_PHYS_HEALTH)
  5734  2f76  7d                    LD          A,L
  5735  2f77  91                    SUB         C
  5736  2f78  27                    DAA
  5737  2f79  6f                    LD          L,A
  5738  2f7a  7c                    LD          A,H
  5739  2f7b  98                    SBC         A,B
  5740  2f7c  27                    DAA
  5741  2f7d  67                    LD          H,A
  5742  2f7e  3829                  JR          C,PLAYER_DIES
  5743  2f80  22933a                LD          (PLAYER_PHYS_HEALTH),HL
  5744  2f83  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  5745  2f86  93                    SUB         E
  5746  2f87  27                    DAA
  5747  2f88  381f                  JR          C,PLAYER_DIES
  5748  2f8a  32973a                LD          (PLAYER_SPRT_HEALTH),A
  5749  2f8d  c9                    RET
  5750                          REDUCE_HEALTH_SMALL:
  5751  2f8e  2a953a                LD          HL,(PLAYER_PHYS_HEALTH_MAX)
  5752  2f91  7d                    LD          A,L
  5753  2f92  91                    SUB         C
  5754  2f93  27                    DAA
  5755  2f94  6f                    LD          L,A
  5756  2f95  7c                    LD          A,H
  5757  2f96  98                    SBC         A,B
  5758  2f97  27                    DAA
  5759  2f98  67                    LD          H,A
  5760  2f99  380e                  JR          C,PLAYER_DIES
  5761  2f9b  22953a                LD          (PLAYER_PHYS_HEALTH_MAX),HL
  5762  2f9e  3a983a                LD          A,(PLAYER_SPRT_HEALTH_MAX)
  5763  2fa1  93                    SUB         E
  5764  2fa2  27                    DAA
  5765  2fa3  3804                  JR          C,PLAYER_DIES
  5766  2fa5  32983a                LD          (PLAYER_SPRT_HEALTH_MAX),A
  5767  2fa8  c9                    RET
  5768                          PLAYER_DIES:
  5769  2fa9  212834                LD          HL,COLRAM_VIEWPORT_IDX                  ;= $60    `
  5770  2fac  011818                LD          BC,$1818                               ;18 x 18 rectangle
  5771  2faf  af                    XOR         A
  5772  2fb0  cdcb08                CALL        FILL_CHRCOL_RECT
  5773  2fb3  21e731                LD          HL,CHRRAM_YOU_DIED_IDX                  ;= $20
  5774  2fb6  11e52f                LD          DE,YOU_DIED_TXT
  5775  2fb9  3a6c3a                LD          A,(INPUT_HOLDER)
  5776  2fbc  32783a                LD          (LAST_ITEM_HELD),A
  5777  2fbf  07                    RLCA
  5778  2fc0  07                    RLCA
  5779  2fc1  07                    RLCA
  5780  2fc2  07                    RLCA
  5781  2fc3  47                    LD          B,A
  5782  2fc4  cd3533                CALL        GFX_DRAW
  5783  2fc7  210000                LD          HL,0x0
  5784  2fca  22933a                LD          (PLAYER_PHYS_HEALTH),HL
  5785  2fcd  af                    XOR         A
  5786  2fce  32973a                LD          (PLAYER_SPRT_HEALTH),A
  5787  2fd1  326c3a                LD          (INPUT_HOLDER),A
  5788  2fd4  cd5d3d                CALL        REDRAW_STATS
  5789  2fd7  3e32                  LD          A,$32
  5790  2fd9  32653a                LD          (RAM_AD),A
  5791  2fdc  cdd30d                CALL        SUB_ram_cdd3
  5792  2fdf  cd481d                CALL        SLEEP_ZERO                              ;byte SLEEP_ZERO(void)
  5793  2fe2  c3b72a                JP          SCREEN_SAVER_FULL_SCREEN
  5794                          YOU_DIED_TXT:
  5795  2fe5  7fa0596f75206469      DB         $7F,$A0,"You died ",$FF
              656420ff          
  5796                          
  5797                          DO_USE_PHYS_POTION:
  5798  2ff1  cd9d2e                CALL        PLAY_USE_PHYS_POTION_SOUND
  5799  2ff4  04                    INC         B                                       ;Change from LEVEL to
  5800                                                                                  ;COLOR value (Level + 1)
  5801  2ff5  60                    LD          H,B
  5802  2ff6  68                    LD          L,B
  5803  2ff7  224134                LD          (COLRAM_PHYS_STATS_1000),HL             ;Update PHYS color (1000s & 100s)
  5804                                                                                  ;to potion level on BLK
  5805  2ffa  224334                LD          (COLRAM_PHYS_STATS_10),HL               ;Update PHYS color (10s & 1s)
  5806                                                                                  ;to potion level on BLK
  5807  2ffd  26d0                  LD          H,$d0                                  ;DKGRN on BLK
  5808  2fff  6c                    LD          L,H
  5809  3000  224634                LD          (COLRAM_SPRT_STATS_10),HL               ;Update SPRT color (10s)
  5810                                                                                  ;to DKGRN on BLACK
  5811  3003  224734                LD          (COLRAM_SPRT_STATS_1),HL                ;Update SPRT color (1s)
  5812                                                                                  ;to DKGRN on BLACK
  5813  3006  c3902e                JP          PROCESS_POTION_UPDATES
  5814                          DO_USE_SPRT_POTION:
  5815  3009  cd9d2e                CALL        PLAY_USE_PHYS_POTION_SOUND
  5816  300c  04                    INC         B                                       ;Change from LEVEL to
  5817                                                                                  ;COLOR value (Level + 1)
  5818  300d  60                    LD          H,B
  5819  300e  68                    LD          L,B
  5820  300f  224634                LD          (COLRAM_SPRT_STATS_10),HL               ;Update SPRT color (10s)
  5821                                                                                  ;to potion level on BLK
  5822  3012  224734                LD          (COLRAM_SPRT_STATS_1),HL                ;Update SPRT color (1s)
  5823                                                                                  ;to potion level on BLK
  5824  3015  26d0                  LD          H,$d0                                  ;DKGRN on BLK
  5825  3017  6c                    LD          L,H
  5826  3018  224134                LD          (COLRAM_PHYS_STATS_1000),HL             ;Update PHYS color (1000s & 100s)
  5827                                                                                  ;to DKGRN on BLK
  5828  301b  224334                LD          (COLRAM_PHYS_STATS_10),HL               ;Update PHYS color (10s & 1s)
  5829                                                                                  ;to DKGRN on BLK
  5830  301e  c3902e                JP          PROCESS_POTION_UPDATES
  5831                          DO_USE_KEY:
  5832  3021  3aea37                LD          A,(ITEM_F0)                             ;= $60
  5833  3024  0e00                  LD          C,0x0
  5834  3026  cb3f                  SRL         A
  5835  3028  cb19                  RR          C
  5836  302a  cb3f                  SRL         A
  5837  302c  cb11                  RL          C
  5838  302e  cb11                  RL          C
  5839  3030  fe14                  CP          $14
  5840  3032  c23022                JP          NZ,NO_ACTION_TAKEN
  5841  3035  78                    LD          A,B
  5842  3036  b9                    CP          C
  5843  3037  da3022                JP          C,NO_ACTION_TAKEN
  5844  303a  79                    LD          A,C
  5845  303b  47                    LD          B,A
  5846  303c  a7                    AND         A
  5847  303d  2809                  JR          Z,LAB_ram_f048
  5848  303f  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  5849  3042  0c                    INC         C
  5850                          LAB_ram_f043:
  5851  3043  91                    SUB         C
  5852  3044  30fd                  JR          NC,LAB_ram_f043
  5853  3046  81                    ADD         A,C
  5854  3047  47                    LD          B,A
  5855                          LAB_ram_f048:
  5856  3048  ed5f                  LD          A,R                                     ;Semi-random number into A
  5857  304a  e607                  AND         0x7
  5858                          LAB_ram_f04c:
  5859  304c  2823                  JR          Z,LAB_ram_f071
  5860  304e  d607                  SUB         0x7
  5861                          LAB_ram_f050:
  5862  3050  30fa                  JR          NC,LAB_ram_f04c
  5863  3052  c61d                  ADD         A,$1d
  5864                          LAB_ram_f054:
  5865  3054  cb18                  RR          B
  5866  3056  cb19                  RR          C
  5867  3058  cb18                  RR          B
  5868  305a  17                    RLA
  5869  305b  cb11                  RL          C
  5870  305d  17                    RLA
  5871  305e  08                    EX          AF,AF'
  5872  305f  3a793a                LD          A,(PLAYER_MAP_POS)
  5873  3062  cdf337                CALL        ITEM_MAP_CHECK
  5874  3065  08                    EX          AF,AF'
  5875  3066  02                    LD          (BC),A
  5876  3067  3a783a                LD          A,(LAST_ITEM_HELD)
  5877  306a  a7                    AND         A
  5878  306b  c24e32                JP          NZ,INIT_MELEE_ANIM
  5879  306e  c3962a                JP          UPDATE_VIEWPORT
  5880                          LAB_ram_f071:
  5881  3071  79                    LD          A,C
  5882  3072  fe04                  CP          0x4
  5883  3074  ca7c30                JP          Z,LAB_ram_f07c
  5884  3077  47                    LD          B,A
  5885  3078  3e16                  LD          A,$16
  5886  307a  18d8                  JR          LAB_ram_f054
  5887                          LAB_ram_f07c:
  5888  307c  0603                  LD          B,0x3
  5889  307e  3e1c                  LD          A,$1c
  5890  3080  18d2                  JR          LAB_ram_f054
  5891                          USE_SOMETHING_ELSE:
  5892  3082  08                    EX          AF,AF'
  5893  3083  3ae833                LD          A,(WALL_F0_STATE)                       ;= $20
  5894  3086  a7                    AND         A
  5895  3087  2804                  JR          Z,CHECK_FOR_NON_ITEMS
  5896  3089  cb57                  BIT         0x2,A
  5897  308b  280b                  JR          Z,CHECK_FOR_END_ITEM
  5898                          CHECK_FOR_NON_ITEMS:
  5899  308d  3ae937                LD          A,(ITEM_F1)                             ;= $60
  5900  3090  fefe                  CP          $fe                                    ;Compare to EMPTY
  5901  3092  2804                  JR          Z,CHECK_FOR_END_ITEM
  5902  3094  fe78                  CP          $78                                    ;Compare to MONSTERS
  5903  3096  3007                  JR          NC,CHECK_IF_BOW_XBOW
  5904                          CHECK_FOR_END_ITEM:
  5905  3098  08                    EX          AF,AF'
  5906  3099  feff                  CP          $ff                                    ;Compare to EMPTY-END
  5907  309b  c23022                JP          NZ,NO_ACTION_TAKEN
  5908  309e  08                    EX          AF,AF'
  5909                          CHECK_IF_BOW_XBOW:
  5910  309f  08                    EX          AF,AF'
  5911  30a0  fe06                  CP          0x6                                     ;Compare to BOW
  5912  30a2  201b                  JR          NZ,CHECK_IF_SCROLL_STAFF
  5913                          USE_BOW_XBOW:
  5914  30a4  c5                    PUSH        BC                                      ;Save BC
  5915  30a5  3aac3a                LD          A,(ARROW_INV)                           ;Get Arrow Inventory
  5916  30a8  d601                  SUB         0x1                                     ;Decrease by 1
  5917  30aa  da3022                JP          C,NO_ACTION_TAKEN                       ;If Arrow Inv <1, end
  5918  30ad  32ac3a                LD          (ARROW_INV),A
  5919  30b0  cd3f23                CALL        CHK_ITEM_BREAK
  5920  30b3  c1                    POP         BC
  5921  30b4  3005                  JR          NC,BOW_XBOW_NO_BREAK
  5922  30b6  3efe                  LD          A,$fe                                  ;$fe = EMPTY ITEM
  5923  30b8  327a3a                LD          (RIGHT_HAND_ITEM),A                     ;Put EMPTY ITEM into Right Hand
  5924                          BOW_XBOW_NO_BREAK:
  5925  30bb  1605                  LD          D,0x5
  5926  30bd  182a                  JR          LAB_ram_f0e9
  5927                          CHECK_IF_SCROLL_STAFF:
  5928  30bf  fe07                  CP          0x7                                     ;Compare to SCROLL
  5929  30c1  2010                  JR          NZ,CHECK_OTHERS
  5930                          USE_SCROLL_STAFF:
  5931  30c3  c5                    PUSH        BC
  5932  30c4  cd3f23                CALL        CHK_ITEM_BREAK
  5933  30c7  c1                    POP         BC
  5934  30c8  3005                  JR          NC,SCROLL_STAFF_NO_BREAK
  5935  30ca  3efe                  LD          A,$fe
  5936  30cc  327a3a                LD          (RIGHT_HAND_ITEM),A
  5937                          SCROLL_STAFF_NO_BREAK:
  5938  30cf  1609                  LD          D,0x9                                   ;Use FIREBALL ammo
  5939  30d1  1816                  JR          LAB_ram_f0e9
  5940                          CHECK_OTHERS:
  5941  30d3  fe0b                  CP          0xb                                     ;Compare to STAFF
  5942  30d5  28ec                  JR          Z,USE_SCROLL_STAFF
  5943  30d7  fe0c                  CP          0xc                                     ;Compare to XBOW
  5944  30d9  28c9                  JR          Z,USE_BOW_XBOW
  5945  30db  fe06                  CP          0x6                                     ;Compare to BOW
  5946  30dd  da3022                JP          C,NO_ACTION_TAKEN
  5947  30e0  fe10                  CP          $10                                    ;Compare to LADDER
  5948  30e2  d21331                JP          NC,LAB_ram_f113
  5949  30e5  57                    LD          D,A
  5950  30e6  cda92e                CALL        SUB_ram_eea9
  5951                          LAB_ram_f0e9:
  5952  30e9  cdf230                CALL        SUB_ram_f0f2
  5953  30ec  c33031                JP          SUB_ram_f130
  5954                          SUB_ram_f0ef:
  5955  30ef  cda92e                CALL        SUB_ram_eea9
  5956                          SUB_ram_f0f2:
  5957  30f2  3e03                  LD          A,0x3
  5958  30f4  32873a                LD          (BYTE_ram_3a87),A
  5959  30f7  7a                    LD          A,D
  5960  30f8  cb27                  SLA         A
  5961  30fa  cb27                  SLA         A
  5962  30fc  b0                    OR          B
  5963  30fd  32823a                LD          (BYTE_ram_3a82),A
  5964  3100  210302                LD          HL,$203
  5965  3103  22853a                LD          (BYTE_ram_3a85),HL
  5966  3106  214333                LD          HL,CHRRAM_RIGHT_HD_GFX_IDX              ;= $20
  5967  3109  22833a                LD          (BYTE_ram_3a83),HL
  5968  310c  7d                    LD          A,L
  5969  310d  32653a                LD          (RAM_AD),A
  5970  3110  c3d723                JP          LAB_ram_e3d7
  5971                          LAB_ram_f113:
  5972  3113  fe11                  CP          $11
  5973  3115  2002                  JR          NZ,LAB_ram_f119
  5974  3117  1805                  JR          LAB_ram_f11e
  5975                          LAB_ram_f119:
  5976  3119  fe14                  CP          $14
  5977  311b  c23022                JP          NZ,NO_ACTION_TAKEN
  5978                          LAB_ram_f11e:
  5979  311e  57                    LD          D,A
  5980  311f  3a783a                LD          A,(LAST_ITEM_HELD)
  5981  3122  a7                    AND         A
  5982  3123  ca3022                JP          Z,NO_ACTION_TAKEN
  5983  3126  af                    XOR         A                                       ;A  = $00
  5984                                                                                  ;Reset C & N, Set Z
  5985  3127  32783a                LD          (LAST_ITEM_HELD),A
  5986  312a  cdef30                CALL        SUB_ram_f0ef
  5987  312d  c39f2a                JP          WAIT_FOR_INPUT
  5988                          SUB_ram_f130:
  5989  3130  3a783a                LD          A,(LAST_ITEM_HELD)
  5990  3133  a7                    AND         A
  5991  3134  c24e32                JP          NZ,INIT_MELEE_ANIM
  5992  3137  3c                    INC         A
  5993  3138  32783a                LD          (LAST_ITEM_HELD),A
  5994  313b  3ae937                LD          A,(ITEM_F1)                             ;= $60
  5995  313e  0600                  LD          B,0x0
  5996  3140  cb3f                  SRL         A
  5997  3142  cb18                  RR          B
  5998  3144  1f                    RRA
  5999  3145  cb10                  RL          B
  6000  3147  cb10                  RL          B
  6001  3149  08                    EX          AF,AF'
  6002  314a  af                    XOR         A
  6003  314b  21683a                LD          HL,DUNGEON_LEVEL
  6004  314e  ed6f                  RLD
  6005  3150  57                    LD          D,A
  6006  3151  cb3f                  SRL         A
  6007  3153  3002                  JR          NC,LAB_ram_f157
  6008  3155  c650                  ADD         A,$50
  6009                          LAB_ram_f157:
  6010  3157  07                    RLCA
  6011  3158  07                    RLCA
  6012  3159  07                    RLCA
  6013  315a  07                    RLCA
  6014  315b  5f                    LD          E,A
  6015  315c  7a                    LD          A,D
  6016  315d  ed6f                  RLD
  6017  315f  57                    LD          D,A
  6018  3160  cb3f                  SRL         A
  6019  3162  83                    ADD         A,E
  6020  3163  c603                  ADD         A,0x3
  6021  3165  27                    DAA
  6022  3166  4f                    LD          C,A
  6023  3167  7a                    LD          A,D
  6024  3168  ed6f                  RLD
  6025  316a  08                    EX          AF,AF'
  6026  316b  d61e                  SUB         $1e
  6027  316d  200e                  JR          NZ,LAB_ram_f17d
  6028  316f  1607                  LD          D,0x7
  6029  3171  210403                LD          HL,$304
  6030  3174  3e3c                  LD          A,$3c
  6031  3176  80                    ADD         A,B
  6032  3177  328a3a                LD          (BYTE_ram_3a8a),A
  6033  317a  c32b32                JP          LAB_ram_f22b
  6034                          LAB_ram_f17d:
  6035  317d  3d                    DEC         A
  6036  317e  200e                  JR          NZ,LAB_ram_f18e
  6037  3180  1603                  LD          D,0x3
  6038  3182  210101                LD          HL,$101
  6039  3185  3e3c                  LD          A,$3c
  6040  3187  80                    ADD         A,B
  6041  3188  328a3a                LD          (BYTE_ram_3a8a),A
  6042  318b  c32b32                JP          LAB_ram_f22b
  6043                          LAB_ram_f18e:
  6044  318e  3d                    DEC         A
  6045  318f  200e                  JR          NZ,LAB_ram_f19f
  6046  3191  1604                  LD          D,0x4
  6047  3193  210200                LD          HL,0x2
  6048  3196  3e24                  LD          A,$24
  6049  3198  80                    ADD         A,B
  6050  3199  328a3a                LD          (BYTE_ram_3a8a),A
  6051  319c  c32b32                JP          LAB_ram_f22b
  6052                          LAB_ram_f19f:
  6053  319f  3d                    DEC         A
  6054  31a0  200d                  JR          NZ,LAB_ram_f1af
  6055  31a2  1605                  LD          D,0x5
  6056  31a4  210302                LD          HL,$203
  6057  31a7  3e3c                  LD          A,$3c
  6058  31a9  80                    ADD         A,B
  6059  31aa  328a3a                LD          (BYTE_ram_3a8a),A
  6060  31ad  187c                  JR          LAB_ram_f22b
  6061                          LAB_ram_f1af:
  6062  31af  3d                    DEC         A
  6063  31b0  200d                  JR          NZ,LAB_ram_f1bf
  6064  31b2  1603                  LD          D,0x3
  6065  31b4  210203                LD          HL,$302
  6066  31b7  3e24                  LD          A,$24
  6067  31b9  80                    ADD         A,B
  6068  31ba  328a3a                LD          (BYTE_ram_3a8a),A
  6069  31bd  186c                  JR          LAB_ram_f22b
  6070                          LAB_ram_f1bf:
  6071  31bf  3d                    DEC         A
  6072  31c0  200d                  JR          NZ,LAB_ram_f1cf
  6073  31c2  1608                  LD          D,0x8
  6074  31c4  210504                LD          HL,$405
  6075  31c7  3e24                  LD          A,$24
  6076  31c9  80                    ADD         A,B
  6077  31ca  328a3a                LD          (BYTE_ram_3a8a),A
  6078  31cd  185c                  JR          LAB_ram_f22b
  6079                          LAB_ram_f1cf:
  6080  31cf  3d                    DEC         A
  6081  31d0  c2e031                JP          NZ,LAB_ram_f1e0
  6082  31d3  1606                  LD          D,0x6
  6083  31d5  210402                LD          HL,$204
  6084  31d8  3e3c                  LD          A,$3c
  6085  31da  80                    ADD         A,B
  6086  31db  328a3a                LD          (BYTE_ram_3a8a),A
  6087  31de  184b                  JR          LAB_ram_f22b
  6088                          LAB_ram_f1e0:
  6089  31e0  3d                    DEC         A
  6090  31e1  200d                  JR          NZ,LAB_ram_f1f0
  6091  31e3  1613                  LD          D,$13
  6092  31e5  210505                LD          HL,$505
  6093  31e8  3e24                  LD          A,$24
  6094  31ea  80                    ADD         A,B
  6095  31eb  328a3a                LD          (BYTE_ram_3a8a),A
  6096  31ee  183b                  JR          LAB_ram_f22b
  6097                          LAB_ram_f1f0:
  6098  31f0  3d                    DEC         A
  6099  31f1  200d                  JR          NZ,LAB_ram_f200
  6100  31f3  1604                  LD          D,0x4
  6101  31f5  210504                LD          HL,$405
  6102  31f8  3e3c                  LD          A,$3c
  6103  31fa  80                    ADD         A,B
  6104  31fb  328a3a                LD          (BYTE_ram_3a8a),A
  6105  31fe  182b                  JR          LAB_ram_f22b
  6106                          LAB_ram_f200:
  6107  3200  3d                    DEC         A
  6108  3201  2025                  JR          NZ,LAB_ram_f228
  6109  3203  1611                  LD          D,$11
  6110  3205  210504                LD          HL,$405
  6111  3208  d9                    EXX
  6112  3209  2a933a                LD          HL,(PLAYER_PHYS_HEALTH)
  6113  320c  cd3924                CALL        SUB_ram_e439
  6114  320f  eb                    EX          DE,HL
  6115  3210  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  6116  3213  6f                    LD          L,A
  6117  3214  2600                  LD          H,0x0
  6118  3216  cd3024                CALL        RECALC_PHYS_HEALTH
  6119  3219  d9                    EXX
  6120  321a  3008                  JR          NC,LAB_ram_f224
  6121  321c  3e24                  LD          A,$24
  6122                          LAB_ram_f21e:
  6123  321e  80                    ADD         A,B
  6124  321f  328a3a                LD          (BYTE_ram_3a8a),A
  6125  3222  1807                  JR          LAB_ram_f22b
  6126                          LAB_ram_f224:
  6127  3224  3e3c                  LD          A,$3c
  6128  3226  18f6                  JR          LAB_ram_f21e
  6129                          LAB_ram_f228:
  6130  3228  c33022                JP          NO_ACTION_TAKEN
  6131                          LAB_ram_f22b:
  6132  322b  cd7f32                CALL        SUB_ram_f27f
  6133  322e  e5                    PUSH        HL
  6134  322f  21a23a                LD          HL,CURR_MONSTER_SPRT
  6135  3232  cd9832                CALL        SUB_ram_f298
  6136  3235  e1                    POP         HL
  6137  3236  54                    LD          D,H
  6138  3237  cd7f32                CALL        SUB_ram_f27f
  6139  323a  e5                    PUSH        HL
  6140  323b  21a53a                LD          HL,BYTE_ram_3aa5
  6141  323e  cd9832                CALL        SUB_ram_f298
  6142  3241  e1                    POP         HL
  6143  3242  55                    LD          D,L
  6144  3243  1e00                  LD          E,0x0
  6145  3245  cd8532                CALL        CALC_WEAPON_VALUE
  6146  3248  32a83a                LD          (WEAPON_VALUE_HOLDER),A
  6147  324b  cd6932                CALL        REDRAW_MONSTER_HEALTH
  6148                          INIT_MELEE_ANIM:
  6149  324e  3e03                  LD          A,0x3                                   ;A  = $03
  6150  3250  328b3a                LD          (MELEE_ANIM_STATE),A
  6151  3253  210602                LD          HL,$206                                ;HL = $ce
  6152  3256  228d3a                LD          (MONSTER_ATT_POS_COUNT),HL
  6153  3259  21ea31                LD          HL,$31ea                               ;HL = $0020 db?
  6154                                                                                  ;Always $20 (SPACE char)?
  6155  325c  228f3a                LD          (MONSTER_ATT_POS_OFFSET),HL
  6156  325f  7d                    LD          A,L
  6157  3260  32663a                LD          (RAM_AE),A
  6158  3263  cd0a26                CALL        ANIMATE_MELEE_ROUND
  6159  3266  c39f2a                JP          WAIT_FOR_INPUT
  6160                          REDRAW_MONSTER_HEALTH:
  6161  3269  118930                LD          DE,CHRRAM_MONSTER_PHYS                  ;WAS LD DE,$333d
  6162  326c  21a33a                LD          HL,CURR_MONSTER_PHYS
  6163  326f  0602                  LD          B,0x2
  6164  3271  cdfd32                CALL        RECALC_AND_REDRAW_BCD
  6165  3274  116330                LD          DE,CHRRAM_MONSTER_SPRT                  ;WAS LD DE,$338f
  6166  3277  21a23a                LD          HL,CURR_MONSTER_SPRT
  6167  327a  0601                  LD          B,0x1
  6168  327c  c3fd32                JP          RECALC_AND_REDRAW_BCD
  6169                          SUB_ram_f27f:
  6170  327f  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  6171  3282  e607                  AND         0x7
  6172  3284  5f                    LD          E,A
  6173                          CALC_WEAPON_VALUE:
  6174  3285  c5                    PUSH        BC                                      ;Save original weaponLevel
  6175  3286  04                    INC         B                                       ;B = B + 1
  6176  3287  7a                    LD          A,D                                     ;A = D
  6177  3288  1802                  JR          LAB_ram_f28c
  6178                          LAB_ram_f28a:
  6179  328a  82                    ADD         A,D                                     ;A = A + D
  6180  328b  27                    DAA                                                 ;Normalize for BCD
  6181                          LAB_ram_f28c:
  6182  328c  10fc                  DJNZ        LAB_ram_f28a                            ;B = B - 1
  6183  328e  93                    SUB         E                                       ;A = A - E
  6184  328f  27                    DAA                                                 ;Normalize for BCD
  6185  3290  3002                  JR          NC,LAB_ram_f294
  6186  3292  8b                    ADC         A,E                                     ;A = A + E (and CARRY)
  6187  3293  27                    DAA                                                 ;Normalize for BCD
  6188                          LAB_ram_f294:
  6189  3294  81                    ADD         A,C                                     ;A = A + C
  6190  3295  27                    DAA                                                 ;Normalize for BCD
  6191  3296  c1                    POP         BC                                      ;BC = Original weaponLevel
  6192  3297  c9                    RET                                                 ;A = new weaponValue
  6193                          SUB_ram_f298:
  6194  3298  77                    LD          (HL),A
  6195  3299  23                    INC         HL
  6196  329a  87                    ADD         A,A
  6197  329b  27                    DAA
  6198  329c  77                    LD          (HL),A
  6199  329d  23                    INC         HL
  6200  329e  3e00                  LD          A,0x0
  6201  32a0  17                    RLA
  6202  32a1  77                    LD          (HL),A
  6203  32a2  c9                    RET
  6204                          DO_USE_LADDER:
  6205  32a3  3a783a                LD          A,(LAST_ITEM_HELD)
  6206  32a6  a7                    AND         A
  6207  32a7  c23022                JP          NZ,NO_ACTION_TAKEN
  6208  32aa  3aea37                LD          A,(ITEM_F0)                             ;= $60
  6209  32ad  fe42                  CP          $42
  6210  32af  c23022                JP          NZ,NO_ACTION_TAKEN
  6211  32b2  3a793a                LD          A,(PLAYER_MAP_POS)
  6212  32b5  32773a                LD          (PLAYER_PREV_MAP_LOC),A
  6213  32b8  cda333                CALL        BUILD_MAP
  6214  32bb  cdbf0d                CALL        SUB_ram_cdbf
  6215  32be  cdc432                CALL        SUB_ram_f2c4
  6216  32c1  c35a16                JP          RESET_SHIFT_MODE
  6217                          SUB_ram_f2c4:
  6218  32c4  110230                LD          DE,$3002                               ;WAS $33df
  6219  32c7  21683a                LD          HL,DUNGEON_LEVEL
  6220  32ca  3e01                  LD          A,0x1
  6221  32cc  86                    ADD         A,(HL)
  6222  32cd  27                    DAA
  6223  32ce  380c                  JR          C,LAB_ram_f2dc
  6224                          LAB_ram_f2d0:
  6225  32d0  77                    LD          (HL),A
  6226  32d1  0601                  LD          B,0x1
  6227  32d3  cdfd32                CALL        RECALC_AND_REDRAW_BCD
  6228  32d6  cde634                CALL        REDRAW_START
  6229  32d9  c30438                JP          REDRAW_VIEWPORT
  6230                          LAB_ram_f2dc:
  6231  32dc  cda011                CALL        DRAW_BKGD
  6232  32df  215130                LD          HL,DAT_ram_3051                         ;= $20
  6233  32e2  111301                LD          DE,LEVEL_99_LOOP                        ;= "Looks like this dungeon",$01
  6234  32e5  06f0                  LD          B,$f0
  6235  32e7  cd3533                CALL        GFX_DRAW
  6236  32ea  061e                  LD          B,$1e
  6237                          LAB_ram_f2ec:
  6238  32ec  d9                    EXX
  6239  32ed  cd481d                CALL        SLEEP_ZERO                              ;byte SLEEP_ZERO(void)
  6240  32f0  d9                    EXX
  6241  32f1  10f9                  DJNZ        LAB_ram_f2ec
  6242  32f3  3e90                  LD          A,$90
  6243  32f5  21683a                LD          HL,DUNGEON_LEVEL
  6244  32f8  11df33                LD          DE,CHHRAM_LVL_IDX                       ;= $20
  6245  32fb  18d3                  JR          LAB_ram_f2d0
  6246                          RECALC_AND_REDRAW_BCD:
  6247  32fd  d5                    PUSH        DE
  6248  32fe  11503a                LD          DE,$3a50
  6249  3301  78                    LD          A,B
  6250  3302  cb27                  SLA         A
  6251  3304  3d                    DEC         A
  6252  3305  08                    EX          AF,AF'
  6253                          LAB_ram_f306:
  6254  3306  7e                    LD          A,(HL)
  6255  3307  e60f                  AND         0xf                                     ;Wipe upper nybble
  6256  3309  c630                  ADD         A,$30                                  ;Numeric char offset
  6257  330b  12                    LD          (DE),A
  6258  330c  7e                    LD          A,(HL)
  6259  330d  e6f0                  AND         $f0                                    ;Wipe lower nybble
  6260  330f  0f                    RRCA                                                ;Move upper
  6261  3310  0f                    RRCA                                                ;nybble to
  6262  3311  0f                    RRCA                                                ;lower
  6263  3312  0f                    RRCA                                                ;nybble
  6264  3313  c630                  ADD         A,$30                                  ;Numeric char offset
  6265  3315  13                    INC         DE
  6266  3316  12                    LD          (DE),A
  6267  3317  13                    INC         DE
  6268  3318  23                    INC         HL
  6269  3319  10eb                  DJNZ        LAB_ram_f306
  6270  331b  1b                    DEC         DE
  6271  331c  e1                    POP         HL
  6272  331d  08                    EX          AF,AF'
  6273  331e  47                    LD          B,A
  6274                          LAB_ram_f31f:
  6275  331f  1a                    LD          A,(DE)
  6276  3320  fe30                  CP          $30                                    ;Numeric char offset
  6277  3322  2009                  JR          NZ,LAB_ram_f32d
  6278  3324  3620                  LD          (HL),$20                               ;SPACE char for ZERO
  6279  3326  23                    INC         HL                                      ;Move forward one cell
  6280  3327  1b                    DEC         DE                                      ;Move backwards one byte
  6281                                                                                  ;(big endian)
  6282  3328  10f5                  DJNZ        LAB_ram_f31f
  6283  332a  1a                    LD          A,(DE)
  6284  332b  1806                  JR          LAB_ram_f333
  6285                          LAB_ram_f32d:
  6286  332d  77                    LD          (HL),A
  6287  332e  23                    INC         HL                                      ;Move forward one cell
  6288  332f  1b                    DEC         DE                                      ;Move backwards one byte
  6289                                                                                  ;(big endian)
  6290  3330  1a                    LD          A,(DE)
  6291  3331  10fa                  DJNZ        LAB_ram_f32d
  6292                          LAB_ram_f333:
  6293  3333  77                    LD          (HL),A
  6294  3334  c9                    RET
  6295                          GFX_DRAW:
  6296  3335  e5                    PUSH        HL
  6297  3336  0e28                  LD          C,$28                                  ;$28 = +40, down one row
  6298                          LAB_ram_f338:
  6299  3338  1a                    LD          A,(DE)                       ;= "\b",$FF
  6300                                                                                  ;= $FF
  6301  3339  13                    INC         DE
  6302  333a  3c                    INC         A
  6303  333b  2002                  JR          NZ,LAB_ram_f33f                         ;Check for $ff end of graphic char
  6304  333d  e1                    POP         HL
  6305  333e  c9                    RET
  6306                          LAB_ram_f33f:
  6307  333f  3d                    DEC         A                                       ;$00 = no char, move right one column...
  6308  3340  2003                  JR          NZ,LAB_ram_f345
  6309  3342  23                    INC         HL
  6310  3343  18f3                  JR          LAB_ram_f338
  6311                          LAB_ram_f345:
  6312  3345  fe01                  CP          0x1                                     ;$01 = down one row, back to index
  6313  3347  2009                  JR          NZ,LAB_ram_f352
  6314  3349  78                    LD          A,B
  6315  334a  0600                  LD          B,0x0
  6316  334c  e1                    POP         HL
  6317  334d  09                    ADD         HL,BC
  6318  334e  e5                    PUSH        HL
  6319  334f  47                    LD          B,A
  6320  3350  18e6                  JR          LAB_ram_f338
  6321                          LAB_ram_f352:
  6322  3352  fe02                  CP          0x2                                     ;$02 = back up one column
  6323  3354  2003                  JR          NZ,LAB_ram_f359
  6324  3356  2b                    DEC         HL
  6325  3357  18df                  JR          LAB_ram_f338
  6326                          LAB_ram_f359:
  6327  3359  fe03                  CP          0x3                                     ;$03 = down one row, same column
  6328  335b  200a                  JR          NZ,LAB_ram_f367
  6329  335d  78                    LD          A,B
  6330  335e  0600                  LD          B,0x0
  6331  3360  09                    ADD         HL,BC
  6332  3361  e3                    EX          (SP),HL
  6333  3362  09                    ADD         HL,BC
  6334  3363  e3                    EX          (SP),HL
  6335  3364  47                    LD          B,A
  6336  3365  18d1                  JR          LAB_ram_f338
  6337                          LAB_ram_f367:
  6338  3367  fe04                  CP          0x4                                     ;$04 = up one row, same column
  6339  3369  200c                  JR          NZ,LAB_ram_f377
  6340  336b  78                    LD          A,B
  6341  336c  0600                  LD          B,0x0
  6342  336e  ed42                  SBC         HL,BC
  6343  3370  e3                    EX          (SP),HL
  6344  3371  ed42                  SBC         HL,BC
  6345  3373  e3                    EX          (SP),HL
  6346  3374  47                    LD          B,A
  6347  3375  18c1                  JR          LAB_ram_f338
  6348                          LAB_ram_f377:
  6349  3377  fea0                  CP          $a0                                    ;$a0 = reverse FG & BG colors
  6350  3379  200a                  JR          NZ,LAB_ram_f385
  6351  337b  cb08                  RRC         B                                       ;Swap hi and lo nybbles (FG & BG colo...
  6352  337d  cb08                  RRC         B
  6353  337f  cb08                  RRC         B
  6354  3381  cb08                  RRC         B
  6355  3383  18b3                  JR          LAB_ram_f338
  6356                          LAB_ram_f385:
  6357  3385  77                    LD          (HL),A              ;= $20
  6358  3386  24                    INC         H
  6359  3387  24                    INC         H
  6360  3388  24                    INC         H
  6361  3389  24                    INC         H
  6362  338a  3e0f                  LD          A,0xf
  6363  338c  b8                    CP          B
  6364  338d  7e                    LD          A,(HL)                    ;= $60
  6365  338e  3808                  JR          C,LAB_ram_f398
  6366  3390  07                    RLCA
  6367  3391  07                    RLCA
  6368  3392  07                    RLCA
  6369  3393  07                    RLCA
  6370  3394  e6f0                  AND         $f0
  6371  3396  1802                  JR          LAB_ram_f39a
  6372                          LAB_ram_f398:
  6373  3398  e60f                  AND         0xf
  6374                          LAB_ram_f39a:
  6375  339a  b0                    OR          B
  6376  339b  77                    LD          (HL),A                    ;= $60
  6377  339c  25                    DEC         H
  6378  339d  25                    DEC         H
  6379  339e  25                    DEC         H
  6380  339f  25                    DEC         H
  6381  33a0  23                    INC         HL
  6382  33a1  1895                  JR          LAB_ram_f338
  6383                          BUILD_MAP:
  6384  33a3  210038                LD          HL,MAPSPACE_WALLS
  6385  33a6  0600                  LD          B,0x0
  6386                          GENERATE_MAPWALLS_LOOP:
  6387  33a8  cdac3a                CALL        MAKE_RANDOM_BYTE
  6388  33ab  5f                    LD          E,A
  6389  33ac  cdac3a                CALL        MAKE_RANDOM_BYTE
  6390  33af  a3                    AND         E
  6391  33b0  e663                  AND         $63
  6392  33b2  77                    LD          (HL),A
  6393  33b3  2c                    INC         L
  6394  33b4  10f2                  DJNZ        GENERATE_MAPWALLS_LOOP
  6395  33b6  3a793a                LD          A,(PLAYER_MAP_POS)
  6396  33b9  6f                    LD          L,A
  6397  33ba  3642                  LD          (HL),$42
  6398                          GEN_MAP_NW_WALL_LOOP:
  6399  33bc  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  6400  33bf  3c                    INC         A
  6401  33c0  28fa                  JR          Z,GEN_MAP_NW_WALL_LOOP
  6402  33c2  3d                    DEC         A
  6403  33c3  32a13a                LD          (ITEM_HOLDER),A
  6404  33c6  6f                    LD          L,A
  6405  33c7  3663                  LD          (HL),$63
  6406  33c9  210039                LD          HL,MAP_LADDER_OFFSET
  6407  33cc  77                    LD          (HL),A
  6408  33cd  2c                    INC         L
  6409  33ce  3642                  LD          (HL),$42                   ;Put ladder object into map
  6410                                                                                  ;(always 1st item after offset)
  6411  33d0  2c                    INC         L
  6412  33d1  3a6c3a                LD          A,(INPUT_HOLDER)
  6413  33d4  47                    LD          B,A
  6414  33d5  3e02                  LD          A,0x2
  6415  33d7  1802                  JR          LAB_ram_f3db
  6416                          LAB_ram_f3d9:
  6417  33d9  87                    ADD         A,A
  6418  33da  27                    DAA
  6419                          LAB_ram_f3db:
  6420  33db  10fc                  DJNZ        LAB_ram_f3d9
  6421  33dd  4f                    LD          C,A
  6422  33de  3a683a                LD          A,(DUNGEON_LEVEL)
  6423  33e1  b9                    CP          C
  6424  33e2  3819                  JR          C,LAB_ram_f3fd
  6425                          GEN_ITEM_MAP:
  6426  33e4  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  6427  33e7  3c                    INC         A
  6428  33e8  28fa                  JR          Z,GEN_ITEM_MAP
  6429  33ea  3d                    DEC         A
  6430  33eb  4f                    LD          C,A
  6431  33ec  3aa13a                LD          A,(ITEM_HOLDER)
  6432  33ef  b9                    CP          C
  6433  33f0  28f2                  JR          Z,GEN_ITEM_MAP
  6434  33f2  3a793a                LD          A,(PLAYER_MAP_POS)
  6435  33f5  b9                    CP          C
  6436  33f6  28ec                  JR          Z,GEN_ITEM_MAP
  6437  33f8  71                    LD          (HL),C
  6438  33f9  23                    INC         HL
  6439  33fa  369f                  LD          (HL),$9f                ;Full ITEM_monster range $009f
  6440  33fc  23                    INC         HL
  6441                          LAB_ram_f3fd:
  6442  33fd  0650                  LD          B,$50                                  ;Max 50 items+monstersdb?
  6443                          GEN_RND_ITEM:
  6444  33ff  cdac3a                CALL        MAKE_RANDOM_BYTE
  6445  3402  3c                    INC         A
  6446  3403  28fa                  JR          Z,GEN_RND_ITEM
  6447  3405  3d                    DEC         A
  6448  3406  08                    EX          AF,AF'
  6449  3407  3a683a                LD          A,(DUNGEON_LEVEL)
  6450  340a  a7                    AND         A
  6451  340b  200a                  JR          NZ,LAB_ram_f417
  6452  340d  08                    EX          AF,AF'
  6453  340e  fe01                  CP          0x1
  6454  3410  28ed                  JR          Z,GEN_RND_ITEM
  6455  3412  fe10                  CP          $10
  6456  3414  28e9                  JR          Z,GEN_RND_ITEM
  6457  3416  08                    EX          AF,AF'
  6458                          LAB_ram_f417:
  6459  3417  08                    EX          AF,AF'
  6460  3418  5f                    LD          E,A
  6461  3419  3a793a                LD          A,(PLAYER_MAP_POS)
  6462  341c  bb                    CP          E
  6463  341d  28e0                  JR          Z,GEN_RND_ITEM
  6464  341f  3aa13a                LD          A,(ITEM_HOLDER)
  6465  3422  bb                    CP          E
  6466  3423  28da                  JR          Z,GEN_RND_ITEM
  6467  3425  73                    LD          (HL),E
  6468  3426  2c                    INC         L
  6469  3427  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  6470  342a  e6c0                  AND         $c0
  6471  342c  07                    RLCA
  6472  342d  07                    RLCA
  6473  342e  3d                    DEC         A
  6474  342f  2006                  JR          NZ,LAB_ram_f437
  6475  3431  0e05                  LD          C,0x5
  6476  3433  1600                  LD          D,0x0
  6477  3435  182e                  JR          LAB_ram_f465
  6478                          LAB_ram_f437:
  6479  3437  3d                    DEC         A
  6480  3438  200f                  JR          NZ,LAB_ram_f449
  6481  343a  0e05                  LD          C,0x5
  6482  343c  1606                  LD          D,0x6
  6483  343e  3a683a                LD          A,(DUNGEON_LEVEL)
  6484  3441  fe06                  CP          0x6
  6485  3443  3820                  JR          C,LAB_ram_f465
  6486  3445  0e07                  LD          C,0x7
  6487  3447  181c                  JR          LAB_ram_f465
  6488                          LAB_ram_f449:
  6489  3449  3d                    DEC         A
  6490  344a  2006                  JR          NZ,LAB_ram_f452
  6491  344c  0e04                  LD          C,0x4
  6492  344e  1611                  LD          D,$11
  6493  3450  1813                  JR          LAB_ram_f465
  6494                          LAB_ram_f452:
  6495  3452  161e                  LD          D,$1e
  6496  3454  0e05                  LD          C,0x5
  6497  3456  3a683a                LD          A,(DUNGEON_LEVEL)
  6498  3459  fe06                  CP          0x6
  6499  345b  3808                  JR          C,LAB_ram_f465
  6500  345d  0e07                  LD          C,0x7
  6501  345f  fe16                  CP          $16
  6502  3461  3802                  JR          C,LAB_ram_f465
  6503  3463  0e09                  LD          C,0x9
  6504                          LAB_ram_f465:
  6505  3465  cdac3a                CALL        MAKE_RANDOM_BYTE
  6506  3468  e60f                  AND         0xf
  6507                          LAB_ram_f46a:
  6508  346a  91                    SUB         C
  6509  346b  30fd                  JR          NC,LAB_ram_f46a
  6510  346d  81                    ADD         A,C
  6511  346e  82                    ADD         A,D
  6512  346f  4f                    LD          C,A
  6513  3470  3a683a                LD          A,(DUNGEON_LEVEL)
  6514  3473  3c                    INC         A
  6515  3474  3c                    INC         A
  6516  3475  cb3f                  SRL         A
  6517  3477  57                    LD          D,A
  6518  3478  cdca3a                CALL        UPDATE_SCR_SAVER_TIMER
  6519  347b  5f                    LD          E,A
  6520  347c  cdac3a                CALL        MAKE_RANDOM_BYTE
  6521  347f  a3                    AND         E
  6522  3480  e603                  AND         0x3
  6523                          LAB_ram_f482:
  6524  3482  92                    SUB         D
  6525  3483  30fd                  JR          NC,LAB_ram_f482
  6526  3485  82                    ADD         A,D
  6527  3486  1f                    RRA
  6528  3487  1f                    RRA
  6529  3488  cb11                  RL          C
  6530  348a  17                    RLA
  6531  348b  cb11                  RL          C
  6532  348d  71                    LD          (HL),C
  6533  348e  2c                    INC         L
  6534  348f  05                    DEC         B
  6535  3490  c2ff33                JP          NZ,GEN_RND_ITEM
  6536  3493  36ff                  LD          (HL),$ff
  6537  3495  11003b                LD          DE,TEMP_MAP
  6538  3498  210039                LD          HL,MAP_LADDER_OFFSET
  6539  349b  0600                  LD          B,0x0
  6540                          LAB_ram_f49d:
  6541  349d  7e                    LD          A,(HL)
  6542  349e  feff                  CP          $ff
  6543  34a0  281f                  JR          Z,SETUP_MAP_COPY
  6544  34a2  04                    INC         B
  6545  34a3  cdd434                CALL        SUB_ram_f4d4
  6546  34a6  d9                    EXX
  6547  34a7  280e                  JR          Z,LAB_ram_f4b7
  6548  34a9  12                    LD          (DE),A
  6549  34aa  13                    INC         DE
  6550  34ab  23                    INC         HL
  6551  34ac  7e                    LD          A,(HL)
  6552  34ad  fefe                  CP          $fe
  6553  34af  280b                  JR          Z,LAB_ram_f4bc
  6554  34b1  04                    INC         B
  6555  34b2  12                    LD          (DE),A
  6556  34b3  13                    INC         DE
  6557  34b4  23                    INC         HL
  6558  34b5  18e6                  JR          LAB_ram_f49d
  6559                          LAB_ram_f4b7:
  6560  34b7  23                    INC         HL
  6561  34b8  23                    INC         HL
  6562  34b9  05                    DEC         B
  6563  34ba  18e1                  JR          LAB_ram_f49d
  6564                          LAB_ram_f4bc:
  6565  34bc  23                    INC         HL
  6566  34bd  1b                    DEC         DE
  6567  34be  05                    DEC         B
  6568  34bf  18dc                  JR          LAB_ram_f49d
  6569                          SETUP_MAP_COPY:
  6570  34c1  11003b                LD          DE,TEMP_MAP                             ;DE = Temp Map
  6571  34c4  210039                LD          HL,MAP_LADDER_OFFSET                    ;HL = Real Map
  6572  34c7  04                    INC         B
  6573  34c8  05                    DEC         B
  6574  34c9  2806                  JR          Z,MAP_DONE
  6575                          COPY_TEMP_MAP_TO_REAL_MAP:
  6576  34cb  1a                    LD          A,(DE)
  6577  34cc  77                    LD          (HL),A
  6578  34cd  23                    INC         HL
  6579  34ce  13                    INC         DE
  6580  34cf  10fa                  DJNZ        COPY_TEMP_MAP_TO_REAL_MAP               ;Loop while B is not zero
  6581                          MAP_DONE:
  6582  34d1  36ff                  LD          (HL),$ff
  6583  34d3  c9                    RET
  6584                          SUB_ram_f4d4:
  6585  34d4  c5                    PUSH        BC
  6586  34d5  d9                    EXX
  6587  34d6  c1                    POP         BC
  6588  34d7  05                    DEC         B
  6589  34d8  280a                  JR          Z,LAB_ram_f4e4
  6590  34da  21003b                LD          HL,TEMP_MAP
  6591                          LAB_ram_f4dd:
  6592  34dd  be                    CP          (HL)
  6593  34de  c8                    RET         Z
  6594  34df  05                    DEC         B
  6595  34e0  23                    INC         HL
  6596  34e1  23                    INC         HL
  6597  34e2  10f9                  DJNZ        LAB_ram_f4dd
  6598                          LAB_ram_f4e4:
  6599  34e4  05                    DEC         B
  6600  34e5  c9                    RET
  6601                          REDRAW_START:
  6602  34e6  21a1f7                LD          HL,$f7a1
  6603  34e9  e5                    PUSH        HL
  6604  34ea  21793a                LD          HL,PLAYER_MAP_POS
  6605  34ed  5e                    LD          E,(HL)
  6606  34ee  1638                  LD          D,$38                                  ;DE = Player map position in RAM
  6607  34f0  21e833                LD          HL,WALL_F0_STATE                        ;= $20
  6608  34f3  0e05                  LD          C,0x5
  6609  34f5  3a623a                LD          A,(DIR_FACING_SHORT)
  6610  34f8  3d                    DEC         A
  6611  34f9  cab435                JP          Z,FACING_NORTH
  6612  34fc  3d                    DEC         A
  6613  34fd  caff36                JP          Z,FACING_EAST
  6614  3500  3d                    DEC         A
  6615  3501  ca4936                JP          Z,FACING_SOUTH
  6616  3504  1a                    LD          A,(DE)
  6617  3505  e607                  AND         0x7                                     ;Keep low 3 bits, reset top 5 bits
  6618  3507  77                    LD          (HL),A                   ;= $20
  6619  3508  1d                    DEC         E
  6620  3509  cd9b37                CALL        CALC_WEST_REDRAW
  6621  350c  1d                    DEC         E
  6622  350d  cd9b37                CALL        CALC_WEST_REDRAW
  6623  3510  7b                    LD          A,E
  6624  3511  c610                  ADD         A,$10
  6625  3513  5f                    LD          E,A
  6626  3514  cda035                CALL        REDRAW_VIEW
  6627  3517  2c                    INC         L
  6628  3518  77                    LD          (HL),A                   ;= $20
  6629  3519  1a                    LD          A,(DE)
  6630  351a  e607                  AND         0x7
  6631  351c  cda735                CALL        REDRAW_NORTH
  6632  351f  7b                    LD          A,E
  6633  3520  d610                  SUB         $10
  6634  3522  5f                    LD          E,A
  6635  3523  cda035                CALL        REDRAW_VIEW
  6636  3526  77                    LD          (HL),A                   ;= $20
  6637  3527  7b                    LD          A,E
  6638  3528  d610                  SUB         $10
  6639  352a  5f                    LD          E,A
  6640  352b  1a                    LD          A,(DE)
  6641  352c  e607                  AND         0x7
  6642  352e  cda735                CALL        REDRAW_NORTH
  6643  3531  7b                    LD          A,E
  6644  3532  c621                  ADD         A,$21
  6645  3534  5f                    LD          E,A
  6646  3535  cda035                CALL        REDRAW_VIEW
  6647  3538  77                    LD          (HL),A                   ;= $20
  6648  3539  1a                    LD          A,(DE)
  6649  353a  e607                  AND         0x7
  6650  353c  cda735                CALL        REDRAW_NORTH
  6651  353f  7b                    LD          A,E
  6652  3540  d610                  SUB         $10
  6653  3542  5f                    LD          E,A
  6654  3543  cda035                CALL        REDRAW_VIEW
  6655  3546  2c                    INC         L
  6656  3547  77                    LD          (HL),A                   ;= $20
  6657  3548  7b                    LD          A,E
  6658  3549  d610                  SUB         $10
  6659  354b  5f                    LD          E,A
  6660  354c  1a                    LD          A,(DE)
  6661  354d  e607                  AND         0x7
  6662  354f  cda735                CALL        REDRAW_NORTH
  6663  3552  7b                    LD          A,E
  6664  3553  c621                  ADD         A,$21
  6665  3555  5f                    LD          E,A
  6666  3556  cda035                CALL        REDRAW_VIEW
  6667  3559  2c                    INC         L
  6668  355a  77                    LD          (HL),A                   ;= $20
  6669  355b  cd9b37                CALL        CALC_WEST_REDRAW
  6670  355e  7b                    LD          A,E
  6671  355f  c60e                  ADD         A,0xe
  6672  3561  5f                    LD          E,A
  6673  3562  cda035                CALL        REDRAW_VIEW
  6674  3565  2c                    INC         L
  6675  3566  2c                    INC         L
  6676  3567  77                    LD          (HL),A                    ;= $20
  6677  3568  7b                    LD          A,E
  6678  3569  d61e                  SUB         $1e
  6679  356b  5f                    LD          E,A
  6680  356c  cda035                CALL        REDRAW_VIEW
  6681  356f  2c                    INC         L
  6682  3570  77                    LD          (HL),A                    ;= $20
  6683  3571  7b                    LD          A,E
  6684  3572  d610                  SUB         $10
  6685  3574  5f                    LD          E,A
  6686  3575  cd9b37                CALL        CALC_WEST_REDRAW
  6687  3578  1d                    DEC         E
  6688  3579  1d                    DEC         E
  6689  357a  cda035                CALL        REDRAW_VIEW
  6690  357d  2c                    INC         L
  6691  357e  2c                    INC         L
  6692  357f  77                    LD          (HL),A                    ;= $20
  6693  3580  7b                    LD          A,E
  6694  3581  c613                  ADD         A,$13
  6695  3583  5f                    LD          E,A
  6696  3584  cd9b37                CALL        CALC_WEST_REDRAW
  6697  3587  16ff                  LD          D,$ff
  6698  3589  1ef0                  LD          E,$f0
  6699  358b  ed53603a              LD          (DIR_FACING_FW),DE                      ;DE = $fff0 (WEST)
  6700  358f  0610                  LD          B,$10                                  ;RED on BLK
  6701  3591  21d831                LD          HL,CHRRAM_POINTER_IDX                   ;WAS $31d6
  6702  3594  119a35                LD          DE,WEST_TXT                             ;= "\a",$FF
  6703  3597  c33533                JP          GFX_DRAW
  6704                          WEST_TXT:
  6705  359a  07ff                  db          "\a",$FF
  6706  359c  00                    db          $00
  6707  359d  00                    db          $00
  6708  359e  00                    db          $00
  6709  359f  00                    db          $00
  6710                          REDRAW_VIEW:
  6711  35a0  1a                    LD          A,(DE)
  6712  35a1  e6e0                  AND         $e0
  6713  35a3  07                    RLCA
  6714  35a4  07                    RLCA
  6715  35a5  07                    RLCA
  6716  35a6  c9                    RET
  6717                          REDRAW_NORTH:
  6718  35a7  2c                    INC         L
  6719  35a8  77                    LD          (HL),A
  6720  35a9  47                    LD          B,A
  6721  35aa  7d                    LD          A,L
  6722  35ab  81                    ADD         A,C
  6723  35ac  6f                    LD          L,A
  6724  35ad  70                    LD          (HL),B
  6725  35ae  7d                    LD          A,L
  6726  35af  91                    SUB         C
  6727  35b0  6f                    LD          L,A
  6728  35b1  2c                    INC         L
  6729  35b2  0c                    INC         C
  6730  35b3  c9                    RET
  6731                          FACING_NORTH:
  6732  35b4  cda035                CALL        REDRAW_VIEW
  6733  35b7  77                    LD          (HL),A
  6734  35b8  7b                    LD          A,E
  6735  35b9  d610                  SUB         $10
  6736  35bb  5f                    LD          E,A
  6737  35bc  cda035                CALL        REDRAW_VIEW
  6738  35bf  2c                    INC         L
  6739  35c0  77                    LD          (HL),A
  6740  35c1  7b                    LD          A,E
  6741  35c2  d610                  SUB         $10
  6742  35c4  5f                    LD          E,A
  6743  35c5  cda035                CALL        REDRAW_VIEW
  6744  35c8  2c                    INC         L
  6745  35c9  77                    LD          (HL),A
  6746  35ca  cd9b37                CALL        CALC_WEST_REDRAW
  6747  35cd  1d                    DEC         E
  6748  35ce  cda035                CALL        REDRAW_VIEW
  6749  35d1  cda735                CALL        REDRAW_NORTH
  6750  35d4  1c                    INC         E
  6751  35d5  1c                    INC         E
  6752  35d6  1a                    LD          A,(DE)
  6753  35d7  e607                  AND         0x7
  6754  35d9  77                    LD          (HL),A
  6755  35da  cda035                CALL        REDRAW_VIEW
  6756  35dd  cda735                CALL        REDRAW_NORTH
  6757  35e0  7b                    LD          A,E
  6758  35e1  c60f                  ADD         A,0xf
  6759  35e3  5f                    LD          E,A
  6760  35e4  1a                    LD          A,(DE)
  6761  35e5  e607                  AND         0x7
  6762  35e7  77                    LD          (HL),A
  6763  35e8  1d                    DEC         E
  6764  35e9  cda035                CALL        REDRAW_VIEW
  6765  35ec  cda735                CALL        REDRAW_NORTH
  6766  35ef  1c                    INC         E
  6767  35f0  1c                    INC         E
  6768  35f1  cd9b37                CALL        CALC_WEST_REDRAW
  6769  35f4  cda035                CALL        REDRAW_VIEW
  6770  35f7  cda735                CALL        REDRAW_NORTH
  6771  35fa  7b                    LD          A,E
  6772  35fb  c60f                  ADD         A,0xf
  6773  35fd  5f                    LD          E,A
  6774  35fe  cd9b37                CALL        CALC_WEST_REDRAW
  6775  3601  1d                    DEC         E
  6776  3602  cda035                CALL        REDRAW_VIEW
  6777  3605  2c                    INC         L
  6778  3606  77                    LD          (HL),A
  6779  3607  7b                    LD          A,E
  6780  3608  d620                  SUB         $20
  6781  360a  5f                    LD          E,A
  6782  360b  1a                    LD          A,(DE)
  6783  360c  e607                  AND         0x7
  6784  360e  2c                    INC         L
  6785  360f  2c                    INC         L
  6786  3610  77                    LD          (HL),A
  6787  3611  7b                    LD          A,E
  6788  3612  c622                  ADD         A,$22
  6789  3614  5f                    LD          E,A
  6790  3615  cd9b37                CALL        CALC_WEST_REDRAW
  6791  3618  cda035                CALL        REDRAW_VIEW
  6792  361b  2c                    INC         L
  6793  361c  77                    LD          (HL),A
  6794  361d  7b                    LD          A,E
  6795  361e  d61f                  SUB         $1f
  6796  3620  5f                    LD          E,A
  6797  3621  1a                    LD          A,(DE)
  6798  3622  e607                  AND         0x7
  6799  3624  2c                    INC         L
  6800  3625  2c                    INC         L
  6801  3626  77                    LD          (HL),A
  6802  3627  7b                    LD          A,E
  6803  3628  c62e                  ADD         A,$2e
  6804  362a  5f                    LD          E,A
  6805  362b  cda035                CALL        REDRAW_VIEW
  6806  362e  2c                    INC         L
  6807  362f  77                    LD          (HL),A
  6808  3630  16f0                  LD          D,$f0
  6809  3632  1e01                  LD          E,0x1
  6810  3634  ed53603a              LD          (DIR_FACING_FW),DE
  6811  3638  0610                  LD          B,$10                                  ;RED on BLK
  6812  363a  21d831                LD          HL,CHRRAM_POINTER_IDX                   ;WAS $31d6
  6813  363d  114336                LD          DE,NORTH_TXT                            ;= "\b",$FF
  6814  3640  c33533                JP          GFX_DRAW
  6815                          NORTH_TXT:
  6816  3643  08ff                  db          "\b",$FF
  6817  3645  00                    db          $00
  6818  3646  00                    db          $00
  6819  3647  00                    db          $00
  6820  3648  00                    db          $00
  6821                          FACING_SOUTH:
  6822  3649  7b                    LD          A,E
  6823  364a  c610                  ADD         A,$10
  6824  364c  5f                    LD          E,A
  6825  364d  cda035                CALL        REDRAW_VIEW
  6826  3650  77                    LD          (HL),A                   ;= $20
  6827  3651  7b                    LD          A,E
  6828  3652  c610                  ADD         A,$10
  6829  3654  5f                    LD          E,A
  6830  3655  cda035                CALL        REDRAW_VIEW
  6831  3658  2c                    INC         L
  6832  3659  77                    LD          (HL),A                   ;= $20
  6833  365a  7b                    LD          A,E
  6834  365b  c610                  ADD         A,$10
  6835  365d  5f                    LD          E,A
  6836  365e  cda035                CALL        REDRAW_VIEW
  6837  3661  2c                    INC         L
  6838  3662  77                    LD          (HL),A                   ;= $20
  6839  3663  7b                    LD          A,E
  6840  3664  d60f                  SUB         0xf
  6841  3666  5f                    LD          E,A
  6842  3667  cd9b37                CALL        CALC_WEST_REDRAW
  6843  366a  7b                    LD          A,E
  6844  366b  c610                  ADD         A,$10
  6845  366d  5f                    LD          E,A
  6846  366e  cda035                CALL        REDRAW_VIEW
  6847  3671  cda735                CALL        REDRAW_NORTH
  6848  3674  7b                    LD          A,E
  6849  3675  d611                  SUB         $11
  6850  3677  5f                    LD          E,A
  6851  3678  1a                    LD          A,(DE)
  6852  3679  e607                  AND         0x7
  6853  367b  77                    LD          (HL),A                   ;= $20
  6854  367c  7b                    LD          A,E
  6855  367d  c60f                  ADD         A,0xf
  6856  367f  5f                    LD          E,A
  6857  3680  cda035                CALL        REDRAW_VIEW
  6858  3683  cda735                CALL        REDRAW_NORTH
  6859  3686  7b                    LD          A,E
  6860  3687  d61e                  SUB         $1e
  6861  3689  5f                    LD          E,A
  6862  368a  1a                    LD          A,(DE)
  6863  368b  e607                  AND         0x7
  6864  368d  77                    LD          (HL),A                   ;= $20
  6865  368e  7b                    LD          A,E
  6866  368f  c610                  ADD         A,$10
  6867  3691  5f                    LD          E,A
  6868  3692  cda035                CALL        REDRAW_VIEW
  6869  3695  cda735                CALL        REDRAW_NORTH
  6870  3698  7b                    LD          A,E
  6871  3699  d611                  SUB         $11
  6872  369b  5f                    LD          E,A
  6873  369c  cd9b37                CALL        CALC_WEST_REDRAW
  6874  369f  7b                    LD          A,E
  6875  36a0  c60f                  ADD         A,0xf
  6876  36a2  5f                    LD          E,A
  6877  36a3  cda035                CALL        REDRAW_VIEW
  6878  36a6  cda735                CALL        REDRAW_NORTH
  6879  36a9  7b                    LD          A,E
  6880  36aa  d61e                  SUB         $1e
  6881  36ac  5f                    LD          E,A
  6882  36ad  cd9b37                CALL        CALC_WEST_REDRAW
  6883  36b0  7b                    LD          A,E
  6884  36b1  c610                  ADD         A,$10
  6885  36b3  5f                    LD          E,A
  6886  36b4  cda035                CALL        REDRAW_VIEW
  6887  36b7  2c                    INC         L
  6888  36b8  77                    LD          (HL),A                   ;= $20
  6889  36b9  7b                    LD          A,E
  6890  36ba  c611                  ADD         A,$11
  6891  36bc  5f                    LD          E,A
  6892  36bd  1a                    LD          A,(DE)
  6893  36be  e607                  AND         0x7
  6894  36c0  2c                    INC         L
  6895  36c1  2c                    INC         L
  6896  36c2  77                    LD          (HL),A                    ;= $20
  6897  36c3  7b                    LD          A,E
  6898  36c4  d622                  SUB         $22
  6899  36c6  5f                    LD          E,A
  6900  36c7  cd9b37                CALL        CALC_WEST_REDRAW
  6901  36ca  7b                    LD          A,E
  6902  36cb  c60f                  ADD         A,0xf
  6903  36cd  5f                    LD          E,A
  6904  36ce  cda035                CALL        REDRAW_VIEW
  6905  36d1  2c                    INC         L
  6906  36d2  77                    LD          (HL),A                    ;= $20
  6907  36d3  7b                    LD          A,E
  6908  36d4  c610                  ADD         A,$10
  6909  36d6  5f                    LD          E,A
  6910  36d7  1a                    LD          A,(DE)
  6911  36d8  e607                  AND         0x7
  6912  36da  2c                    INC         L
  6913  36db  2c                    INC         L
  6914  36dc  77                    LD          (HL),A                    ;= $20
  6915  36dd  7b                    LD          A,E
  6916  36de  d61f                  SUB         $1f
  6917  36e0  5f                    LD          E,A
  6918  36e1  cda035                CALL        REDRAW_VIEW
  6919  36e4  2c                    INC         L
  6920  36e5  77                    LD          (HL),A                    ;= $20
  6921  36e6  1610                  LD          D,$10
  6922  36e8  1eff                  LD          E,$ff
  6923  36ea  ed53603a              LD          (DIR_FACING_FW),DE
  6924  36ee  0610                  LD          B,$10                                  ;RED on BLK
  6925  36f0  21d831                LD          HL,CHRRAM_POINTER_IDX                   ;WAS $31d6
  6926  36f3  11f936                LD          DE,SOUTH_TXT                            ;= "\t",$FF
  6927  36f6  c33533                JP          GFX_DRAW
  6928                          SOUTH_TXT:
  6929  36f9  09ff                  db          "\t",$FF
  6930  36fb  00                    db          $00
  6931  36fc  00                    db          $00
  6932  36fd  00                    db          $00
  6933  36fe  00                    db          $00
  6934                          FACING_EAST:
  6935  36ff  1c                    INC         E
  6936  3700  1a                    LD          A,(DE)
  6937  3701  e607                  AND         0x7
  6938  3703  77                    LD          (HL),A                   ;= $20
  6939  3704  1c                    INC         E
  6940  3705  cd9b37                CALL        CALC_WEST_REDRAW
  6941  3708  1c                    INC         E
  6942  3709  cd9b37                CALL        CALC_WEST_REDRAW
  6943  370c  1d                    DEC         E
  6944  370d  cda035                CALL        REDRAW_VIEW
  6945  3710  2c                    INC         L
  6946  3711  77                    LD          (HL),A                   ;= $20
  6947  3712  7b                    LD          A,E
  6948  3713  d60f                  SUB         0xf
  6949  3715  5f                    LD          E,A
  6950  3716  1a                    LD          A,(DE)
  6951  3717  e607                  AND         0x7
  6952  3719  cda735                CALL        REDRAW_NORTH
  6953  371c  7b                    LD          A,E
  6954  371d  c61f                  ADD         A,$1f
  6955  371f  5f                    LD          E,A
  6956  3720  cda035                CALL        REDRAW_VIEW
  6957  3723  77                    LD          (HL),A                   ;= $20
  6958  3724  1c                    INC         E
  6959  3725  1a                    LD          A,(DE)
  6960  3726  e607                  AND         0x7
  6961  3728  cda735                CALL        REDRAW_NORTH
  6962  372b  7b                    LD          A,E
  6963  372c  d612                  SUB         $12
  6964  372e  5f                    LD          E,A
  6965  372f  cda035                CALL        REDRAW_VIEW
  6966  3732  77                    LD          (HL),A                   ;= $20
  6967  3733  7b                    LD          A,E
  6968  3734  d60f                  SUB         0xf
  6969  3736  5f                    LD          E,A
  6970  3737  1a                    LD          A,(DE)
  6971  3738  e607                  AND         0x7
  6972  373a  cda735                CALL        REDRAW_NORTH
  6973  373d  7b                    LD          A,E
  6974  373e  c61f                  ADD         A,$1f
  6975  3740  5f                    LD          E,A
  6976  3741  cda035                CALL        REDRAW_VIEW
  6977  3744  2c                    INC         L
  6978  3745  77                    LD          (HL),A                   ;= $20
  6979  3746  1c                    INC         E
  6980  3747  1a                    LD          A,(DE)
  6981  3748  e607                  AND         0x7
  6982  374a  cda735                CALL        REDRAW_NORTH
  6983  374d  7b                    LD          A,E
  6984  374e  d612                  SUB         $12
  6985  3750  5f                    LD          E,A
  6986  3751  cda035                CALL        REDRAW_VIEW
  6987  3754  2c                    INC         L
  6988  3755  77                    LD          (HL),A                   ;= $20
  6989  3756  7b                    LD          A,E
  6990  3757  d60f                  SUB         0xf
  6991  3759  5f                    LD          E,A
  6992  375a  cd9b37                CALL        CALC_WEST_REDRAW
  6993  375d  1c                    INC         E
  6994  375e  cda035                CALL        REDRAW_VIEW
  6995  3761  2c                    INC         L
  6996  3762  2c                    INC         L
  6997  3763  77                    LD          (HL),A                    ;= $20
  6998  3764  7b                    LD          A,E
  6999  3765  c61e                  ADD         A,$1e
  7000  3767  5f                    LD          E,A
  7001  3768  cda035                CALL        REDRAW_VIEW
  7002  376b  2c                    INC         L
  7003  376c  77                    LD          (HL),A                    ;= $20
  7004  376d  1c                    INC         E
  7005  376e  cd9b37                CALL        CALC_WEST_REDRAW
  7006  3771  7b                    LD          A,E
  7007  3772  c611                  ADD         A,$11
  7008  3774  5f                    LD          E,A
  7009  3775  cda035                CALL        REDRAW_VIEW
  7010  3778  2c                    INC         L
  7011  3779  2c                    INC         L
  7012  377a  77                    LD          (HL),A                    ;= $20
  7013  377b  7b                    LD          A,E
  7014  377c  d622                  SUB         $22
  7015  377e  5f                    LD          E,A
  7016  377f  cd9b37                CALL        CALC_WEST_REDRAW
  7017  3782  1601                  LD          D,0x1
  7018  3784  1e10                  LD          E,$10
  7019  3786  ed53603a              LD          (DIR_FACING_FW),DE
  7020  378a  0610                  LD          B,$10                                  ;RED on BLK
  7021  378c  21d831                LD          HL,CHRRAM_POINTER_IDX                   ;WAS $31d6
  7022  378f  119537                LD          DE,EAST_TXT                             ;= $06,$FF
  7023  3792  c33533                JP          GFX_DRAW
  7024                          EAST_TXT:
  7025  3795  06ff                  db          $06,$FF
  7026  3797  00                    db          $00
  7027  3798  00                    db          $00
  7028  3799  00                    db          $00
  7029  379a  00                    db          $00
  7030                          CALC_WEST_REDRAW:
  7031  379b  1a                    LD          A,(DE)
  7032  379c  e607                  AND         0x7
  7033  379e  2c                    INC         L
  7034  379f  77                    LD          (HL),A
  7035  37a0  c9                    RET
  7036  37a1  dd21e837              LD          IX,ITEM_F2                              ;= $60
  7037  37a5  ed5b603a              LD          DE,(DIR_FACING_FW)
  7038  37a9  3a793a                LD          A,(PLAYER_MAP_POS)
  7039  37ac  82                    ADD         A,D
  7040  37ad  82                    ADD         A,D
  7041  37ae  cdf337                CALL        ITEM_MAP_CHECK
  7042  37b1  dd7700                LD          (IX+0),A                     ;= $60
  7043  37b4  7c                    LD          A,H
  7044  37b5  92                    SUB         D
  7045  37b6  cdf337                CALL        ITEM_MAP_CHECK
  7046  37b9  dd7701                LD          (IX+1),A                     ;= $60
  7047  37bc  7c                    LD          A,H
  7048  37bd  92                    SUB         D
  7049  37be  cdf337                CALL        ITEM_MAP_CHECK
  7050  37c1  dd7702                LD          (IX+2),A                     ;= $60
  7051  37c4  7c                    LD          A,H
  7052  37c5  82                    ADD         A,D
  7053  37c6  93                    SUB         E
  7054  37c7  cdf337                CALL        ITEM_MAP_CHECK
  7055  37ca  dd7703                LD          (IX+3),A                    ;= $60
  7056  37cd  7c                    LD          A,H
  7057  37ce  83                    ADD         A,E
  7058  37cf  83                    ADD         A,E
  7059  37d0  cdf337                CALL        ITEM_MAP_CHECK
  7060  37d3  dd7704                LD          (IX+4),A                    ;= $60
  7061  37d6  7c                    LD          A,H
  7062  37d7  92                    SUB         D
  7063  37d8  cdf337                CALL        ITEM_MAP_CHECK
  7064  37db  dd7705                LD          (IX+5),A                     ;= $60
  7065  37de  7c                    LD          A,H
  7066  37df  93                    SUB         E
  7067  37e0  93                    SUB         E
  7068  37e1  cdf337                CALL        ITEM_MAP_CHECK
  7069  37e4  dd7706                LD          (IX+6),A                     ;= $60
  7070  37e7  7c                    LD          A,H
  7071  37e8  92                    SUB         D
  7072  37e9  83                    ADD         A,E
  7073  37ea  cdf337                CALL        ITEM_MAP_CHECK
  7074  37ed  dd7707                LD          (IX+7),A                     ;= $60
  7075                          LAB_ram_f7f0:
  7076  37f0  3efe                  LD          A,$fe
  7077  37f2  c9                    RET
  7078                          ITEM_MAP_CHECK:
  7079  37f3  67                    LD          H,A
  7080  37f4  010039                LD          BC,MAP_LADDER_OFFSET
  7081                          LAB_ram_f7f7:
  7082  37f7  0a                    LD          A,(BC)
  7083  37f8  03                    INC         BC
  7084  37f9  03                    INC         BC
  7085  37fa  3c                    INC         A
  7086  37fb  28f3                  JR          Z,LAB_ram_f7f0
  7087  37fd  3d                    DEC         A
  7088  37fe  bc                    CP          H
  7089  37ff  20f6                  JR          NZ,LAB_ram_f7f7
  7090  3801  0d                    DEC         C
  7091  3802  0a                    LD          A,(BC)
  7092  3803  c9                    RET
  7093                          REDRAW_VIEWPORT:
  7094  3804  cda011                CALL        DRAW_BKGD
  7095  3807  01e837                LD          BC,ITEM_F2                              ;BC = ITEM_F2
  7096  380a  11e833                LD          DE,WALL_F0_STATE                        ;DE = wallAheadTemp
  7097  380d  1a                    LD          A,(DE)                   ;A = (wallAheadTemp)
  7098  380e  0f                    RRCA
  7099  380f  d22538                JP          NC,F0_NO_HD                             ;Jump if no hidden door
  7100  3812  08                    EX          AF,AF'
  7101  3813  cdf808                CALL        DRAW_F0_WALL
  7102  3816  08                    EX          AF,AF'
  7103  3817  0f                    RRCA
  7104  3818  d28f39                JP          NC,F0_HD_NO_WALL                        ;Jump if no wall
  7105  381b  0f                    RRCA
  7106  381c  d28f39                JP          NC,F0_HD_NO_WALL                        ;Jump if door closed
  7107                          F0_NO_HD_WALL_OPEN:
  7108  381f  cd1109                CALL        DRAW_WALL_F0_AND_OPEN_DOOR
  7109  3822  c38639                JP          LAB_ram_f986
  7110                          F0_NO_HD:
  7111  3825  0f                    RRCA
  7112  3826  d23338                JP          NC,F0_NO_HD_NO_WALL                     ;Jump if no wall
  7113  3829  0f                    RRCA
  7114  382a  da1f38                JP          C,F0_NO_HD_WALL_OPEN                    ;Jump if door open
  7115  382d  cd0309                CALL        DRAW_F0_WALL_AND_CLOSED_DOOR
  7116  3830  c38f39                JP          F0_HD_NO_WALL
  7117                          F0_NO_HD_NO_WALL:
  7118  3833  13                    INC         DE
  7119  3834  1a                    LD          A,(DE)                   ;= $20
  7120  3835  0f                    RRCA
  7121  3836  d24c38                JP          NC,F1_NO_HD                             ;Jump if no hidden door
  7122  3839  08                    EX          AF,AF'
  7123  383a  cd1809                CALL        DRAW_WALL_F1
  7124  383d  08                    EX          AF,AF'
  7125  383e  0f                    RRCA
  7126  383f  d2c038                JP          NC,F1_HD_NO_WALL                        ;Jump if no wall
  7127  3842  0f                    RRCA
  7128  3843  d2c038                JP          NC,F1_HD_NO_WALL                        ;Jump if door closed
  7129                          F1_NO_HD_WALL_OPEN:
  7130  3846  cd3b09                CALL        DRAW_WALL_F1_AND_OPEN_DOOR
  7131  3849  c3b738                JP          LAB_ram_f8b7
  7132                          F1_NO_HD:
  7133  384c  0f                    RRCA
  7134  384d  d25a38                JP          NC,LAB_ram_f85a
  7135  3850  0f                    RRCA
  7136  3851  da4638                JP          C,F1_NO_HD_WALL_OPEN
  7137  3854  cd2d09                CALL        DRAW_WALL_F1_AND_CLOSED_DOOR
  7138  3857  c3c038                JP          F1_HD_NO_WALL
  7139                          LAB_ram_f85a:
  7140  385a  13                    INC         DE
  7141  385b  1a                    LD          A,(DE)                   ;= $20
  7142  385c  0f                    RRCA
  7143  385d  d26638                JP          NC,CHECK_WALL_F2
  7144                          F2_WALL:
  7145  3860  cd4209                CALL        DRAW_WALL_F2
  7146  3863  c36d38                JP          LAB_ram_f86d
  7147                          CHECK_WALL_F2:
  7148  3866  0f                    RRCA
  7149  3867  da6038                JP          C,F2_WALL
  7150  386a  cd4d09                CALL        DRAW_DOOR_F2_OPEN
  7151                          LAB_ram_f86d:
  7152  386d  11eb33                LD          DE,WALL_F3_STATE                        ;= $20
  7153  3870  1a                    LD          A,(DE)                   ;= $20
  7154  3871  0f                    RRCA
  7155  3872  d27b38                JP          NC,LAB_ram_f87b
  7156                          LAB_ram_f875:
  7157  3875  cdee0a                CALL        DRAW_WALL_FL2_EMPTY
  7158  3878  c39238                JP          LAB_ram_f892
  7159                          LAB_ram_f87b:
  7160  387b  0f                    RRCA
  7161  387c  da7538                JP          C,LAB_ram_f875
  7162  387f  13                    INC         DE
  7163  3880  1a                    LD          A,(DE)                    ;= $20
  7164  3881  0f                    RRCA
  7165  3882  d28b38                JP          NC,LAB_ram_f88b
  7166                          LAB_ram_f885:
  7167  3885  cd390b                CALL        DRAW_WALL_L2_C
  7168  3888  c39238                JP          LAB_ram_f892
  7169                          LAB_ram_f88b:
  7170  388b  0f                    RRCA
  7171  388c  da8538                JP          C,LAB_ram_f885
  7172  388f  cd440b                CALL        DRAW_WALL_L2_C_EMPTY
  7173                          LAB_ram_f892:
  7174  3892  11ed33                LD          DE,DAT_ram_33ed                         ;= $20
  7175  3895  1a                    LD          A,(DE)                    ;= $20
  7176  3896  0f                    RRCA
  7177  3897  d2a038                JP          NC,LAB_ram_f8a0
  7178                          LAB_ram_f89a:
  7179  389a  cde30c                CALL        DRAW_WALL_FR2
  7180  389d  c3b738                JP          LAB_ram_f8b7
  7181                          LAB_ram_f8a0:
  7182  38a0  0f                    RRCA
  7183  38a1  da9a38                JP          C,LAB_ram_f89a
  7184  38a4  13                    INC         DE
  7185  38a5  1a                    LD          A,(DE)                    ;= $20
  7186  38a6  0f                    RRCA
  7187  38a7  d2b038                JP          NC,LAB_ram_f8b0
  7188                          LAB_ram_f8aa:
  7189  38aa  cd210d                CALL        SUB_ram_cd21
  7190  38ad  c3b738                JP          LAB_ram_f8b7
  7191                          LAB_ram_f8b0:
  7192  38b0  0f                    RRCA
  7193  38b1  daaa38                JP          C,LAB_ram_f8aa
  7194  38b4  cd2c0d                CALL        SUB_ram_cd2c
  7195                          LAB_ram_f8b7:
  7196  38b7  3ae837                LD          A,(ITEM_F2)                             ;= $60
  7197  38ba  018a04                LD          BC,$48a
  7198  38bd  cdac2c                CALL        CHK_ITEM
  7199                          F1_HD_NO_WALL:
  7200  38c0  11ef33                LD          DE,DAT_ram_33ef                         ;= $20
  7201  38c3  1a                    LD          A,(DE)                    ;= $20
  7202  38c4  0f                    RRCA
  7203  38c5  d2db38                JP          NC,LAB_ram_f8db
  7204  38c8  08                    EX          AF,AF'
  7205  38c9  cd400a                CALL        DRAW_L1_WALL
  7206  38cc  08                    EX          AF,AF'
  7207  38cd  0f                    RRCA
  7208  38ce  d22339                JP          NC,LAB_ram_f923
  7209  38d1  0f                    RRCA
  7210  38d2  d22339                JP          NC,LAB_ram_f923
  7211                          LAB_ram_f8d5:
  7212  38d5  cd830a                CALL        DRAW_FL1_DOOR
  7213  38d8  c32339                JP          LAB_ram_f923
  7214                          LAB_ram_f8db:
  7215  38db  0f                    RRCA
  7216  38dc  d2e938                JP          NC,LAB_ram_f8e9
  7217  38df  0f                    RRCA
  7218  38e0  dad538                JP          C,LAB_ram_f8d5
  7219  38e3  cd900a                CALL        DRAW_L1
  7220  38e6  c32339                JP          LAB_ram_f923
  7221                          LAB_ram_f8e9:
  7222  38e9  1c                    INC         E
  7223  38ea  1a                    LD          A,(DE)                    ;= $20
  7224  38eb  0f                    RRCA
  7225  38ec  d20239                JP          NC,LAB_ram_f902
  7226  38ef  08                    EX          AF,AF'
  7227  38f0  cdb00a                CALL        SUB_ram_cab0
  7228  38f3  08                    EX          AF,AF'
  7229  38f4  0f                    RRCA
  7230  38f5  d22339                JP          NC,LAB_ram_f923
  7231  38f8  0f                    RRCA
  7232  38f9  d22339                JP          NC,LAB_ram_f923
  7233                          LAB_ram_f8fc:
  7234  38fc  cdc50a                CALL        SUB_ram_cac5
  7235  38ff  c32339                JP          LAB_ram_f923
  7236                          LAB_ram_f902:
  7237  3902  0f                    RRCA
  7238  3903  d21039                JP          NC,LAB_ram_f910
  7239  3906  0f                    RRCA
  7240  3907  dafc38                JP          C,LAB_ram_f8fc
  7241  390a  cdcb0a                CALL        DRAW_L1_DOOR_CLOSED
  7242  390d  c32339                JP          LAB_ram_f923
  7243                          LAB_ram_f910:
  7244  3910  1c                    INC         E
  7245  3911  1a                    LD          A,(DE)                    ;= $20
  7246  3912  0f                    RRCA
  7247  3913  d21c39                JP          NC,LAB_ram_f91c
  7248                          LAB_ram_f916:
  7249  3916  cdbb17                CALL        DRAW_WALL_FL2_NEW
  7250  3919  c32339                JP          LAB_ram_f923
  7251                          LAB_ram_f91c:
  7252  391c  0f                    RRCA
  7253  391d  da1639                JP          C,LAB_ram_f916
  7254  3920  cdee0a                CALL        DRAW_WALL_FL2_EMPTY
  7255                          LAB_ram_f923:
  7256  3923  11f233                LD          DE,DAT_ram_33f2                         ;= $20
  7257  3926  1a                    LD          A,(DE)                    ;= $20
  7258  3927  0f                    RRCA
  7259  3928  d23e39                JP          NC,LAB_ram_f93e
  7260  392b  08                    EX          AF,AF'
  7261  392c  cd2b0c                CALL        DRAW_WALL_FR1
  7262  392f  08                    EX          AF,AF'
  7263  3930  0f                    RRCA
  7264  3931  d28639                JP          NC,LAB_ram_f986
  7265  3934  0f                    RRCA
  7266  3935  d28639                JP          NC,LAB_ram_f986
  7267                          LAB_ram_f938:
  7268  3938  cd6d0c                CALL        SUB_ram_cc6d
  7269  393b  c38639                JP          LAB_ram_f986
  7270                          LAB_ram_f93e:
  7271  393e  0f                    RRCA
  7272  393f  d24c39                JP          NC,LAB_ram_f94c
  7273  3942  0f                    RRCA
  7274  3943  da3839                JP          C,LAB_ram_f938
  7275  3946  cd7a0c                CALL        SUB_ram_cc7a
  7276  3949  c38639                JP          LAB_ram_f986
  7277                          LAB_ram_f94c:
  7278  394c  1c                    INC         E
  7279  394d  1a                    LD          A,(DE)                    ;= $20
  7280  394e  0f                    RRCA
  7281  394f  d26539                JP          NC,LAB_ram_f965
  7282  3952  08                    EX          AF,AF'
  7283  3953  cd9a0c                CALL        SUB_ram_cc9a
  7284  3956  08                    EX          AF,AF'
  7285  3957  0f                    RRCA
  7286  3958  d28639                JP          NC,LAB_ram_f986
  7287  395b  0f                    RRCA
  7288  395c  d28639                JP          NC,LAB_ram_f986
  7289                          LAB_ram_f95f:
  7290  395f  cdaf0c                CALL        SUB_ram_ccaf
  7291  3962  c38639                JP          LAB_ram_f986
  7292                          LAB_ram_f965:
  7293  3965  0f                    RRCA
  7294  3966  d27339                JP          NC,LAB_ram_f973
  7295  3969  0f                    RRCA
  7296  396a  da5f39                JP          C,LAB_ram_f95f
  7297  396d  cdb50c                CALL        SUB_ram_ccb5
  7298  3970  c38639                JP          LAB_ram_f986
  7299                          LAB_ram_f973:
  7300  3973  1c                    INC         E
  7301  3974  1a                    LD          A,(DE)                    ;= $20
  7302  3975  0f                    RRCA
  7303  3976  d27f39                JP          NC,LAB_ram_f97f
  7304                          LAB_ram_f979:
  7305  3979  cdc30c                CALL        SUB_ram_ccc3
  7306  397c  c38639                JP          LAB_ram_f986
  7307                          LAB_ram_f97f:
  7308  397f  0f                    RRCA
  7309  3980  da7939                JP          C,LAB_ram_f979
  7310  3983  cdd80c                CALL        DRAW_WALL_FR2_EMPTY
  7311                          LAB_ram_f986:
  7312  3986  3ae937                LD          A,(ITEM_F1)                             ;= $60
  7313  3989  018a02                LD          BC,$28a
  7314  398c  cdac2c                CALL        CHK_ITEM
  7315                          F0_HD_NO_WALL:
  7316  398f  11f533                LD          DE,DAT_ram_33f5                         ;= $20
  7317  3992  1a                    LD          A,(DE)                    ;= $20
  7318  3993  0f                    RRCA
  7319  3994  d2aa39                JP          NC,LAB_ram_f9aa
  7320  3997  08                    EX          AF,AF'
  7321  3998  cd5809                CALL        DRAW_WALL_FL0
  7322  399b  08                    EX          AF,AF'
  7323  399c  0f                    RRCA
  7324  399d  d2193a                JP          NC,LAB_ram_fa19
  7325  39a0  0f                    RRCA
  7326  39a1  d2193a                JP          NC,LAB_ram_fa19
  7327                          LAB_ram_f9a4:
  7328  39a4  cd8c09                CALL        DRAW_DOOR_FLO
  7329  39a7  c3193a                JP          LAB_ram_fa19
  7330                          LAB_ram_f9aa:
  7331  39aa  0f                    RRCA
  7332  39ab  d2b839                JP          NC,LAB_ram_f9b8
  7333  39ae  0f                    RRCA
  7334  39af  daa439                JP          C,LAB_ram_f9a4
  7335  39b2  cd9609                CALL        SUB_ram_c996
  7336  39b5  c3193a                JP          LAB_ram_fa19
  7337                          LAB_ram_f9b8:
  7338  39b8  1c                    INC         E
  7339  39b9  1a                    LD          A,(DE)                    ;= $20
  7340  39ba  0f                    RRCA
  7341  39bb  d2c439                JP          NC,LAB_ram_f9c4
  7342                          LAB_ram_f9be:
  7343  39be  cdc509                CALL        SUB_ram_c9c5
  7344  39c1  c3193a                JP          LAB_ram_fa19
  7345                          LAB_ram_f9c4:
  7346  39c4  0f                    RRCA
  7347  39c5  dabe39                JP          C,LAB_ram_f9be
  7348  39c8  1c                    INC         E
  7349  39c9  1a                    LD          A,(DE)                    ;= $20
  7350  39ca  0f                    RRCA
  7351  39cb  d2f039                JP          NC,LAB_ram_f9f0
  7352  39ce  08                    EX          AF,AF'
  7353  39cf  cdd009                CALL        SUB_ram_c9d0
  7354  39d2  cde739                CALL        SUB_ram_f9e7
  7355  39d5  08                    EX          AF,AF'
  7356  39d6  0f                    RRCA
  7357  39d7  d2193a                JP          NC,LAB_ram_fa19
  7358  39da  0f                    RRCA
  7359  39db  d2193a                JP          NC,LAB_ram_fa19
  7360                          LAB_ram_f9de:
  7361  39de  cdf309                CALL        SUB_ram_c9f3
  7362  39e1  cde739                CALL        SUB_ram_f9e7
  7363  39e4  c3193a                JP          LAB_ram_fa19
  7364                          SUB_ram_f9e7:
  7365  39e7  3aeb37                LD          A,(ITEM_FL1)                            ;= $60
  7366  39ea  01d004                LD          BC,$4d0
  7367  39ed  c3ac2c                JP          CHK_ITEM
  7368                          LAB_ram_f9f0:
  7369  39f0  0f                    RRCA
  7370  39f1  d2013a                JP          NC,LAB_ram_fa01
  7371  39f4  0f                    RRCA
  7372  39f5  dade39                JP          C,LAB_ram_f9de
  7373  39f8  cde509                CALL        SUB_ram_c9e5
  7374  39fb  cde739                CALL        SUB_ram_f9e7
  7375  39fe  c3193a                JP          LAB_ram_fa19
  7376                          LAB_ram_fa01:
  7377  3a01  1c                    INC         E
  7378  3a02  0f                    RRCA
  7379  3a03  d20f3a                JP          NC,LAB_ram_fa0f
  7380                          LAB_ram_fa06:
  7381  3a06  cdf909                CALL        SUB_ram_c9f9
  7382  3a09  cde739                CALL        SUB_ram_f9e7
  7383  3a0c  c3193a                JP          LAB_ram_fa19
  7384                          LAB_ram_fa0f:
  7385  3a0f  0f                    RRCA
  7386  3a10  da063a                JP          C,LAB_ram_fa06
  7387  3a13  cda517                CALL        DRAW_WALL_FL22_EMPTY
  7388  3a16  cde739                CALL        SUB_ram_f9e7
  7389                          LAB_ram_fa19:
  7390  3a19  11f933                LD          DE,DAT_ram_33f9                         ;= $20
  7391  3a1c  1a                    LD          A,(DE)                    ;= $20
  7392  3a1d  0f                    RRCA
  7393  3a1e  d2343a                JP          NC,LAB_ram_fa34
  7394  3a21  08                    EX          AF,AF'
  7395  3a22  cd4f0b                CALL        SUB_ram_cb4f
  7396  3a25  08                    EX          AF,AF'
  7397  3a26  0f                    RRCA
  7398  3a27  d2a33a                JP          NC,LAB_ram_faa3
  7399  3a2a  0f                    RRCA
  7400  3a2b  d2a33a                JP          NC,LAB_ram_faa3
  7401                          LAB_ram_fa2e:
  7402  3a2e  cd740b                CALL        DRAW_FRO_DOOR
  7403  3a31  c3a33a                JP          LAB_ram_faa3
  7404                          LAB_ram_fa34:
  7405  3a34  0f                    RRCA
  7406  3a35  d2423a                JP          NC,LAB_ram_fa42
  7407  3a38  0f                    RRCA
  7408  3a39  da2e3a                JP          C,LAB_ram_fa2e
  7409  3a3c  cd7e0b                CALL        SUB_ram_cb7e
  7410  3a3f  c3a33a                JP          LAB_ram_faa3
  7411                          LAB_ram_fa42:
  7412  3a42  1c                    INC         E
  7413  3a43  1a                    LD          A,(DE)                    ;= $20
  7414  3a44  0f                    RRCA
  7415  3a45  d2573a                JP          NC,LAB_ram_fa57
  7416                          LAB_ram_fa48:
  7417  3a48  cdae0b                CALL        SUB_ram_cbae
  7418  3a4b  c3a33a                JP          LAB_ram_faa3
  7419                          SUB_ram_fa4e:
  7420  3a4e  3aec37                LD          A,(ITEM_FR1)                            ;= $60
  7421  3a51  01e404                LD          BC,$4e4
  7422  3a54  c3ac2c                JP          CHK_ITEM
  7423                          LAB_ram_fa57:
  7424  3a57  0f                    RRCA
  7425  3a58  da483a                JP          C,LAB_ram_fa48
  7426  3a5b  1c                    INC         E
  7427  3a5c  1a                    LD          A,(DE)                    ;= $20
  7428  3a5d  0f                    RRCA
  7429  3a5e  d27a3a                JP          NC,LAB_ram_fa7a
  7430  3a61  08                    EX          AF,AF'
  7431  3a62  cdb90b                CALL        SUB_ram_cbb9
  7432  3a65  cd4e3a                CALL        SUB_ram_fa4e
  7433  3a68  08                    EX          AF,AF'
  7434  3a69  0f                    RRCA
  7435  3a6a  d2a33a                JP          NC,LAB_ram_faa3
  7436  3a6d  0f                    RRCA
  7437  3a6e  d2a33a                JP          NC,LAB_ram_faa3
  7438                          LAB_ram_fa71:
  7439  3a71  cdce0b                CALL        SUB_ram_cbce
  7440  3a74  cd4e3a                CALL        SUB_ram_fa4e
  7441  3a77  c3a33a                JP          LAB_ram_faa3
  7442                          LAB_ram_fa7a:
  7443  3a7a  0f                    RRCA
  7444  3a7b  d28b3a                JP          NC,LAB_ram_fa8b
  7445  3a7e  0f                    RRCA
  7446  3a7f  da713a                JP          C,LAB_ram_fa71
  7447  3a82  cdd40b                CALL        SUB_ram_cbd4
  7448  3a85  cd4e3a                CALL        SUB_ram_fa4e
  7449  3a88  c3a33a                JP          LAB_ram_faa3
  7450                          LAB_ram_fa8b:
  7451  3a8b  1c                    INC         E
  7452  3a8c  0f                    RRCA
  7453  3a8d  d2993a                JP          NC,LAB_ram_fa99
  7454                          LAB_ram_fa90:
  7455  3a90  cde20b                CALL        SUB_ram_cbe2
  7456  3a93  cd4e3a                CALL        SUB_ram_fa4e
  7457  3a96  c3a33a                JP          LAB_ram_faa3
  7458                          LAB_ram_fa99:
  7459  3a99  0f                    RRCA
  7460  3a9a  da903a                JP          C,LAB_ram_fa90
  7461  3a9d  cd200c                CALL        DRAW_WALL_FR222_EMPTY
  7462  3aa0  cd4e3a                CALL        SUB_ram_fa4e
  7463                          LAB_ram_faa3:
  7464  3aa3  3aea37                LD          A,(ITEM_F0)                             ;= $60
  7465  3aa6  018a00                LD          BC,$8a
  7466  3aa9  c3ac2c                JP          CHK_ITEM
  7467                          MAKE_RANDOM_BYTE:
  7468  3aac  c5                    PUSH        BC
  7469  3aad  e5                    PUSH        HL
  7470  3aae  0605                  LD          B,0x5                                   ;Run data randomizer 5x
  7471  3ab0  2a913a                LD          HL,(RNDHOLD_AA)
  7472                          RANDOM_BYTE_LOOP:
  7473  3ab3  cb25                  SLA         L                                       ;L x 2
  7474  3ab5  cb14                  RL          H
  7475  3ab7  3808                  JR          C,FINISH_BYTE_LOOP
  7476  3ab9  3e87                  LD          A,$87
  7477  3abb  ad                    XOR         L
  7478  3abc  6f                    LD          L,A
  7479  3abd  3e1d                  LD          A,$1d
  7480  3abf  ac                    XOR         H
  7481  3ac0  67                    LD          H,A
  7482                          FINISH_BYTE_LOOP:
  7483  3ac1  10f0                  DJNZ        RANDOM_BYTE_LOOP
  7484  3ac3  22913a                LD          (RNDHOLD_AA),HL
  7485  3ac6  7c                    LD          A,H
  7486  3ac7  e1                    POP         HL
  7487  3ac8  c1                    POP         BC
  7488  3ac9  c9                    RET
  7489                          UPDATE_SCR_SAVER_TIMER:
  7490  3aca  c5                    PUSH        BC
  7491  3acb  e5                    PUSH        HL
  7492  3acc  2a9c3a                LD          HL,(TIMER_E)
  7493  3acf  44                    LD          B,H
  7494  3ad0  4d                    LD          C,L
  7495  3ad1  cb21                  SLA         C
  7496  3ad3  cb10                  RL          B
  7497  3ad5  cb21                  SLA         C
  7498  3ad7  cb10                  RL          B
  7499  3ad9  09                    ADD         HL,BC
  7500  3ada  7c                    LD          A,H
  7501  3adb  ad                    XOR         L
  7502  3adc  32883a                LD          (TIMER_D),A
  7503  3adf  44                    LD          B,H
  7504  3ae0  4d                    LD          C,L
  7505  3ae1  cb21                  SLA         C
  7506  3ae3  cb10                  RL          B
  7507  3ae5  cb21                  SLA         C
  7508  3ae7  cb10                  RL          B
  7509  3ae9  09                    ADD         HL,BC
  7510  3aea  011300                LD          BC,$13
  7511  3aed  09                    ADD         HL,BC
  7512  3aee  229c3a                LD          (TIMER_E),HL
  7513  3af1  e1                    POP         HL
  7514  3af2  c1                    POP         BC
  7515  3af3  c9                    RET
  7516                          MINOTAUR_DEAD:
  7517  3af4  cda011                CALL        DRAW_BKGD
  7518  3af7  215030                LD          HL,DAT_ram_3050                         ;= $20
  7519  3afa  115b11                LD          DE,THE_END_PART_A                       ;WAS LD DE, $c25d
  7520  3afd  0610                  LD          B,$10                                  ;RED on BLK
  7521  3aff  cd3533                CALL        GFX_DRAW
  7522  3b02  21a030                LD          HL,DAT_ram_30a0                         ;= $20
  7523  3b05  cd3533                CALL        GFX_DRAW
  7524  3b08  cdac3a                CALL        MAKE_RANDOM_BYTE
  7525  3b0b  e603                  AND         0x3
  7526  3b0d  c60a                  ADD         A,0xa
  7527  3b0f  47                    LD          B,A
  7528  3b10  00                    db          $00
  7529  3b11  00                    db          $00
  7530  3b12  00                    db          $00
  7531  3b13  00                    db          $00
  7532  3b14  00                    db          $00
  7533  3b15  00                    db          $00
  7534  3b16  00                    db          $00
  7535  3b17  00                    db          $00
  7536  3b18  00                    db          $00
  7537  3b19  3a6c3a                LD          A,(INPUT_HOLDER)
  7538  3b1c  07                    RLCA
  7539  3b1d  07                    RLCA
  7540  3b1e  07                    RLCA
  7541  3b1f  07                    RLCA
  7542  3b20  47                    LD          B,A
  7543  3b21  af                    XOR         A
  7544  3b22  326c3a                LD          (INPUT_HOLDER),A
  7545  3b25  11ff05                LD          DE,MINOTAUR                             ;= $04,$04,$04,$04
  7546  3b28  21da32                LD          HL,DAT_ram_32da                         ;= $20
  7547  3b2b  cd3533                CALL        GFX_DRAW
  7548  3b2e  cdbc2e                CALL        TOTAL_HEAL
  7549  3b31  cd5d3d                CALL        REDRAW_STATS
  7550  3b34  0602                  LD          B,0x2                                   ;Was LD B,0x6
  7551                          MINOTAUR_DEAD_SOUND_LOOP:
  7552  3b36  d9                    EXX
  7553  3b37  cd5f0d                CALL        SUB_ram_cd5f
  7554  3b3a  cd7b0d                CALL        END_OF_GAME_SOUND
  7555  3b3d  d9                    EXX
  7556  3b3e  10f6                  DJNZ        MINOTAUR_DEAD_SOUND_LOOP
  7557  3b40  c3b72a                JP          SCREEN_SAVER_FULL_SCREEN
  7558  3b43  00                    db          $00
  7559  3b44  00                    db          $00
  7560  3b45  00                    db          $00
  7561  3b46  00                    db          $00
  7562  3b47  00                    db          $00
  7563  3b48  00                    db          $00
  7564  3b49  00                    db          $00
  7565  3b4a  00                    db          $00
  7566  3b4b  00                    db          $00
  7567  3b4c  00                    db          $00
  7568  3b4d  00                    db          $00
  7569  3b4e  00                    db          $00
  7570  3b4f  00                    db          $00
  7571  3b50  00                    db          $00
  7572  3b51  00                    db          $00
  7573  3b52  00                    db          $00
  7574  3b53  00                    db          $00
  7575  3b54  00                    db          $00
  7576  3b55  00                    db          $00
  7577  3b56  00                    db          $00
  7578  3b57  00                    db          $00
  7579  3b58  00                    db          $00
  7580  3b59  00                    db          $00
  7581  3b5a  00                    db          $00
  7582  3b5b  00                    db          $00
  7583  3b5c  00                    db          $00
  7584  3b5d  00                    db          $00
  7585  3b5e  00                    db          $00
  7586  3b5f  00                    db          $00
  7587  3b60  00                    db          $00
  7588  3b61  00                    db          $00
  7589  3b62  00                    db          $00
  7590  3b63  00                    db          $00
  7591  3b64  00                    db          $00
  7592  3b65  00                    db          $00
  7593  3b66  00                    db          $00
  7594  3b67  00                    db          $00
  7595  3b68  00                    db          $00
  7596  3b69  00                    db          $00
  7597  3b6a  00                    db          $00
  7598                          DO_REST:
  7599  3b6b  3a783a                LD          A,(LAST_ITEM_HELD)                   ;Load food inventory into A
  7600  3b6e  a7                    AND         A
  7601  3b6f  c23022                JP          NZ,NO_ACTION_TAKEN                      ;If food is empty, do nothing
  7602                          CHK_NEEDS_HEALING:
  7603  3b72  2a953a                LD          HL,(PLAYER_PHYS_HEALTH_MAX)             ;HL = max PHYS health
  7604  3b75  ed5b933a              LD          DE,(PLAYER_PHYS_HEALTH)                 ;DE = current PHYS health
  7605  3b79  cd3024                CALL        RECALC_PHYS_HEALTH
  7606  3b7c  b5                    OR          L
  7607  3b7d  200d                  JR          NZ,HEAL_PLAYER_PHYS_HEALTH
  7608  3b7f  3a983a                LD          A,(PLAYER_SPRT_HEALTH_MAX)
  7609  3b82  4f                    LD          C,A
  7610  3b83  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  7611  3b86  b9                    CP          C
  7612  3b87  ca9c2a                JP          Z,INPUT_DEBOUNCE
  7613  3b8a  182a                  JR          HEAL_PLAYER_SPRT_HEALTH
  7614                          HEAL_PLAYER_PHYS_HEALTH:
  7615  3b8c  2aa93a                LD          HL,(BYTE_ram_3aa9)
  7616  3b8f  110100                LD          DE,0x1
  7617  3b92  cd3024                CALL        RECALC_PHYS_HEALTH
  7618  3b95  da9c2a                JP          C,INPUT_DEBOUNCE
  7619  3b98  22a93a                LD          (BYTE_ram_3aa9),HL
  7620  3b9b  21ab3a                LD          HL,FOOD_INV
  7621  3b9e  35                    DEC         (HL)
  7622  3b9f  2a933a                LD          HL,(PLAYER_PHYS_HEALTH)
  7623  3ba2  cd2724                CALL        SUB_ram_e427
  7624  3ba5  22933a                LD          (PLAYER_PHYS_HEALTH),HL
  7625  3ba8  cd5d3d                CALL        REDRAW_STATS
  7626  3bab  3a983a                LD          A,(PLAYER_SPRT_HEALTH_MAX)
  7627  3bae  4f                    LD          C,A
  7628  3baf  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  7629  3bb2  b9                    CP          C
  7630  3bb3  ca723b                JP          Z,CHK_NEEDS_HEALING
  7631                          HEAL_PLAYER_SPRT_HEALTH:
  7632  3bb6  2aa93a                LD          HL,(BYTE_ram_3aa9)
  7633  3bb9  110100                LD          DE,0x1
  7634  3bbc  cd3024                CALL        RECALC_PHYS_HEALTH
  7635  3bbf  da9c2a                JP          C,INPUT_DEBOUNCE
  7636  3bc2  22a93a                LD          (BYTE_ram_3aa9),HL
  7637  3bc5  21ab3a                LD          HL,FOOD_INV
  7638  3bc8  35                    DEC         (HL)
  7639  3bc9  3a973a                LD          A,(PLAYER_SPRT_HEALTH)
  7640  3bcc  c601                  ADD         A,0x1
  7641  3bce  27                    DAA
  7642  3bcf  32973a                LD          (PLAYER_SPRT_HEALTH),A
  7643  3bd2  cd5d3d                CALL        REDRAW_STATS
  7644  3bd5  189b                  JR          CHK_NEEDS_HEALING
  7645  3bd7  00                    db          $00
  7646  3bd8  00                    db          $00
  7647  3bd9  00                    db          $00
  7648  3bda  00                    db          $00
  7649  3bdb  00                    db          $00
  7650  3bdc  00                    db          $00
  7651  3bdd  00                    db          $00
  7652  3bde  00                    db          $00
  7653  3bdf  00                    db          $00
  7654                          KEY_COMPARE:
  7655  3be0  3a663a                LD          A,(RAM_AE)
  7656  3be3  fe31                  CP          $31                                    ;Compare to "1" db?
  7657  3be5  c29f2a                JP          NZ,WAIT_FOR_INPUT
  7658                          KEY_COL_0:
  7659  3be8  21f637                LD          HL,KEY_INPUT_COL0                       ;= $60
  7660  3beb  7e                    LD          A,(HL)                  ;A = Key Column 0
  7661  3bec  fefe                  CP          $fe                                    ;If Key Row = 0 "="
  7662  3bee  ca3022                JP          Z,NO_ACTION_TAKEN
  7663  3bf1  fefd                  CP          $fd                                    ;If Key Row = 1 "BKSP"
  7664  3bf3  ca3022                JP          Z,NO_ACTION_TAKEN
  7665  3bf6  fefb                  CP          $fb                                    ;If Key Row = 2 ":"
  7666  3bf8  ca3022                JP          Z,NO_ACTION_TAKEN
  7667  3bfb  fef7                  CP          $f7                                    ;If Key Row = 3 "RET"
  7668  3bfd  ca3022                JP          Z,NO_ACTION_TAKEN
  7669  3c00  feef                  CP          $ef                                    ;If Key Row = 4 ";"
  7670  3c02  ca322e                JP          Z,DO_GLANCE_RIGHT
  7671  3c05  fedf                  CP          $df                                    ;If Key Row = 5 "."
  7672  3c07  ca182e                JP          Z,DO_TURN_RIGHT
  7673                          KEY_COL_1:
  7674  3c0a  2c                    INC         L
  7675  3c0b  7e                    LD          A,(HL)                  ;A = Key Column 1
  7676  3c0c  fefe                  CP          $fe                                    ;If Key Row = 0 "-"
  7677  3c0e  ca3022                JP          Z,NO_ACTION_TAKEN
  7678  3c11  fefd                  CP          $fd                                    ;If Key Row = 1 "/"
  7679  3c13  ca3022                JP          Z,NO_ACTION_TAKEN
  7680  3c16  fefb                  CP          $fb                                    ;If Key Row = 2 "0"
  7681  3c18  ca3022                JP          Z,NO_ACTION_TAKEN
  7682  3c1b  fef7                  CP          $f7                                    ;If Key Row = 3 "P"
  7683  3c1d  ca3022                JP          Z,NO_ACTION_TAKEN
  7684  3c20  feef                  CP          $ef                                    ;If Key Row = 4 "L"
  7685  3c22  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  7686  3c25  fedf                  CP          $df                                    ;If Key Row = 5 ","
  7687  3c27  cad021                JP          Z,DO_JUMP_BACK
  7688                          KEY_COL_2:
  7689  3c2a  2c                    INC         L
  7690  3c2b  7e                    LD          A,(HL)                  ;A = Key Column 2
  7691  3c2c  fefe                  CP          $fe                                    ;If Key Row = 0 "9"
  7692  3c2e  ca3022                JP          Z,NO_ACTION_TAKEN
  7693  3c31  fefd                  CP          $fd                                    ;If Key Row = 1 "O"
  7694  3c33  ca3022                JP          Z,NO_ACTION_TAKEN
  7695  3c36  fefb                  CP          $fb                                    ;If Key Row = 2 "K"
  7696  3c38  ca9e21                JP          Z,DO_MOVE_FW_CHK_WALLS
  7697  3c3b  fef7                  CP          $f7                                    ;If Key Row = 3 "M"
  7698  3c3d  ca002e                JP          Z,DO_TURN_LEFT
  7699  3c40  feef                  CP          $ef                                    ;If Key Row = 4 "N"
  7700  3c42  ca5e2e                JP          Z,DO_USE_ATTACK
  7701  3c45  fedf                  CP          $df                                    ;If Key Row = 5 "J"
  7702  3c47  ca482e                JP          Z,DO_GLANCE_LEFT
  7703                          KEY_COL_3:
  7704  3c4a  2c                    INC         L
  7705  3c4b  7e                    LD          A,(HL)                  ;A = Key Column 3
  7706  3c4c  fefe                  CP          $fe                                    ;If Key Row = 0 "8"
  7707  3c4e  ca3022                JP          Z,NO_ACTION_TAKEN
  7708  3c51  fefd                  CP          $fd                                    ;If Key Row = 1 "I"
  7709  3c53  ca3022                JP          Z,NO_ACTION_TAKEN
  7710  3c56  fefb                  CP          $fb                                    ;If Key Row = 2 "7"
  7711  3c58  ca3022                JP          Z,NO_ACTION_TAKEN
  7712  3c5b  fef7                  CP          $f7                                    ;If Key Row = 3 "U"
  7713  3c5d  ca3022                JP          Z,NO_ACTION_TAKEN
  7714  3c60  feef                  CP          $ef                                    ;If Key Row = 4 "H"
  7715  3c62  cadb2c                JP          Z,DO_OPEN_CLOSE
  7716  3c65  fedf                  CP          $df                                    ;If Key Row = 5 "B"
  7717  3c67  ca3022                JP          Z,NO_ACTION_TAKEN
  7718                          KEY_COL_4:
  7719  3c6a  2c                    INC         L
  7720  3c6b  7e                    LD          A,(HL)                  ;A = Key Column 4
  7721  3c6c  fefe                  CP          $fe                                    ;If Key Row = 0 "6"
  7722  3c6e  ca3022                JP          Z,NO_ACTION_TAKEN
  7723  3c71  fefd                  CP          $fd                                    ;If Key Row = 1 "Y"
  7724  3c73  ca4d22                JP          Z,USE_MAP
  7725  3c76  fefb                  CP          $fb                                    ;If Key Row = 2 "G"
  7726  3c78  ca3022                JP          Z,NO_ACTION_TAKEN
  7727  3c7b  fef7                  CP          $f7                                    ;If Key Row = 3 "V"
  7728  3c7d  ca3022                JP          Z,NO_ACTION_TAKEN
  7729  3c80  feef                  CP          $ef                                    ;If Key Row = 4 "C"
  7730  3c82  ca2b22                JP          Z,DO_COUNT_ARROWS
  7731  3c85  fedf                  CP          $df                                    ;If Key Row = 5 "F"
  7732  3c87  ca6b3b                JP          Z,DO_REST
  7733                          KEY_COL_5:
  7734  3c8a  2c                    INC         L
  7735  3c8b  7e                    LD          A,(HL)                  ;A = Key Column 5
  7736  3c8c  fefe                  CP          $fe                                    ;If Key Row = 0 "5"
  7737  3c8e  ca3022                JP          Z,NO_ACTION_TAKEN
  7738  3c91  fefd                  CP          $fd                                    ;If Key Row = 1 "T"
  7739  3c93  ca303d                JP          Z,DO_TELEPORT
  7740  3c96  fefb                  CP          $fb                                    ;If Key Row = 2 "4"
  7741  3c98  ca3022                JP          Z,NO_ACTION_TAKEN
  7742  3c9b  fef7                  CP          $f7                                    ;If Key Row = 3 "R"
  7743  3c9d  ca682a                JP          Z,DO_SWAP_PACK
  7744  3ca0  feef                  CP          $ef                                    ;If Key Row = 4 "D"
  7745  3ca2  caa332                JP          Z,DO_USE_LADDER
  7746  3ca5  fedf                  CP          $df                                    ;If Key Row = 5 "X"
  7747  3ca7  ca1422                JP          Z,DO_COUNT_FOOD
  7748                          KEY_COL_6:
  7749  3caa  2c                    INC         L
  7750  3cab  7e                    LD          A,(HL)                  ;A = Key Column 6
  7751  3cac  fefe                  CP          $fe                                    ;If Key Row = 0 "3"
  7752  3cae  ca3022                JP          Z,NO_ACTION_TAKEN
  7753  3cb1  fefd                  CP          $fd                                    ;If Key Row = 1 "E"
  7754  3cb3  cacc26                JP          Z,DO_SWAP_HANDS
  7755  3cb6  fefb                  CP          $fb                                    ;If Key Row = 2 "S"
  7756  3cb8  caf829                JP          Z,DO_ROTATE_PACK
  7757  3cbb  fef7                  CP          $f7                                    ;If Key Row = 3 "Z"
  7758  3cbd  ca6717                JP          Z,WIPE_WALLS
  7759  3cc0  feef                  CP          $ef                                    ;If Key Row = 4 "SPC"
  7760  3cc2  ca3022                JP          Z,NO_ACTION_TAKEN
  7761  3cc5  fedf                  CP          $df                                    ;If Key Row = 5 "A"
  7762  3cc7  ca3022                JP          Z,NO_ACTION_TAKEN
  7763                          KEY_COL_7:
  7764  3cca  2c                    INC         L
  7765  3ccb  7e                    LD          A,(HL)                  ;A = Key Column 7
  7766  3ccc  fefe                  CP          $fe                                    ;If Key Row = 0 "2"
  7767  3cce  ca3022                JP          Z,NO_ACTION_TAKEN
  7768  3cd1  fefd                  CP          $fd                                    ;If Key Row = 1 "W"
  7769  3cd3  cacc27                JP          Z,DO_PICK_UP
  7770  3cd6  fefb                  CP          $fb                                    ;If Key Row = 2 "1"
  7771  3cd8  ca3022                JP          Z,NO_ACTION_TAKEN
  7772  3cdb  fef7                  CP          $f7                                    ;If Key Row = 3 "Q"
  7773  3cdd  caee3c                JP          Z,MAX_HEALTH_ARROWS_FOOD
  7774  3ce0  feef                  CP          $ef                                    ;If Key Row = 4 "SHFT"
  7775  3ce2  ca3022                JP          Z,NO_ACTION_TAKEN
  7776  3ce5  fedf                  CP          $df                                    ;If Key Row = 5 "CTRL"
  7777  3ce7  ca3022                JP          Z,NO_ACTION_TAKEN
  7778  3cea  c33022                JP          NO_ACTION_TAKEN
  7779  3ced  00                    NOP
  7780                          MAX_HEALTH_ARROWS_FOOD:
  7781  3cee  21933a                LD          HL,PLAYER_PHYS_HEALTH
  7782  3cf1  3e99                  LD          A,$99
  7783  3cf3  77                    LD          (HL),A
  7784  3cf4  23                    INC         HL
  7785  3cf5  77                    LD          (HL),A
  7786  3cf6  23                    INC         HL
  7787  3cf7  77                    LD          (HL),A
  7788  3cf8  23                    INC         HL
  7789  3cf9  77                    LD          (HL),A
  7790  3cfa  23                    INC         HL
  7791  3cfb  77                    LD          (HL),A
  7792  3cfc  23                    INC         HL
  7793  3cfd  77                    LD          (HL),A
  7794  3cfe  21ab3a                LD          HL,FOOD_INV
  7795  3d01  77                    LD          (HL),A
  7796  3d02  23                    INC         HL
  7797  3d03  77                    LD          (HL),A
  7798  3d04  cd153e                CALL        PLAY_POWER_UP_SOUND
  7799  3d07  cd5d3d                CALL        REDRAW_STATS
  7800  3d0a  c39c2a                JP          INPUT_DEBOUNCE
  7801  3d0d  00                    db          $00
  7802  3d0e  00                    db          $00
  7803  3d0f  00                    db          $00
  7804  3d10  00                    db          $00
  7805  3d11  00                    db          $00
  7806  3d12  00                    db          $00
  7807  3d13  00                    db          $00
  7808  3d14  00                    db          $00
  7809  3d15  00                    db          $00
  7810  3d16  00                    db          $00
  7811  3d17  00                    db          $00
  7812  3d18  00                    db          $00
  7813  3d19  00                    db          $00
  7814  3d1a  00                    db          $00
  7815  3d1b  00                    db          $00
  7816  3d1c  00                    db          $00
  7817  3d1d  00                    db          $00
  7818  3d1e  00                    db          $00
  7819  3d1f  00                    db          $00
  7820  3d20  00                    db          $00
  7821  3d21  00                    db          $00
  7822  3d22  00                    db          $00
  7823  3d23  00                    db          $00
  7824  3d24  00                    db          $00
  7825  3d25  00                    db          $00
  7826  3d26  00                    db          $00
  7827  3d27  00                    db          $00
  7828  3d28  00                    db          $00
  7829  3d29  00                    db          $00
  7830  3d2a  00                    db          $00
  7831  3d2b  00                    db          $00
  7832  3d2c  00                    db          $00
  7833  3d2d  00                    db          $00
  7834  3d2e  00                    db          $00
  7835  3d2f  00                    db          $00
  7836                          DO_TELEPORT:
  7837  3d30  3a0039                LD          A,(MAP_LADDER_OFFSET)
  7838  3d33  32793a                LD          (PLAYER_MAP_POS),A
  7839  3d36  cdf03d                CALL        PLAY_TELEPORT_SOUND
  7840  3d39  c3962a                JP          UPDATE_VIEWPORT
  7841  3d3c  00                    db          $00
  7842  3d3d  00                    db          $00
  7843  3d3e  00                    db          $00
  7844  3d3f  00                    db          $00
  7845  3d40  00                    db          $00
  7846  3d41  00                    db          $00
  7847  3d42  00                    db          $00
  7848  3d43  00                    db          $00
  7849  3d44  00                    db          $00
  7850  3d45  00                    db          $00
  7851  3d46  00                    db          $00
  7852  3d47  00                    db          $00
  7853  3d48  00                    db          $00
  7854  3d49  00                    db          $00
  7855  3d4a  00                    db          $00
  7856  3d4b  00                    db          $00
  7857  3d4c  00                    db          $00
  7858  3d4d  00                    db          $00
  7859  3d4e  00                    db          $00
  7860  3d4f  00                    db          $00
  7861  3d50  00                    db          $00
  7862  3d51  00                    db          $00
  7863  3d52  00                    db          $00
  7864  3d53  00                    db          $00
  7865  3d54  00                    db          $00
  7866  3d55  00                    db          $00
  7867  3d56  00                    db          $00
  7868  3d57  00                    db          $00
  7869  3d58  00                    db          $00
  7870  3d59  00                    db          $00
  7871  3d5a  00                    db          $00
  7872  3d5b  00                    db          $00
  7873  3d5c  00                    db          $00
  7874                          REDRAW_STATS:
  7875  3d5d  cd0017                CALL        DRAW_ICON_BAR
  7876  3d60  21933a                LD          HL,PLAYER_PHYS_HEALTH
  7877  3d63  114130                LD          DE,CHRRAM_PHYS_HEALTH_1000              ;= $20
  7878  3d66  0602                  LD          B,0x2
  7879  3d68  cdfd32                CALL        RECALC_AND_REDRAW_BCD
  7880  3d6b  21973a                LD          HL,PLAYER_SPRT_HEALTH
  7881  3d6e  114730                LD          DE,CHRRAM_SPRT_HEALTH_10                ;= $20
  7882  3d71  0601                  LD          B,0x1
  7883  3d73  c3fd32                JP          RECALC_AND_REDRAW_BCD
  7884                          CHECK_RING:
  7885  3d76  f5                    PUSH        AF
  7886  3d77  3a763a                LD          A,(RING_INV_SLOT)
  7887  3d7a  cdd83d                CALL        LEVEL_TO_COLRAM_FIX
  7888  3d7d  321734                LD          (COLRAM_RING_IDX),A                     ;= $60    `
  7889  3d80  f1                    POP         AF
  7890  3d81  c9                    RET
  7891  3d82  00                    db          $00
  7892  3d83  00                    db          $00
  7893  3d84  00                    db          $00
  7894  3d85  00                    db          $00
  7895  3d86  00                    db          $00
  7896  3d87  00                    db          $00
  7897  3d88  00                    db          $00
  7898  3d89  00                    db          $00
  7899  3d8a  00                    db          $00
  7900  3d8b  00                    db          $00
  7901  3d8c  00                    db          $00
  7902  3d8d  00                    db          $00
  7903  3d8e  00                    db          $00
  7904  3d8f  00                    db          $00
  7905  3d90  00                    db          $00
  7906  3d91  00                    db          $00
  7907  3d92  00                    db          $00
  7908  3d93  00                    db          $00
  7909  3d94  00                    db          $00
  7910  3d95  00                    db          $00
  7911  3d96  00                    db          $00
  7912  3d97  00                    db          $00
  7913                          CHECK_HELMET:
  7914  3d98  f5                    PUSH        AF
  7915  3d99  3a753a                LD          A,(HELMET_INV_SLOT)
  7916  3d9c  cdd83d                CALL        LEVEL_TO_COLRAM_FIX
  7917  3d9f  321534                LD          (COLRAM_HELMET_IDX),A                   ;= $60    `
  7918  3da2  f1                    POP         AF
  7919  3da3  c9                    RET
  7920  3da4  00                    db          $00
  7921  3da5  00                    db          $00
  7922  3da6  00                    db          $00
  7923  3da7  00                    db          $00
  7924  3da8  00                    db          $00
  7925  3da9  00                    db          $00
  7926  3daa  00                    db          $00
  7927  3dab  00                    db          $00
  7928  3dac  00                    db          $00
  7929  3dad  00                    db          $00
  7930  3dae  00                    db          $00
  7931  3daf  00                    db          $00
  7932  3db0  00                    db          $00
  7933  3db1  00                    db          $00
  7934  3db2  00                    db          $00
  7935  3db3  00                    db          $00
  7936  3db4  00                    db          $00
  7937  3db5  00                    db          $00
  7938  3db6  00                    db          $00
  7939  3db7  00                    db          $00
  7940                          CHECK_ARMOR:
  7941  3db8  f5                    PUSH        AF
  7942  3db9  3a743a                LD          A,(ARMOR_INV_SLOT)
  7943  3dbc  cdd83d                CALL        LEVEL_TO_COLRAM_FIX
  7944  3dbf  321334                LD          (COLRAM_ARMOR_IDX),A                    ;= $60    `
  7945  3dc2  f1                    POP         AF
  7946  3dc3  c9                    RET
  7947  3dc4  00                    db          $00
  7948  3dc5  00                    db          $00
  7949  3dc6  00                    db          $00
  7950  3dc7  00                    db          $00
  7951  3dc8  00                    db          $00
  7952  3dc9  00                    db          $00
  7953  3dca  00                    db          $00
  7954  3dcb  00                    db          $00
  7955  3dcc  00                    db          $00
  7956  3dcd  00                    db          $00
  7957  3dce  00                    db          $00
  7958  3dcf  00                    db          $00
  7959  3dd0  00                    db          $00
  7960  3dd1  00                    db          $00
  7961  3dd2  00                    db          $00
  7962  3dd3  00                    db          $00
  7963  3dd4  00                    db          $00
  7964  3dd5  00                    db          $00
  7965  3dd6  00                    db          $00
  7966  3dd7  00                    db          $00
  7967                          LEVEL_TO_COLRAM_FIX:
  7968  3dd8  87                    ADD         A,A
  7969  3dd9  d601                  SUB         0x1
  7970  3ddb  cb27                  SLA         A
  7971  3ddd  cb27                  SLA         A
  7972  3ddf  cb27                  SLA         A
  7973  3de1  cb27                  SLA         A
  7974  3de3  c9                    RET
  7975                          RHA_REDRAW:
  7976  3de4  cd763d                CALL        CHECK_RING
  7977  3de7  cd983d                CALL        CHECK_HELMET
  7978  3dea  cdb83d                CALL        CHECK_ARMOR
  7979  3ded  c39c2a                JP          INPUT_DEBOUNCE
  7980                          PLAY_TELEPORT_SOUND:
  7981  3df0  012002                LD          BC,$220
  7982  3df3  111800                LD          DE,$18
  7983  3df6  cd3c22                CALL        PLAY_SOUND_LOOP
  7984  3df9  011001                LD          BC,$110
  7985  3dfc  111800                LD          DE,$18
  7986  3dff  cd3c22                CALL        PLAY_SOUND_LOOP
  7987  3e02  018800                LD          BC,$88
  7988  3e05  111800                LD          DE,$18
  7989  3e08  cd3c22                CALL        PLAY_SOUND_LOOP
  7990  3e0b  014400                LD          BC,$44
  7991  3e0e  111800                LD          DE,$18
  7992  3e11  cd3c22                CALL        PLAY_SOUND_LOOP
  7993  3e14  c9                    RET
  7994                          PLAY_POWER_UP_SOUND:
  7995  3e15  012002                LD          BC,$220
  7996  3e18  111800                LD          DE,$18
  7997  3e1b  cd3c22                CALL        PLAY_SOUND_LOOP
  7998  3e1e  010002                LD          BC,$200
  7999  3e21  111800                LD          DE,$18
  8000  3e24  cd3c22                CALL        PLAY_SOUND_LOOP
  8001  3e27  01e001                LD          BC,$1e0
  8002  3e2a  111800                LD          DE,$18
  8003  3e2d  cd3c22                CALL        PLAY_SOUND_LOOP
  8004  3e30  01c001                LD          BC,$1c0
  8005  3e33  116000                LD          DE,$60
  8006  3e36  cd3c22                CALL        PLAY_SOUND_LOOP
  8007  3e39  c9                    RET
  8008  3e3a  00                    db          $00
  8009  3e3b  00                    db          $00
  8010  3e3c  00                    db          $00
  8011  3e3d  00                    db          $00
  8012  3e3e  00                    db          $00
  8013  3e3f  00                    db          $00
  8014  3e40  00                    db          $00
  8015  3e41  00                    db          $00
  8016  3e42  00                    db          $00
  8017  3e43  00                    db          $00
  8018  3e44  00                    db          $00
  8019  3e45  00                    db          $00
  8020  3e46  00                    db          $00
  8021  3e47  00                    db          $00
  8022  3e48  00                    db          $00
  8023  3e49  00                    db          $00
  8024  3e4a  00                    db          $00
  8025  3e4b  00                    db          $00
  8026  3e4c  00                    db          $00
  8027  3e4d  00                    db          $00
  8028  3e4e  00                    db          $00
  8029  3e4f  00                    db          $00
  8030  3e50  00                    db          $00
  8031  3e51  00                    db          $00
  8032  3e52  00                    db          $00
  8033  3e53  00                    db          $00
  8034  3e54  00                    db          $00
  8035  3e55  00                    db          $00
  8036  3e56  00                    db          $00
  8037  3e57  00                    db          $00
  8038  3e58  00                    db          $00
  8039  3e59  00                    db          $00
  8040  3e5a  00                    db          $00
  8041  3e5b  00                    db          $00
  8042  3e5c  00                    db          $00
  8043  3e5d  00                    db          $00
  8044  3e5e  00                    db          $00
  8045  3e5f  00                    db          $00
  8046  3e60  00                    db          $00
  8047  3e61  00                    db          $00
  8048  3e62  00                    db          $00
  8049  3e63  00                    db          $00
  8050  3e64  00                    db          $00
  8051  3e65  00                    db          $00
  8052  3e66  00                    db          $00
  8053  3e67  00                    db          $00
  8054  3e68  00                    db          $00
  8055  3e69  00                    db          $00
  8056  3e6a  00                    db          $00
  8057  3e6b  00                    db          $00
  8058  3e6c  00                    db          $00
  8059  3e6d  00                    db          $00
  8060  3e6e  00                    db          $00
  8061  3e6f  00                    db          $00
  8062  3e70  00                    db          $00
  8063  3e71  00                    db          $00
  8064  3e72  00                    db          $00
  8065  3e73  00                    db          $00
  8066  3e74  00                    db          $00
  8067  3e75  00                    db          $00
  8068  3e76  00                    db          $00
  8069  3e77  00                    db          $00
  8070  3e78  00                    db          $00
  8071  3e79  00                    db          $00
  8072  3e7a  00                    db          $00
  8073  3e7b  00                    db          $00
  8074  3e7c  00                    db          $00
  8075  3e7d  00                    db          $00
  8076  3e7e  00                    db          $00
  8077  3e7f  00                    db          $00
  8078  3e80  00                    db          $00
  8079  3e81  00                    db          $00
  8080  3e82  00                    db          $00
  8081  3e83  00                    db          $00
  8082  3e84  00                    db          $00
  8083  3e85  00                    db          $00
  8084  3e86  00                    db          $00
  8085  3e87  00                    db          $00
  8086  3e88  00                    db          $00
  8087  3e89  00                    db          $00
  8088  3e8a  00                    db          $00
  8089  3e8b  00                    db          $00
  8090  3e8c  00                    db          $00
  8091  3e8d  00                    db          $00
  8092  3e8e  00                    db          $00
  8093  3e8f  00                    db          $00
  8094  3e90  00                    db          $00
  8095  3e91  00                    db          $00
  8096  3e92  00                    db          $00
  8097  3e93  00                    db          $00
  8098  3e94  00                    db          $00
  8099  3e95  00                    db          $00
  8100  3e96  00                    db          $00
  8101  3e97  00                    db          $00
  8102  3e98  00                    db          $00
  8103  3e99  00                    db          $00
  8104  3e9a  00                    db          $00
  8105  3e9b  00                    db          $00
  8106  3e9c  00                    db          $00
  8107  3e9d  00                    db          $00
  8108  3e9e  00                    db          $00
  8109  3e9f  00                    db          $00
  8110  3ea0  00                    db          $00
  8111  3ea1  00                    db          $00
  8112  3ea2  00                    db          $00
  8113  3ea3  00                    db          $00
  8114  3ea4  00                    db          $00
  8115  3ea5  00                    db          $00
  8116  3ea6  00                    db          $00
  8117  3ea7  00                    db          $00
  8118  3ea8  00                    db          $00
  8119  3ea9  00                    db          $00
  8120  3eaa  00                    db          $00
  8121  3eab  00                    db          $00
  8122  3eac  00                    db          $00
  8123  3ead  00                    db          $00
  8124  3eae  00                    db          $00
  8125  3eaf  00                    db          $00
  8126  3eb0  00                    db          $00
  8127  3eb1  00                    db          $00
  8128  3eb2  00                    db          $00
  8129  3eb3  00                    db          $00
  8130  3eb4  00                    db          $00
  8131  3eb5  00                    db          $00
  8132  3eb6  00                    db          $00
  8133  3eb7  00                    db          $00
  8134  3eb8  00                    db          $00
  8135  3eb9  00                    db          $00
  8136  3eba  00                    db          $00
  8137  3ebb  00                    db          $00
  8138  3ebc  00                    db          $00
  8139  3ebd  00                    db          $00
  8140  3ebe  00                    db          $00
  8141  3ebf  00                    db          $00
  8142  3ec0  00                    db          $00
  8143  3ec1  00                    db          $00
  8144  3ec2  00                    db          $00
  8145  3ec3  00                    db          $00
  8146  3ec4  00                    db          $00
  8147  3ec5  00                    db          $00
  8148  3ec6  00                    db          $00
  8149  3ec7  00                    db          $00
  8150  3ec8  00                    db          $00
  8151  3ec9  00                    db          $00
  8152  3eca  00                    db          $00
  8153  3ecb  00                    db          $00
  8154  3ecc  00                    db          $00
  8155  3ecd  00                    db          $00
  8156  3ece  00                    db          $00
  8157  3ecf  00                    db          $00
  8158  3ed0  00                    db          $00
  8159  3ed1  00                    db          $00
  8160  3ed2  00                    db          $00
  8161  3ed3  00                    db          $00
  8162  3ed4  00                    db          $00
  8163  3ed5  00                    db          $00
  8164  3ed6  00                    db          $00
  8165  3ed7  00                    db          $00
  8166  3ed8  00                    db          $00
  8167  3ed9  00                    db          $00
  8168  3eda  00                    db          $00
  8169  3edb  00                    db          $00
  8170  3edc  00                    db          $00
  8171  3edd  00                    db          $00
  8172  3ede  00                    db          $00
  8173  3edf  00                    db          $00
  8174  3ee0  00                    db          $00
  8175  3ee1  00                    db          $00
  8176  3ee2  00                    db          $00
  8177  3ee3  00                    db          $00
  8178  3ee4  00                    db          $00
  8179  3ee5  00                    db          $00
  8180  3ee6  00                    db          $00
  8181  3ee7  00                    db          $00
  8182  3ee8  00                    db          $00
  8183  3ee9  00                    db          $00
  8184  3eea  00                    db          $00
  8185  3eeb  00                    db          $00
  8186  3eec  00                    db          $00
  8187  3eed  00                    db          $00
  8188  3eee  00                    db          $00
  8189  3eef  00                    db          $00
  8190  3ef0  00                    db          $00
  8191  3ef1  00                    db          $00
  8192  3ef2  00                    db          $00
  8193  3ef3  00                    db          $00
  8194  3ef4  00                    db          $00
  8195  3ef5  00                    db          $00
  8196  3ef6  00                    db          $00
  8197  3ef7  00                    db          $00
  8198  3ef8  00                    db          $00
  8199  3ef9  00                    db          $00
  8200  3efa  00                    db          $00
  8201  3efb  00                    db          $00
  8202  3efc  00                    db          $00
  8203  3efd  00                    db          $00
  8204  3efe  00                    db          $00
  8205                          GFX_POINTERS:
  8206  3eff  00                    db          0h
  8207                          GFX_PTR_BUCKLER:
  8208  3f00  5202                  dw        BUCKLER                                 ;= $01,$01,$01,$01,$01
  8209                          GFX_PTR_BUCKLER_S:
  8210  3f02  6502                  dw        BUCKLER_S                               ;= $01,$01
  8211                          GFX_PTR_BUCKLER_T:
  8212  3f04  6a02                  dw        BUCKLER_T                               ;= $00,$87,$FF
  8213                          GFX_PTR_RING:
  8214  3f06  0802                  dw        RING                                    ;= $01,$01,$01,$01,$01,$01,$01
  8215                          GFX_PTR_RING_S:
  8216  3f08  1202                  dw        RING_S                                  ;= $01,$01,$01
  8217                          GFX_PTR_RING_T:
  8218  3f0a  1802                  dw        RING_T                                  ;= $00,".",$FF
  8219                          GFX_PTR_HELMET:
  8220  3f0c  8b02                  dw        HELMET                                  ;= $01,$01,$01,$01,$01,$01
  8221                          GFX_PTR_HELMET_S:
  8222  3f0e  9902                  dw        HELMET_S                                ;= $01,$01,$01
  8223                          GFX_PTR_HELMET_T:
  8224  3f10  a302                  dw        HELMET_T                                ;= $00,"^",$FF
  8225                          GFX_PTR_ARMOR:
  8226  3f12  b203                  dw        ARMOR                                   ;= $01,$01,$01,$01,$01
  8227                          GFX_PTR_ARMOR_S:
  8228  3f14  ca03                  dw        ARMOR_S                                 ;= $01,$01
  8229                          GFX_PTR_ARMOR_T:
  8230  3f16  db03                  dw        ARMOR_T                                 ;= $00,$A0,$C7,$D9,$01
  8231                          GFX_PTR_PAVISE:
  8232  3f18  e503                  dw        PAVICE                                  ;= $01,$01,$01,$01,$01
  8233                          GFX_PTR_PAVISE_S:
  8234  3f1a  fd03                  dw        PAVICE_S                                ;= $01,$01
  8235                          GFX_PTR_PAVISE_T:
  8236  3f1c  0b04                  dw        PAVICE_T                                ;= $00,$7F,$01
  8237                          GFX_PTR_ARROW_L:
  8238  3f1e  1b02                  dw        ARROW_FLYING_LEFT                       ;= $01,$01,$01,$01,$01,$01
  8239                          GFX_PTR_ARROW_R:
  8240  3f20  2402                  dw        ARROW_FLYING_RIGHT                      ;= $01,$01,$01,$01,$01,$01
  8241                          GFX_PTR_ARROW_L_2:
  8242  3f22  1b02                  dw        ARROW_FLYING_LEFT                       ;= $01,$01,$01,$01,$01,$01
  8243                          GFX_PTR_BOW:
  8244  3f24  c102                  dw        BOW                                     ;= $01,$01,$01,$01,$01
  8245                          GFX_PTR_BOW_S:
  8246  3f26  d502                  dw        BOW_S                                   ;= $01,$01
  8247                          GFX_PTR_BOW_T:
  8248  3f28  e002                  dw        BOW_T                                   ;= $00,"{",$FF
  8249                          GFX_PTR_SCROLL:
  8250  3f2a  9a10                  dw        SCROLL                                  ;= $01,$01,$01,$01,$01
  8251                          GFX_PTR_SCROLL_S:
  8252  3f2c  b510                  dw        SCROLL_S                                ;= $01,$01
  8253                          GFX_PTR_SCROLL_NEW_T:
  8254  3f2e  bf10                  dw        SCROLL_T                                ;= $00,"H",$FF
  8255                          GFX_PTR_AXE:
  8256  3f30  e302                  dw        AXE                                     ;= $01,$01,$01,$01,$01
  8257                          GFX_PTR_AXE_S:
  8258  3f32  f802                  dw        AXE_S                                   ;= $01,$01
  8259                          GFX_PTR_AXE_T:
  8260  3f34  0803                  dw        AXE_T                                   ;= $00,$11,$FF
  8261                          GFX_PTR_FIREBALL:
  8262  3f36  eb04                  dw        FIREBALL                                ;= $01,$01,$01,$01,$01
  8263                          GFX_PTR_FIREBALL_S:
  8264  3f38  fc04                  dw        FIREBALL_S                              ;= $01,$01
  8265                          GFX_PTR_FIREBALL_T:
  8266  3f3a  0105                  dw        FIREBALL_T                              ;= $00,$D3,$FF
  8267                          GFX_PTR_MACE:
  8268  3f3c  bb04                  dw        MACE                                    ;= $01,$01,$01,$01,$01
  8269                          GFX_PTR_MACE_S:
  8270  3f3e  d604                  dw        MACE_S                                  ;= $01,$01
  8271                          GFX_PTR_MACE_T:
  8272  3f40  e804                  dw        MACE_T                                  ;= $00,"T",$FF
  8273                          GFX_PTR_STAFF:
  8274  3f42  7b10                  dw        STAFF                                   ;= $01,$01,$01,$01,$01
  8275                          GFX_PTR_STAFF_S:
  8276  3f44  8e10                  dw        STAFF_S                                 ;= $01,$01
  8277                          GFX_PTR_STAFF_T:
  8278  3f46  9710                  dw        STAFF_T                                 ;= $00,"\\",$FF
  8279                          GFX_PTR_CROSSBOW:
  8280  3f48  c210                  dw        CROSSBOW                                ;= $01,$01,$01,$01,$01
  8281                          GFX_PTR_CROSSBOW_S:
  8282  3f4a  e510                  dw        CROSSBOW_S                              ;= $01,$01
  8283                          GFX_PTR_CROSSBOW_T:
  8284  3f4c  ed10                  dw        CROSSBOW_T                              ;= $A0,$91,$A0,$D8,$02,$04,$90,$FF
  8285  3f4e  5600                  dw        EXCL_MARK_GFX
  8286  3f50  5600                  dw        EXCL_MARK_GFX
  8287  3f52  5600                  dw        EXCL_MARK_GFX
  8288  3f54  5600                  dw        EXCL_MARK_GFX
  8289  3f56  5600                  dw        EXCL_MARK_GFX
  8290  3f58  5600                  dw        EXCL_MARK_GFX
  8291                          GFX_PTR_ARROW_R_2:
  8292  3f5a  2402                  dw        ARROW_FLYING_RIGHT                      ;= $01,$01,$01,$01,$01,$01
  8293  3f5c  5600                  dw        EXCL_MARK_GFX
  8294  3f5e  5600                  dw        EXCL_MARK_GFX
  8295                          GFX_PTR_LADDER:
  8296  3f60  8e04                  dw        LADDER                                  ;= $01,$01,$01,$01,$01
  8297                          GFX_PTR_LADDER_S:
  8298  3f62  a704                  dw        LADDER_S                                ;= $01,$01
  8299                          GFX_PTR_LADDER_T:
  8300  3f64  b704                  dw        LADDER_T                                ;= $00,$CD,$97,$FF
  8301                          GFX_PTR_CHEST:
  8302  3f66  5f03                  dw        CHEST                                   ;= $01,$01,$01,$01,$01
  8303                          GFX_PTR_CHEST_S:
  8304  3f68  9d03                  dw        CHEST_S                                 ;= $01,$E0,$1F,$1F,$B0,$01
  8305                          GFX_PTR_CHEST_T:
  8306  3f6a  af03                  dw        CHEST_T                                 ;= $00,$FC,$FF
  8307                          GFX_PTR_FOOD:
  8308  3f6c  0b03                  dw        FOOD                                    ;= $01,$01,$01,$01,$01
  8309                          GFX_PTR_FOOD_S:
  8310  3f6e  2203                  dw        FOOD_S                                  ;= $01,$01
  8311                          GFX_PTR_FOOD_T:
  8312  3f70  2c03                  dw        FOOD_T                                  ;= $00,"#",$FF
  8313                          GFX_PTR_QUIVER:
  8314  3f72  2d02                  dw        QUIVER                                  ;= $01,$01,$01,$01,$01,$01
  8315                          GFX_PTR_QUIVER_S:
  8316  3f74  4402                  dw        QUIVER_S                                ;= $01,$01
  8317                          GFX_PTR_QUIVER_T:
  8318  3f76  4f02                  dw        QUIVER_T                                ;= $00,$F0,$FF
  8319                          GFX_PTR_LOCK_CHEST:
  8320  3f78  7e03                  dw        LOCKED_CHEST                            ;= $01,$01,$01,$01,$01
  8321                          GFX_PTR_LOCK_CHEST_S:
  8322  3f7a  9d03                  dw        CHEST_S                                 ;= $01,$E0,$1F,$1F,$B0,$01
  8323                          GFX_PTR_LOCK_CHEST_T:
  8324  3f7c  af03                  dw        CHEST_T                                 ;= $00,$FC,$FF
  8325  3f7e  5600                  dw        EXCL_MARK_GFX
  8326  3f80  5600                  dw        EXCL_MARK_GFX
  8327  3f82  5600                  dw        EXCL_MARK_GFX
  8328                          GFX_PTR_KEY:
  8329  3f84  a602                  dw        KEY                                     ;= $01,$01,$01,$01,$01,$01
  8330                          GFX_PTR_KEY_S:
  8331  3f86  b802                  dw        KEY_S                                   ;= $01,$01,$01
  8332                          GFX_PTR_KEY_T:
  8333  3f88  be02                  dw        KEY_T                                   ;= $FF,"-",$FF
  8334                          GFX_PTR_AMULET:
  8335  3f8a  6304                  dw        AMULET                                  ;= $01,$01,$01,$01,$01
  8336                          GFX_PTR_AMULET_S:
  8337  3f8c  7b04                  dw        AMULET_S                                ;= $01,$01
  8338                          GFX_PTR_AMULET_T:
  8339  3f8e  8b04                  dw        AMULET_T                                ;= $00,"&",$FF
  8340                          GFX_PTR_CHALICE:
  8341  3f90  6d02                  dw        CHALICE                                 ;= $01,$01,$01,$01,$01,$01
  8342                          GFX_PTR_CHALICE_S:
  8343  3f92  8002                  dw        CHALICE_S                               ;= $01,$01
  8344                          GFX_PTR_CHALICE_T:
  8345  3f94  8802                  dw        CHALICE_T                               ;= $00,"Y",$FF
  8346                          GFX_PTR_WARRIOR_POTION:
  8347  3f96  f510                  dw        WARRIOR_POTION                          ;= $01,$01,$01,$01,$01
  8348                          GFX_PTR_WARRIOR_POTION_S:
  8349  3f98  3411                  dw        WARRIOR_POTION_S                        ;= $01,$01
  8350                          GFX_PTR_WARRIOR_POTION_T:
  8351  3f9a  5511                  dw        POTION_T                                ;= $00,"U",$02,$04,"_",$FF
  8352                          GFX_PTR_MAGE_POTION:
  8353  3f9c  0a11                  dw        MAGE_POTION                             ;= $01,$01,$01,$01,$01
  8354                          GFX_PTR_MAGE_POTION_S:
  8355  3f9e  3f11                  dw        MAGE_POTION_S                           ;= $01,$01
  8356                          GFX_PTR_MAGE_POTION_T:
  8357  3fa0  5511                  dw        POTION_T                                ;= $00,"U",$02,$04,"_",$FF
  8358                          GFX_PTR_MAP:
  8359  3fa2  2f03                  dw        MAP                                     ;= $01,$01,$01,$01,$01
  8360                          GFX_PTR_MAP_S:
  8361  3fa4  4e03                  dw        MAP_S                                   ;= $01,$01
  8362                          GFX_PTR_MAP_T:
  8363  3fa6  5c03                  dw        MAP_T                                   ;= $00,$D5,$FF
  8364                          GFX_PTR_CHAOS_POTION:
  8365  3fa8  1f11                  dw        CHAOS_POTION                            ;= $01,$01,$01,$01,$01
  8366                          GFX_PTR_CHAOS_POTION_S:
  8367  3faa  4a11                  dw        CHAOS_POTION_S                          ;= $01,$01
  8368                          GFX_PTR_CHAOS_POTION_T:
  8369  3fac  5511                  dw        POTION_T                                ;= $00,"U",$02,$04,"_",$FF
  8370  3fae  5600                  dw        EXCL_MARK_GFX
  8371  3fb0  5600                  dw        EXCL_MARK_GFX
  8372  3fb2  5600                  dw        EXCL_MARK_GFX
  8373                          GFX_END_PT1:
  8374  3fb4  0000                  dw        NO_GFX                                  ;= $FF
  8375                          GFX_PTR_SKELETON:
  8376  3fb6  b506                  dw        SKELETON                                ;= $04,$04,$04,$04
  8377                          GFX_PTR_SKELETON_S:
  8378  3fb8  f306                  dw        SKELETON_S                              ;= $04,$04,$04
  8379  3fba  0000                  dw        NO_GFX                                  ;= $FF
  8380                          GFX_PTR_SNAKE:
  8381  3fbc  5c06                  dw        SNAKE                                   ;= $04,$04,$04
  8382                          GFX_PTR_SNAKE_S:
  8383  3fbe  9d06                  dw        SNAKE_S                                 ;= $04,$04,$04
  8384  3fc0  0000                  dw        NO_GFX                                  ;= $FF
  8385                          GFX_PTR_SPIDER:
  8386  3fc2  2005                  dw        SPIDER                                  ;= $04,$04
  8387                          GFX_PTR_SPIDER_S:
  8388  3fc4  5105                  dw        SPIDER_S                                ;= $04,$04,$04,$04
  8389  3fc6  0000                  dw        NO_GFX                                  ;= $FF
  8390                          GFX_PTR_MIMIC:
  8391  3fc8  6a05                  dw        MIMIC                                   ;= $04,$02,$D7,$96,$00,$00,$96,$C9,$01
  8392                          GFX_PTR_MIMIC_S:
  8393  3fca  9d05                  dw        MIMIC_S                                 ;= $01,$E0,$1F,$1F,$B0,$01
  8394  3fcc  0000                  dw        NO_GFX                                  ;= $FF
  8395                          GFX_PTR_MALOCCHIO:
  8396  3fce  af05                  dw        MALOCCHIO                               ;= $04,$04,$04,$04
  8397                          GFX_PTR_MALOCCHIO_S:
  8398  3fd0  e505                  dw        MALOCCHIO_S                             ;= $04,$04,$04,$04
  8399  3fd2  0000                  dw        NO_GFX                                  ;= $FF
  8400                          GFX_PTR_DRAGON:
  8401  3fd4  0100                  dw        DRAGON                                  ;= $04,$04,$04,$04
  8402                          GFX_PTR_DRAGON_S:
  8403  3fd6  6d00                  dw        DRAGON_S                                ;= $04,$04,$04,$C9,$C9,$C0,$C0,$01
  8404                          GFX_PTR_END_A:
  8405  3fd8  0000                  dw        NO_GFX                                  ;= $FF
  8406                          GFX_PTR_MUMMY:
  8407  3fda  0907                  dw        MUMMY                                   ;= $04,$04,$04,$04
  8408                          GFX_PTR_MUMMY_S:
  8409  3fdc  6c07                  dw        MUMMY_S                                 ;= $04,$04,$04
  8410                          GFX_PTR_END_B:
  8411  3fde  0000                  dw        NO_GFX                                  ;= $FF
  8412                          GFX_PTR_NECRO:
  8413  3fe0  8507                  dw        NECROMANCER                             ;= $04,$04,$04,$04
  8414                          GFX_PTR_NECRO_S:
  8415  3fe2  e007                  dw        NECROMANCER_S                           ;= $04,$04,$04
  8416                          GFX_PTR_END_C:
  8417  3fe4  0000                  dw        NO_GFX                                  ;= $FF
  8418                          GFX_PTR_GRYPHON:
  8419  3fe6  0110                  dw        GRYPHON                                 ;= $04,$04,$04,$04
  8420                          GFX_PTR_GRYPHON_S:
  8421  3fe8  6110                  dw        GRYPHON_S                               ;= $04,$04,$04,$B8,$B8,$B0,$01
  8422                          GFX_PTR_END_D:
  8423  3fea  0000                  dw        NO_GFX                                  ;= $FF
  8424                          GFX_PTR_MINOTAUR:
  8425  3fec  ff05                  dw        MINOTAUR                                ;= $04,$04,$04,$04
  8426                          GFX_PTR_MINOTAUR_S:
  8427  3fee  4606                  dw        MINOTAUR_S                              ;= $04,$04,$04,$04
  8428                          
  8429  3ff0  0000000000000000      ds 16, $00
              0000000000000000  
  8430                          
